<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Actors · FUSE</title><meta name="title" content="Actors · FUSE"/><meta property="og:title" content="Actors · FUSE"/><meta property="twitter:title" content="Actors · FUSE"/><meta name="description" content="Documentation for FUSE."/><meta property="og:description" content="Documentation for FUSE."/><meta property="twitter:description" content="Documentation for FUSE."/><script async src="https://www.googletagmanager.com/gtag/js?id=G-65D8V8C8VQ"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-65D8V8C8VQ', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img class="docs-light-only" src="assets/logo.svg" alt="FUSE logo"/><img class="docs-dark-only" src="assets/logo-dark.svg" alt="FUSE logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li><a class="tocitem" href="install.html">Install</a></li><li><a class="tocitem" href="pubs.html">References</a></li><li><a class="tocitem" href="tutorial.html">Tutorial</a></li><li><a class="tocitem" href="examples.html">Examples</a></li><li><a class="tocitem" href="cases.html">Use Cases</a></li><li class="is-active"><a class="tocitem" href="actors.html">Actors</a><ul class="internal"><li><a class="tocitem" href="#Balance-plant-(3-actors)"><span>Balance plant (3 actors)</span></a></li><li><a class="tocitem" href="#Build-(5-actors)"><span>Build (5 actors)</span></a></li><li><a class="tocitem" href="#Compound-(3-actors)"><span>Compound (3 actors)</span></a></li><li><a class="tocitem" href="#Control-(1-actors)"><span>Control (1 actors)</span></a></li><li><a class="tocitem" href="#Costing-(3-actors)"><span>Costing (3 actors)</span></a></li><li><a class="tocitem" href="#Current-(3-actors)"><span>Current (3 actors)</span></a></li><li><a class="tocitem" href="#Diagnostics-(1-actors)"><span>Diagnostics (1 actors)</span></a></li><li><a class="tocitem" href="#Divertors-(1-actors)"><span>Divertors (1 actors)</span></a></li><li><a class="tocitem" href="#Equilibrium-(5-actors)"><span>Equilibrium (5 actors)</span></a></li><li><a class="tocitem" href="#Hcd-(5-actors)"><span>Hcd (5 actors)</span></a></li><li><a class="tocitem" href="#Nuclear-(2-actors)"><span>Nuclear (2 actors)</span></a></li><li><a class="tocitem" href="#Pedestal-(4-actors)"><span>Pedestal (4 actors)</span></a></li><li><a class="tocitem" href="#Pf-(3-actors)"><span>Pf (3 actors)</span></a></li><li><a class="tocitem" href="#Sol-(2-actors)"><span>Sol (2 actors)</span></a></li><li><a class="tocitem" href="#Stability-(2-actors)"><span>Stability (2 actors)</span></a></li><li><a class="tocitem" href="#Transport-(8-actors)"><span>Transport (8 actors)</span></a></li><li><a class="tocitem" href="#Wall-loading-(2-actors)"><span>Wall loading (2 actors)</span></a></li></ul></li><li><a class="tocitem" href="inits.html">Initialization</a></li><li><a class="tocitem" href="dd.html"><code>dd</code> Data Structure</a></li><li><a class="tocitem" href="ini.html"><code>ini</code> Parameters</a></li><li><a class="tocitem" href="act.html"><code>act</code> Parameters</a></li><li><a class="tocitem" href="develop.html">Development</a></li><li><a class="tocitem" href="deps.html">Ecosystem</a></li><li><a class="tocitem" href="license.html">License</a></li><li><a class="tocitem" href="notice.html">Notice</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="actors.html">Actors</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="actors.html">Actors</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ProjectTorreyPines/FUSE.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/master/docs/src/actors.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Physics-and-Engineering-Actors"><a class="docs-heading-anchor" href="#Physics-and-Engineering-Actors">Physics and Engineering Actors</a><a id="Physics-and-Engineering-Actors-1"></a><a class="docs-heading-anchor-permalink" href="#Physics-and-Engineering-Actors" title="Permalink"></a></h1><p>Physics and engineering <strong>actors</strong> are the fundamental building blocks of FUSE simulations:</p><ul><li>Actors operate exclusively on <code>IMAS.dd</code> data</li><li>Actors functionality is controlled via <code>act</code> parameters</li><li>Actors can be combined into other actors</li></ul><p>Fidelity hierarchy is enabled by concept of <em>generic</em> Vs <em>specific</em> actors</p><ul><li>Generic actors define physics/component </li><li>Specific actors implement a specific model for that physics/component</li><li>For example:<pre><code class="nohighlight hljs">ActorEquilibrium  &lt;--  generic
├─ ActorTEQUILA   &lt;--  specific
├─ ActorCHEASE    &lt;--  specific
└─ ActorFRESCO    &lt;--  specific</code></pre></li><li><code>act.[ActorGeneric].model</code> selects specific actor being used</li><li>All specific actors will expect data and fill the same enties in <code>dd</code><ul><li>IMAS.jl expressions are key to make this work seamlessly</li></ul></li><li>Where possible actors should make use of generic actors and not hardcode use of specific actors</li></ul><ul><li><a href="actors.html#Physics-and-Engineering-Actors">Physics and Engineering Actors</a></li><li class="no-marker"><ul><li><a href="actors.html#Balance-plant-(3-actors)">Balance plant (3 actors)</a></li><li class="no-marker"><ul><li><a href="actors.html#BalanceOfPlant">BalanceOfPlant</a></li><li><a href="actors.html#ThermalPlant">ThermalPlant</a></li><li><a href="actors.html#PowerNeeds">PowerNeeds</a></li></ul></li><li><a href="actors.html#Build-(5-actors)">Build (5 actors)</a></li><li class="no-marker"><ul><li><a href="actors.html#CXbuild">CXbuild</a></li><li><a href="actors.html#HFSsizing">HFSsizing</a></li><li><a href="actors.html#FluxSwing">FluxSwing</a></li><li><a href="actors.html#LFSsizing">LFSsizing</a></li><li><a href="actors.html#Stresses">Stresses</a></li></ul></li><li><a href="actors.html#Compound-(3-actors)">Compound (3 actors)</a></li><li class="no-marker"><ul><li><a href="actors.html#DynamicPlasma">DynamicPlasma</a></li><li><a href="actors.html#StationaryPlasma">StationaryPlasma</a></li><li><a href="actors.html#WholeFacility">WholeFacility</a></li></ul></li><li><a href="actors.html#Control-(1-actors)">Control (1 actors)</a></li><li class="no-marker"><ul><li><a href="actors.html#ControllerIp">ControllerIp</a></li></ul></li><li><a href="actors.html#Costing-(3-actors)">Costing (3 actors)</a></li><li class="no-marker"><ul><li><a href="actors.html#Costing">Costing</a></li><li><a href="actors.html#CostingARIES">CostingARIES</a></li><li><a href="actors.html#CostingSheffield">CostingSheffield</a></li></ul></li><li><a href="actors.html#Current-(3-actors)">Current (3 actors)</a></li><li class="no-marker"><ul><li><a href="actors.html#Current">Current</a></li><li><a href="actors.html#QED">QED</a></li><li><a href="actors.html#SteadyStateCurrent">SteadyStateCurrent</a></li></ul></li><li><a href="actors.html#Diagnostics-(1-actors)">Diagnostics (1 actors)</a></li><li class="no-marker"><ul><li><a href="actors.html#FitProfiles">FitProfiles</a></li></ul></li><li><a href="actors.html#Divertors-(1-actors)">Divertors (1 actors)</a></li><li class="no-marker"><ul><li><a href="actors.html#Divertors">Divertors</a></li></ul></li><li><a href="actors.html#Equilibrium-(5-actors)">Equilibrium (5 actors)</a></li><li class="no-marker"><ul><li><a href="actors.html#CHEASE">CHEASE</a></li><li><a href="actors.html#EGGO">EGGO</a></li><li><a href="actors.html#Equilibrium">Equilibrium</a></li><li><a href="actors.html#FRESCO">FRESCO</a></li><li><a href="actors.html#TEQUILA">TEQUILA</a></li></ul></li><li><a href="actors.html#Hcd-(5-actors)">Hcd (5 actors)</a></li><li class="no-marker"><ul><li><a href="actors.html#HCD">HCD</a></li><li><a href="actors.html#NeutralFueling">NeutralFueling</a></li><li><a href="actors.html#SimpleIC">SimpleIC</a></li><li><a href="actors.html#SimpleLH">SimpleLH</a></li><li><a href="actors.html#SimplePL">SimplePL</a></li></ul></li><li><a href="actors.html#Nuclear-(2-actors)">Nuclear (2 actors)</a></li><li class="no-marker"><ul><li><a href="actors.html#Blanket">Blanket</a></li><li><a href="actors.html#Neutronics">Neutronics</a></li></ul></li><li><a href="actors.html#Pedestal-(4-actors)">Pedestal (4 actors)</a></li><li class="no-marker"><ul><li><a href="actors.html#Pedestal">Pedestal</a></li><li><a href="actors.html#AnalyticPedestal">AnalyticPedestal</a></li><li><a href="actors.html#EPED">EPED</a></li><li><a href="actors.html#WPED">WPED</a></li></ul></li><li><a href="actors.html#Pf-(3-actors)">Pf (3 actors)</a></li><li class="no-marker"><ul><li><a href="actors.html#PFdesign">PFdesign</a></li><li><a href="actors.html#PFactive">PFactive</a></li><li><a href="actors.html#PassiveStructures">PassiveStructures</a></li></ul></li><li><a href="actors.html#Sol-(2-actors)">Sol (2 actors)</a></li><li class="no-marker"><ul><li><a href="actors.html#SOL">SOL</a></li><li><a href="actors.html#SOLBox">SOLBox</a></li></ul></li><li><a href="actors.html#Stability-(2-actors)">Stability (2 actors)</a></li><li class="no-marker"><ul><li><a href="actors.html#PlasmaLimits">PlasmaLimits</a></li><li><a href="actors.html#VerticalStability">VerticalStability</a></li></ul></li><li><a href="actors.html#Transport-(8-actors)">Transport (8 actors)</a></li><li class="no-marker"><ul><li><a href="actors.html#CoreTransport">CoreTransport</a></li><li><a href="actors.html#EPEDprofiles">EPEDprofiles</a></li><li><a href="actors.html#FluxCalculator">FluxCalculator</a></li><li><a href="actors.html#FluxMatcher">FluxMatcher</a></li><li><a href="actors.html#AnalyticTurbulence">AnalyticTurbulence</a></li><li><a href="actors.html#Neoclassical">Neoclassical</a></li><li><a href="actors.html#QLGYRO">QLGYRO</a></li><li><a href="actors.html#TGLF">TGLF</a></li></ul></li><li><a href="actors.html#Wall-loading-(2-actors)">Wall loading (2 actors)</a></li><li class="no-marker"><ul><li><a href="actors.html#CoreRadHeatFlux">CoreRadHeatFlux</a></li><li><a href="actors.html#ParticleHeatFlux">ParticleHeatFlux</a></li></ul></li></ul></li></ul><h2 id="Balance-plant-(3-actors)"><a class="docs-heading-anchor" href="#Balance-plant-(3-actors)">Balance plant (3 actors)</a><a id="Balance-plant-(3-actors)-1"></a><a class="docs-heading-anchor-permalink" href="#Balance-plant-(3-actors)" title="Permalink"></a></h2><h3 id="BalanceOfPlant"><a class="docs-heading-anchor" href="#BalanceOfPlant">BalanceOfPlant</a><a id="BalanceOfPlant-1"></a><a class="docs-heading-anchor-permalink" href="#BalanceOfPlant" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorBalanceOfPlant-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorBalanceOfPlant-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorBalanceOfPlant</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorBalanceOfPlant(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Orchestrates the complete balance of plant analysis by coordinating thermal plant efficiency calculations and electrical power needs assessment. Collects heat loads from various tokamak sources (blanket,  divertor, wall), calculates thermal power generation, estimates plant electrical consumption, and determines net electrical power output.</p><p><strong>Process flow</strong></p><ol><li>Collects heat sources from blanket thermal extraction, divertor incident power, and radiation losses</li><li>Runs thermal plant actor to calculate electrical power generation from heat loads</li><li>Runs power needs actor to calculate plant electrical consumption (HCD, cryogenics, etc.)</li><li>Provides framework for net power balance calculations</li></ol><p><strong>Key heat sources</strong></p><ul><li>Breeder blanket thermal extraction (<code>dd.blanket.module[].power_thermal_extracted</code>)</li><li>Divertor heat loads (<code>dd.divertors.divertor[].power_incident</code>)</li><li>Wall radiation losses (from <code>dd.core_sources</code>)</li></ul><p><strong>Key outputs (via sub-actors)</strong></p><ul><li>Thermal power generation and plant efficiency</li><li>Breakdown of electrical power consumption by subsystem</li><li>Data for net electrical power calculations</li></ul><div class="admonition is-info" id="Note-760f603aee40c4c7"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-760f603aee40c4c7" title="Permalink"></a></header><div class="admonition-body"><p>Stores data in <code>dd.balance_of_plant</code></p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/balance_plant/balance_of_plant_actor.jl#L15-L42">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorBalanceOfPlant</span>
</code></pre><h3 id="ThermalPlant"><a class="docs-heading-anchor" href="#ThermalPlant">ThermalPlant</a><a id="ThermalPlant-1"></a><a class="docs-heading-anchor-permalink" href="#ThermalPlant" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorThermalPlant-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorThermalPlant-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorThermalPlant</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorThermalPlant(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Calculates thermal plant efficiency and electrical power generation based on heat loads from the tokamak. Uses different models to convert thermal power from blanket, divertor, and wall heat loads into electrical power. Acts as a dispatcher to different thermal plant models based on the <code>model</code> parameter.</p><p><strong>Available models</strong></p><ul><li><code>:fixed_plant_efficiency</code>: Uses a constant overall efficiency factor</li><li><code>:surrogate</code>: Uses BalanceOfPlantSurrogate.jl for heat cycle efficiency calculations</li><li><code>:network</code>: Uses ThermalSystemModels.jl extension for detailed thermal modeling</li></ul><p><strong>Key inputs</strong></p><ul><li>Heat loads from blanket thermal extraction (<code>dd.blanket.module[].power_thermal_extracted</code>)</li><li>Divertor power incident (<code>dd.divertors.divertor[].power_incident</code>)  </li><li>Wall radiation losses (<code>dd.core_sources</code> radiation losses)</li></ul><p><strong>Key outputs</strong></p><ul><li>Plant thermal efficiency (<code>thermal_efficiency_plant</code>)</li><li>Total heat supplied to thermal cycle (<code>total_heat_supplied</code>)</li><li>Net electrical power generated (<code>power_electric_generated</code>)</li></ul><div class="admonition is-info" id="Note-760f603aee40c4c7"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-760f603aee40c4c7" title="Permalink"></a></header><div class="admonition-body"><p>Stores data in <code>dd.balance_of_plant</code></p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/balance_plant/thermal_plant_actor.jl#L34-L59">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorThermalPlant</span>
├─ <a href='act_details.html#act.ActorThermalPlant.model'>model</a>
├─ <a href='act_details.html#act.ActorThermalPlant.fixed_plant_efficiency'>fixed_plant_efficiency</a>
├─ <a href='act_details.html#act.ActorThermalPlant.do_plot'>do_plot</a>
└─ <a href='act_details.html#act.ActorThermalPlant.verbose'>verbose</a>
</code></pre><h3 id="PowerNeeds"><a class="docs-heading-anchor" href="#PowerNeeds">PowerNeeds</a><a id="PowerNeeds-1"></a><a class="docs-heading-anchor-permalink" href="#PowerNeeds" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorPowerNeeds-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorPowerNeeds-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorPowerNeeds</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorPowerNeeds(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Power needs actor that calculates the needed power to operate the plant</p><ul><li><code>model = :thermal_power_fraction</code> simply assumes that the power to balance a plant is a fraction of the gross electrical power generated by the thermal cycle.</li><li><code>model = :EU_DEMO</code> subdivides the power plant electrical needs to [:cryostat, :tritium_handling, :pumping] using  EU-DEMO numbers.</li><li><code>model = :FUSE</code> subdivides power plant needs into subsystems and calculates their power needs.</li></ul><div class="admonition is-info" id="Note-d2c195b94af66c05"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-d2c195b94af66c05" title="Permalink"></a></header><div class="admonition-body"><p>Stores data in <code>dd.balance_of_plant.power_electric_plant_operation</code></p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/balance_plant/power_needs_actor.jl#L20-L32">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorPowerNeeds</span>
├─ <a href='act_details.html#act.ActorPowerNeeds.model'>model</a>
├─ <a href='act_details.html#act.ActorPowerNeeds.thermal_power_fraction'>thermal_power_fraction</a>
└─ <a href='act_details.html#act.ActorPowerNeeds.do_plot'>do_plot</a>
</code></pre><h2 id="Build-(5-actors)"><a class="docs-heading-anchor" href="#Build-(5-actors)">Build (5 actors)</a><a id="Build-(5-actors)-1"></a><a class="docs-heading-anchor-permalink" href="#Build-(5-actors)" title="Permalink"></a></h2><h3 id="CXbuild"><a class="docs-heading-anchor" href="#CXbuild">CXbuild</a><a id="CXbuild-1"></a><a class="docs-heading-anchor-permalink" href="#CXbuild" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorCXbuild-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorCXbuild-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorCXbuild</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorCXbuild(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Generates 2D cross-sectional geometry of the tokamak build by converting the 1D radial build  layers into full poloidal cross-sections. Creates detailed outlines for all build layers, divertor regions, blanket segments, and maintenance ports based on equilibrium geometry and engineering requirements.</p><p><strong>Key functionality</strong></p><ul><li>Converts 1D radial build to 2D poloidal cross-sections with proper shaping</li><li>Generates first wall geometry from equilibrium boundary (or rebuilds if needed)</li><li>Creates divertor regions based on magnetic X-points and private flux regions  </li><li>Defines blanket segments on the low-field side</li><li>Generates maintenance port structures for plasma-facing component access</li></ul><p><strong>Geometry generation process</strong></p><ol><li>Establishes first wall from equilibrium boundary and strike point locations</li><li>Builds layer outlines from plasma outward using shape optimization</li><li>Handles layer-to-layer clearances and PF coil obstruction avoidance</li><li>Creates divertor slots and blanket regions based on physics constraints  </li><li>Adds maintenance port geometry for component access</li></ol><p><strong>Key outputs</strong></p><ul><li>2D layer outlines for all radial build components (<code>dd.build.layer[].outline</code>)</li><li>Divertor structure definitions (<code>dd.build.structure</code> for divertors)</li><li>Blanket structure segmentation for modular designs</li><li>Updated wall geometry with strike point information</li></ul><div class="admonition is-info" id="Note-82e3e1f3876a49d8"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-82e3e1f3876a49d8" title="Permalink"></a></header><div class="admonition-body"><p>Manipulates data in <code>dd.build</code></p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/build/cx_actor.jl#L35-L66">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorCXbuild</span>
├─ <a href='act_details.html#act.ActorCXbuild.rebuild_wall'>rebuild_wall</a>
├─ <a href='act_details.html#act.ActorCXbuild.layers_aware_of_pf_coils'>layers_aware_of_pf_coils</a>
├─ <a href='act_details.html#act.ActorCXbuild.divertor_hfs_size_fraction'>divertor_hfs_size_fraction</a>
├─ <a href='act_details.html#act.ActorCXbuild.divertor_lfs_size_fraction'>divertor_lfs_size_fraction</a>
├─ <a href='act_details.html#act.ActorCXbuild.n_points'>n_points</a>
└─ <a href='act_details.html#act.ActorCXbuild.do_plot'>do_plot</a>
</code></pre><h3 id="HFSsizing"><a class="docs-heading-anchor" href="#HFSsizing">HFSsizing</a><a id="HFSsizing-1"></a><a class="docs-heading-anchor-permalink" href="#HFSsizing" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorHFSsizing-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorHFSsizing-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorHFSsizing</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorHFSsizing(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Optimizes the High Field Side (HFS) radial build dimensions to satisfy engineering constraints and performance requirements. Uses metaheuristic optimization to find the optimal thicknesses and steel fractions for the center stack components (plug, OH coils, TF coils) while respecting stress limits, current density limits, magnetic field requirements, and flattop duration targets.</p><p><strong>Optimization variables</strong></p><ul><li>TF coil thickness (normalized to available space)  </li><li>OH coil thickness (normalized to available space)</li><li>OH steel fraction (within void fraction constraints)</li><li>TF steel fraction (within void fraction constraints)</li><li>TF nose thickness fraction (if not bucked configuration)</li></ul><p><strong>Engineering constraints</strong></p><ul><li>Critical current density limits for superconducting coils (TF and OH)</li><li>Mechanical stress limits (Von Mises stress vs yield strength) </li><li>Magnetic field requirements (achieve target B₀)</li><li>Flux swing capability for OH coil flattop duration</li></ul><p><strong>Key outputs</strong></p><ul><li>Optimized radial build dimensions (<code>dd.build.layer</code> thicknesses)</li><li>Updated technology parameters (steel fractions)</li><li>Stress analysis results via integrated ActorStresses</li><li>Flux swing analysis via integrated ActorFluxSwing</li></ul><div class="admonition is-info" id="Note-3335e4a5d750b9bc"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-3335e4a5d750b9bc" title="Permalink"></a></header><div class="admonition-body"><p>Manipulates radial build information in <code>dd.build.layer</code></p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/build/hfs_actor.jl#L19-L49">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorHFSsizing</span>
├─ <a href='act_details.html#act.ActorHFSsizing.error_on_technology'>error_on_technology</a>
├─ <a href='act_details.html#act.ActorHFSsizing.error_on_performance'>error_on_performance</a>
├─ <a href='act_details.html#act.ActorHFSsizing.do_plot'>do_plot</a>
└─ <a href='act_details.html#act.ActorHFSsizing.verbose'>verbose</a>
</code></pre><h3 id="FluxSwing"><a class="docs-heading-anchor" href="#FluxSwing">FluxSwing</a><a id="FluxSwing-1"></a><a class="docs-heading-anchor-permalink" href="#FluxSwing" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorFluxSwing-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorFluxSwing-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorFluxSwing</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorFluxSwing(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Analyzes OH coil flux swing capability and determines operating limits based on current density constraints and flattop duration requirements. Calculates flux consumption during different operational phases and determines maximum achievable flattop duration or required current levels.</p><p><strong>Operating modes (controlled by <code>operate_oh_at_j_crit</code>)</strong></p><ul><li><code>true</code>: Operates OH at critical current limit, calculates achievable flattop duration</li><li><code>false</code>: Uses required flattop duration, calculates needed currents (may exceed limits)</li></ul><p><strong>Flux consumption analysis</strong></p><ul><li><strong>Rampup flux</strong>: Estimated using Ejima coefficient and plasma inductance calculations</li><li><strong>Flattop flux</strong>: Based on resistive current drive requirements from Ohmic heating  </li><li><strong>PF flux</strong>: Vertical field contribution from poloidal field coils</li></ul><p><strong>Physics models</strong></p><ul><li>Plasma inductance (internal + external components) for flux estimation</li><li>Resistive flux consumption using conductivity profiles and current density</li><li>Vertical field requirements based on plasma geometry and pressure</li></ul><p><strong>Key outputs</strong></p><ul><li>OH flux swing components (<code>dd.build.flux_swing.rampup/flattop/pf</code>)</li><li>OH coil current and field limits (<code>dd.build.oh.max_j/max_b_field</code>)</li><li>TF coil current and field requirements (<code>dd.build.tf.max_j/max_b_field</code>)  </li><li>Achievable flattop duration (<code>dd.build.oh.flattop_duration</code>)</li></ul><div class="admonition is-info" id="Note-d53bdf84be19742f"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-d53bdf84be19742f" title="Permalink"></a></header><div class="admonition-body"><p>Stores data in <code>dd.build.flux_swing</code>, <code>dd.build.tf</code>, and <code>dd.build.oh</code></p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/build/fluxswing_actor.jl#L25-L55">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorFluxSwing</span>
└─ <a href='act_details.html#act.ActorFluxSwing.operate_oh_at_j_crit'>operate_oh_at_j_crit</a>
</code></pre><h3 id="LFSsizing"><a class="docs-heading-anchor" href="#LFSsizing">LFSsizing</a><a id="LFSsizing-1"></a><a class="docs-heading-anchor-permalink" href="#LFSsizing" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorLFSsizing-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorLFSsizing-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorLFSsizing</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorLFSsizing(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Optimizes the low-field-side (LFS) radial build layout for toroidal field ripple and maintenance requirements.</p><p>This actor determines the optimal position of the outer toroidal field (TF) coil leg by balancing:</p><ul><li><strong>TF ripple constraint</strong>: Ensures the TF coil outer radius provides acceptable magnetic field ripple</li><li><strong>Maintenance access</strong>: Accommodates vertical or horizontal maintenance port requirements  </li><li><strong>Geometric modularity</strong>: Accounts for toroidal and poloidal blanket sector arrangements</li></ul><p>Key calculations:</p><ul><li>Minimum TF leg radius for specified ripple tolerance using IMAS.R<em>tf</em>ripple()</li><li>Vacuum port geometry for blanket module removal (vertical_maintenance())  </li><li>Balance between ripple minimization and maintenance accessibility</li><li>Automatic radial build adjustment via vacuum gap resizing</li></ul><p>Maintenance schemes supported:</p><ul><li><strong>Vertical</strong>: Blanket sectors removed vertically through upper/lower ports</li><li><strong>Horizontal</strong>: Blanket sectors removed horizontally through side ports  </li><li><strong>None</strong>: No maintenance access constraints</li></ul><p>The actor modifies the first vacuum layer between vessel and plasma to accommodate  the required TF coil repositioning while maintaining geometric consistency.</p><div class="admonition is-info" id="Note-daaa4c02a43aef5f"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-daaa4c02a43aef5f" title="Permalink"></a></header><div class="admonition-body"><p>Reads and modifies radial build information in <code>dd.build.layer</code>, using TF coil specifications  from <code>dd.build.tf</code> (ripple tolerance, coil count)</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/build/lfs_actor.jl#L24-L52">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorLFSsizing</span>
├─ <a href='act_details.html#act.ActorLFSsizing.maintenance'>maintenance</a>
├─ <a href='act_details.html#act.ActorLFSsizing.tor_modularity'>tor_modularity</a>
├─ <a href='act_details.html#act.ActorLFSsizing.pol_modularity'>pol_modularity</a>
├─ <a href='act_details.html#act.ActorLFSsizing.do_plot'>do_plot</a>
└─ <a href='act_details.html#act.ActorLFSsizing.verbose'>verbose</a>
</code></pre><h3 id="Stresses"><a class="docs-heading-anchor" href="#Stresses">Stresses</a><a id="Stresses-1"></a><a class="docs-heading-anchor-permalink" href="#Stresses" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorStresses-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorStresses-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorStresses</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorStresses(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Calculates mechanical stresses in the tokamak center stack (TF coils, OH coils, and plug) using 1D analytical solutions based on Leuer&#39;s solid mechanics equations. Analyzes both scenarios with OH coils on and off to find the worst-case stress conditions for structural design.</p><p><strong>Physics approach</strong></p><ul><li>Uses 1D cylindrical stress analysis with hoop, radial, and axial stress components</li><li>Accounts for electromagnetic forces from TF and OH magnetic fields</li><li>Handles different boundary conditions (bucked vs free-standing coils)</li><li>Applies structural material fractions to calculate effective stresses</li></ul><p><strong>Key inputs</strong></p><ul><li>TF and OH coil geometry from radial build (<code>dd.build.layer</code>)</li><li>Magnetic field values (<code>dd.equilibrium.vacuum_toroidal_field.b0</code>, <code>dd.build.oh.max_b_field</code>)</li><li>Material properties and structural fractions (<code>dd.build.tf/oh.technology</code>)</li><li>Mechanical configuration flags (bucked, noslip, plug presence)</li></ul><p><strong>Key outputs</strong></p><ul><li>Radial stress profiles for TF, OH, and plug components</li><li>Hoop stress profiles for structural analysis</li><li>Axial stress estimates based on field configurations</li><li>Von Mises stress for failure analysis</li></ul><div class="admonition is-info" id="Note-f320a0e58ad12c42"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-f320a0e58ad12c42" title="Permalink"></a></header><div class="admonition-body"><p>Stores data in <code>dd.solid_mechanics</code></p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/build/stresses_actor.jl#L19-L47">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorStresses</span>
├─ <a href='act_details.html#act.ActorStresses.do_plot'>do_plot</a>
└─ <a href='act_details.html#act.ActorStresses.n_points'>n_points</a>
</code></pre><h2 id="Compound-(3-actors)"><a class="docs-heading-anchor" href="#Compound-(3-actors)">Compound (3 actors)</a><a id="Compound-(3-actors)-1"></a><a class="docs-heading-anchor-permalink" href="#Compound-(3-actors)" title="Permalink"></a></h2><h3 id="DynamicPlasma"><a class="docs-heading-anchor" href="#DynamicPlasma">DynamicPlasma</a><a id="DynamicPlasma-1"></a><a class="docs-heading-anchor-permalink" href="#DynamicPlasma" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorDynamicPlasma-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorDynamicPlasma-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorDynamicPlasma</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorDynamicPlasma(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Evolves plasma profiles forward in time using coupled physics models.</p><p>This compound actor advances the plasma state through time by coordinating multiple  physics models with proper temporal splitting and time step management. It handles  the complex coupling between transport, current evolution, heating, equilibrium,  and magnetic control systems.</p><p>Time integration strategy:</p><ul><li>Uses second-order accurate time-stepping with sub-cycling</li><li>Splits fast (equilibrium, PF) and slow (transport, pedestal) physics appropriately</li><li>Handles time-dependent boundary conditions from pulse schedule</li><li>Supports plasma current control via feedback systems</li></ul><p>Evolution workflow (each time step):</p><ol><li><strong>Phase 1</strong>: Current evolution and heating sources (δt steps)</li><li><strong>Phase 2</strong>: Pedestal and transport evolution (δt steps) </li><li><strong>Both phases</strong>: Sawteeth, equilibrium, and PF control (δt/2 sub-steps)</li></ol><p>Key features:</p><ul><li>Configurable evolution of individual physics components</li><li>Optional plasma current feedback control via loop voltage</li><li>Time derivative sources for energy and particle balance</li><li>Progress tracking and convergence monitoring</li><li>Automatic cleanup of post-simulation time data</li></ul><p>Physics models coordinated:</p><ul><li><strong>ActorCurrent</strong>: Current density diffusion and resistive evolution</li><li><strong>ActorHCD</strong>: Time-dependent heating and current drive</li><li><strong>ActorPedestal</strong>: Pedestal evolution and L-H transitions</li><li><strong>ActorCoreTransport</strong>: Transport flux evolution</li><li><strong>ActorSawteeth</strong>: Sawtooth instability cycling  </li><li><strong>ActorEquilibrium</strong>: MHD equilibrium with evolving profiles</li><li><strong>ActorPFactive</strong>: PF coil current control for plasma shape</li></ul><p>Control options:</p><ul><li><code>ip_controller</code>: Feedback control of plasma current via loop voltage</li><li>Individual physics component enable/disable switches</li><li>Configurable time step size and number of steps</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/compound/dynamic_plasma_actor.jl#L32-L73">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorDynamicPlasma</span>
├─ <a href='act_details.html#act.ActorDynamicPlasma.Δt'>Δt</a>  [s]
├─ <a href='act_details.html#act.ActorDynamicPlasma.Nt'>Nt</a>
├─ <a href='act_details.html#act.ActorDynamicPlasma.evolve_transport'>evolve_transport</a>
├─ <a href='act_details.html#act.ActorDynamicPlasma.evolve_pedestal'>evolve_pedestal</a>
├─ <a href='act_details.html#act.ActorDynamicPlasma.evolve_hcd'>evolve_hcd</a>
├─ <a href='act_details.html#act.ActorDynamicPlasma.evolve_current'>evolve_current</a>
├─ <a href='act_details.html#act.ActorDynamicPlasma.evolve_equilibrium'>evolve_equilibrium</a>
├─ <a href='act_details.html#act.ActorDynamicPlasma.evolve_pf_active'>evolve_pf_active</a>
├─ <a href='act_details.html#act.ActorDynamicPlasma.ip_controller'>ip_controller</a>
├─ <a href='act_details.html#act.ActorDynamicPlasma.time_derivatives_sources'>time_derivatives_sources</a>
└─ <a href='act_details.html#act.ActorDynamicPlasma.verbose'>verbose</a>
</code></pre><h3 id="StationaryPlasma"><a class="docs-heading-anchor" href="#StationaryPlasma">StationaryPlasma</a><a id="StationaryPlasma-1"></a><a class="docs-heading-anchor-permalink" href="#StationaryPlasma" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorStationaryPlasma-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorStationaryPlasma-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorStationaryPlasma</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorStationaryPlasma(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Iteratively solves for self-consistent stationary plasma equilibrium and transport.</p><p>This compound actor finds steady-state plasma solutions by iterating between plasma  physics models until convergence. It balances current drive, heating, transport,  and equilibrium to achieve a consistent stationary state.</p><p>Core iteration workflow:</p><ol><li><strong>Current Evolution</strong>: Updates current density from current drive and resistive diffusion</li><li><strong>Heating &amp; Current Drive</strong>: Calculates power deposition and driven current from external sources</li><li><strong>Pedestal</strong>: Determines edge boundary conditions and pedestal profiles</li><li><strong>Core Transport</strong>: Evolves temperature and density profiles based on transport fluxes</li><li><strong>Sawteeth</strong>: Applies sawtooth mixing to maintain realistic q-profiles</li><li><strong>Equilibrium</strong>: Solves MHD equilibrium with updated pressure and current profiles</li></ol><p>The iteration continues until the relative changes in current density and pressure  profiles fall below the convergence threshold. Each iteration updates the flux surface geometry based on the latest equilibrium solution.</p><p>Key convergence criteria:</p><ul><li>Relative change in current density profile (volume-averaged)</li><li>Relative change in pressure profile (volume-averaged) </li><li>Combined error must be below <code>convergence_error</code> threshold</li><li>Maximum iterations limit prevents infinite loops</li></ul><p>Actors coordinated:</p><ul><li><strong>ActorCurrent</strong>: Current density evolution (Ohmic + driven + bootstrap)</li><li><strong>ActorHCD</strong>: Heating and current drive power deposition  </li><li><strong>ActorPedestal</strong>: Edge pressure and temperature boundary conditions</li><li><strong>ActorCoreTransport</strong>: Core transport flux calculations</li><li><strong>ActorSawteeth</strong>: Sawtooth crash mixing and q-profile flattening</li><li><strong>ActorEquilibrium</strong>: MHD equilibrium solution with updated profiles</li></ul><div class="admonition is-info" id="Note-116f998c559cf393"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-116f998c559cf393" title="Permalink"></a></header><div class="admonition-body"><p>Stores converged plasma state in <code>dd.equilibrium</code>, <code>dd.core_profiles</code>,  <code>dd.core_sources</code>, <code>dd.core_transport</code></p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/compound/stationary_plasma_actor.jl#L24-L63">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorStationaryPlasma</span>
├─ <a href='act_details.html#act.ActorStationaryPlasma.max_iterations'>max_iterations</a>
├─ <a href='act_details.html#act.ActorStationaryPlasma.convergence_error'>convergence_error</a>
├─ <a href='act_details.html#act.ActorStationaryPlasma.do_plot'>do_plot</a>
└─ <a href='act_details.html#act.ActorStationaryPlasma.verbose'>verbose</a>
</code></pre><h3 id="WholeFacility"><a class="docs-heading-anchor" href="#WholeFacility">WholeFacility</a><a id="WholeFacility-1"></a><a class="docs-heading-anchor-permalink" href="#WholeFacility" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorWholeFacility-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorWholeFacility-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorWholeFacility</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorWholeFacility(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Integrates all physics, engineering, and economic models for complete tokamak facility design.</p><p>This compound actor orchestrates the full workflow for designing and analyzing a complete tokamak power plant. It coordinates plasma physics modeling with engineering design and economic optimization to provide a comprehensive facility assessment.</p><p>Execution workflow:</p><ol><li><strong>Plasma Design</strong>: Self-consistent plasma solutions with optimized PF coil positions</li><li><strong>Plasma Physics</strong>: Stationary plasma equilibrium with all transport and heating</li><li><strong>Engineering Design</strong>: Radial build optimization for all major tokamak systems</li><li><strong>Magnetic Systems</strong>: PF coil repositioning and passive structure analysis  </li><li><strong>Nuclear Analysis</strong>: Neutronics, blanket optimization, and tritium breeding</li><li><strong>Plasma-Facing Components</strong>: Divertor heat loads and thermal management</li><li><strong>Power Systems</strong>: Balance of plant and thermal-to-electric conversion</li><li><strong>Economics</strong>: Complete facility costing and economic analysis</li></ol><p>Key actors executed:</p><ul><li><strong>ActorStationaryPlasma</strong>: Converged plasma equilibrium and transport solution</li><li><strong>ActorPlasmaLimits</strong>: Operational stability limits and MHD analysis</li><li><strong>ActorHFSsizing</strong>: High-field-side radial build optimization (TF, OH, structural)</li><li><strong>ActorLFSsizing</strong>: Low-field-side TF leg design for ripple and maintenance</li><li><strong>ActorCXbuild</strong>: 2D cross-sectional geometry generation</li><li><strong>ActorFluxSwing</strong>: Flux swing analysis for plasma scenarios</li><li><strong>ActorStresses</strong>: Structural and electromagnetic stress analysis</li><li><strong>ActorPFdesign</strong>: PF coil system design and optimization</li><li><strong>ActorPFactive</strong>: PF current optimization for equilibrium control</li><li><strong>ActorPassiveStructures</strong>: Passive conductor modeling</li><li><strong>ActorNeutronics</strong>: Neutron flux and nuclear heating analysis</li><li><strong>ActorBlanket</strong>: Tritium breeding blanket optimization</li><li><strong>ActorDivertors</strong>: Divertor heat flux and cooling analysis</li><li><strong>ActorBalanceOfPlant</strong>: Power conversion and auxiliary systems</li><li><strong>ActorCosting</strong>: Economic analysis and cost optimization</li></ul><p>The actor handles complex interdependencies between systems, such as re-optimizing the PF coil layout after radial build changes and updating the first wall geometry based on the final equilibrium solution.</p><div class="admonition is-info" id="Note-bb0504684f2386a"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-bb0504684f2386a" title="Permalink"></a></header><div class="admonition-body"><p>Stores comprehensive facility design data across all <code>dd</code> structures</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/compound/whole_facility_actor.jl#L31-L74">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorWholeFacility</span>
├─ <a href='act_details.html#act.ActorWholeFacility.update_plasma'>update_plasma</a>
└─ <a href='act_details.html#act.ActorWholeFacility.update_build'>update_build</a>
</code></pre><h2 id="Control-(1-actors)"><a class="docs-heading-anchor" href="#Control-(1-actors)">Control (1 actors)</a><a id="Control-(1-actors)-1"></a><a class="docs-heading-anchor-permalink" href="#Control-(1-actors)" title="Permalink"></a></h2><h3 id="ControllerIp"><a class="docs-heading-anchor" href="#ControllerIp">ControllerIp</a><a id="ControllerIp-1"></a><a class="docs-heading-anchor-permalink" href="#ControllerIp" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorControllerIp-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorControllerIp-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorControllerIp</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorControllerIp(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Controls the loop voltage Vloop to obtain the target plasma cuurent Ip pulse_schedule</p><p>Algorithm names that have &quot;PID&quot; in their name will be considered linear and operate on <code>dd.controllers.linear_controller</code> otherwise <code>dd.controllers.nonlinear_controller</code></p><div class="admonition is-info" id="Note-a71a34bbb0401ef1"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-a71a34bbb0401ef1" title="Permalink"></a></header><div class="admonition-body"><p>External controllers can be defined by dispatching on the controllers__linear<em>controller functors (note, yes &quot;PID&quot; in the control</em>algorithm)</p><pre><code class="nohighlight hljs">function (controller::IMAS.controllers__linear_controller{T})(control_name::Val{:ip}, control_algorithm::Val{:my_PID}, setpoint::T, value::T, time0::Float64) where {T&lt;:Real}
    ...
end</code></pre><p>or controllers__nonlinear<em>controller functors (note, no &quot;PID&quot; in the control</em>algorithm)</p><pre><code class="nohighlight hljs">function (controller::IMAS.controllers__nonlinear_controller{T})(control_name::Val{:ip}, control_algorithm::Val{:my_MPC}, setpoint::T, value::T, time0::Float64) where {T&lt;:Real}
    ...
end</code></pre></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/control/ip_control.jl#L21-L41">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorControllerIp</span>
├─ <a href='act_details.html#act.ActorControllerIp.algorithm'>algorithm</a>
├─ <a href='act_details.html#act.ActorControllerIp.P'>P</a>
├─ <a href='act_details.html#act.ActorControllerIp.I'>I</a>
├─ <a href='act_details.html#act.ActorControllerIp.D'>D</a>
└─ <a href='act_details.html#act.ActorControllerIp.Vloop_initial'>Vloop_initial</a>  [V]
</code></pre><h2 id="Costing-(3-actors)"><a class="docs-heading-anchor" href="#Costing-(3-actors)">Costing (3 actors)</a><a id="Costing-(3-actors)-1"></a><a class="docs-heading-anchor-permalink" href="#Costing-(3-actors)" title="Permalink"></a></h2><h3 id="Costing"><a class="docs-heading-anchor" href="#Costing">Costing</a><a id="Costing-1"></a><a class="docs-heading-anchor-permalink" href="#Costing" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorCosting-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorCosting-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorCosting</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorCosting(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Estimates the comprehensive cost of building, operating, and decommissioning a fusion power plant.</p><p>This actor provides a unified interface to different costing methodologies and handles:</p><ul><li>Direct capital costs for all major plant systems and components  </li><li>Operating and maintenance costs over the plant lifetime</li><li>Decommissioning costs at end-of-life</li><li>Economic parameters like inflation, learning rates, and financial factors</li></ul><p>Available costing models:</p><ul><li><code>:ARIES</code>: Based on ARIES tokamak reactor studies with detailed component breakdown</li><li><code>:Sheffield</code>: Based on Sheffield &amp; Milora generic magnetic fusion reactor methodology</li></ul><p>The actor creates a separate data structure with uncertainty propagation (Measurement types) to handle cost uncertainties, then transfers final results back to the main data structure. Key economic outputs include levelized cost of electricity (LCOE) and lifetime plant costs.</p><div class="admonition is-info" id="Note-9254f9c6a001f10"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-9254f9c6a001f10" title="Permalink"></a></header><div class="admonition-body"><p>Results are stored in <code>dd.costing</code> with detailed breakdown by system and subsystem</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/costing/costing_actor.jl#L34-L56">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorCosting</span>
├─ <a href='act_details.html#act.ActorCosting.model'>model</a>
├─ <a href='act_details.html#act.ActorCosting.construction_start_year'>construction_start_year</a>  [year]
├─ <a href='act_details.html#act.ActorCosting.future_inflation_rate'>future_inflation_rate</a>
├─ <a href='act_details.html#act.ActorCosting.plant_lifetime'>plant_lifetime</a>  [year]
├─ <a href='act_details.html#act.ActorCosting.availability'>availability</a>
├─ <a href='act_details.html#act.ActorCosting.production_increase'>production_increase</a>
└─ <a href='act_details.html#act.ActorCosting.learning_rate'>learning_rate</a>
</code></pre><h3 id="CostingARIES"><a class="docs-heading-anchor" href="#CostingARIES">CostingARIES</a><a id="CostingARIES-1"></a><a class="docs-heading-anchor-permalink" href="#CostingARIES" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorCostingARIES-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorCostingARIES-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorCostingARIES</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorCostingARIES(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Estimates fusion power plant costs using the ARIES (Advanced Reactor Innovation and Evaluation Study) methodology.</p><p>This costing model implements the detailed cost accounting framework developed for the ARIES tokamak reactor studies, as documented in UCSD-CER-13-01. The methodology provides component-level cost estimates with:</p><p><strong>Direct Capital Costs:</strong></p><ul><li>Tokamak systems: all build layers (TF, PF, OH coils, blanket, shields, vacuum vessel)</li><li>Heating and current drive: ECH, ICRF, LHCD, NBI systems scaled by power</li><li>Facility infrastructure: land, buildings, hot cells, heat transfer systems</li><li>Balance of plant: power conversion equipment, electrical systems, fuel handling</li></ul><p><strong>Operating Costs:</strong>  </p><ul><li>Tritium handling and fuel cycle operations</li><li>Maintenance and operations scaled to plant capacity</li><li>Component replacement (blanket modules based on lifetime parameters)</li></ul><p><strong>Decommissioning Costs:</strong></p><ul><li>End-of-life plant dismantling and waste management</li></ul><p><strong>Key Features:</strong></p><ul><li>Component-specific cost models based on material volumes and unit costs</li><li>Power-scaling relationships for heating and current drive systems  </li><li>Economic modeling with interest rates, escalation, and indirect costs</li><li>Detailed cost account structure matching ARIES studies</li><li>Uncertainty propagation through all cost calculations</li></ul><p>The model supports advanced tokamak designs with superconducting magnets and provides realistic cost estimates for commercial-scale fusion power plants.</p><div class="admonition is-info" id="Note-8338a257b75064d1"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-8338a257b75064d1" title="Permalink"></a></header><div class="admonition-body"><p>Results stored in <code>dd.costing</code> following ARIES cost account documentation (UCSD-CER-13-01)</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/costing/aries_costing_actor.jl#L24-L59">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorCostingARIES</span>
├─ <a href='act_details.html#act.ActorCostingARIES.land_space'>land_space</a>  [acres]
├─ <a href='act_details.html#act.ActorCostingARIES.building_volume'>building_volume</a>  [m³]
├─ <a href='act_details.html#act.ActorCostingARIES.interest_rate'>interest_rate</a>
├─ <a href='act_details.html#act.ActorCostingARIES.indirect_cost_rate'>indirect_cost_rate</a>
├─ <a href='act_details.html#act.ActorCostingARIES.escalation_fraction'>escalation_fraction</a>
└─ <a href='act_details.html#act.ActorCostingARIES.blanket_lifetime'>blanket_lifetime</a>  [year]
</code></pre><h3 id="CostingSheffield"><a class="docs-heading-anchor" href="#CostingSheffield">CostingSheffield</a><a id="CostingSheffield-1"></a><a class="docs-heading-anchor-permalink" href="#CostingSheffield" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorCostingSheffield-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorCostingSheffield-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorCostingSheffield</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorCostingSheffield(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Estimates fusion power plant costs using the Sheffield and Milora methodology from Fusion Science &amp; Technology 70 (2016).</p><p>This costing model provides a comprehensive economic analysis based on the &quot;Generic magnetic fusion reactor revisited&quot;  study, adapted for tokamak reactor designs. The methodology covers:</p><p><strong>Direct Capital Costs:</strong></p><ul><li>Tokamak systems: TF coils, shields, structure, blanket, divertor, auxiliary power systems</li><li>Balance of plant: heat transfer systems, power conversion, electrical systems</li><li>Facility costs: buildings, site preparation, infrastructure</li></ul><p><strong>Operating Costs:</strong></p><ul><li>Fuel cycle costs including blanket and divertor replacement based on fluence limits</li><li>Maintenance and operations scaled to plant electrical capacity</li><li>Auxiliary power system operating costs</li></ul><p><strong>Key Features:</strong></p><ul><li>Accounts for component replacement schedules based on neutron/thermal fluence</li><li>Includes cost escalation and construction financing effects</li><li>Provides detailed cost breakdown by system and subsystem</li><li>Calculates levelized cost of electricity (LCOE)</li></ul><p>The model uses scaling relationships derived from fusion power plant studies and incorporates realistic assumptions about component lifetimes, availability, and economic parameters.</p><div class="admonition is-info" id="Note-bd9239a2b1136181"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-bd9239a2b1136181" title="Permalink"></a></header><div class="admonition-body"><p>Results are stored in <code>dd.costing</code> with costs referenced to Sheffield &amp; Milora (2016)</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/costing/sheffield_costing_actor.jl#L24-L54">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorCostingSheffield</span>
├─ <a href='act_details.html#act.ActorCostingSheffield.construction_lead_time'>construction_lead_time</a>  [year]
├─ <a href='act_details.html#act.ActorCostingSheffield.fixed_charge_rate'>fixed_charge_rate</a>
├─ <a href='act_details.html#act.ActorCostingSheffield.capitalize_blanket'>capitalize_blanket</a>
├─ <a href='act_details.html#act.ActorCostingSheffield.capitalize_divertor'>capitalize_divertor</a>
├─ <a href='act_details.html#act.ActorCostingSheffield.divertor_fluence_lifetime'>divertor_fluence_lifetime</a>  [MW*yr/m²]
└─ <a href='act_details.html#act.ActorCostingSheffield.blanket_fluence_lifetime'>blanket_fluence_lifetime</a>  [MW*yr/m²]
</code></pre><h2 id="Current-(3-actors)"><a class="docs-heading-anchor" href="#Current-(3-actors)">Current (3 actors)</a><a id="Current-(3-actors)-1"></a><a class="docs-heading-anchor-permalink" href="#Current-(3-actors)" title="Permalink"></a></h2><h3 id="Current"><a class="docs-heading-anchor" href="#Current">Current</a><a id="Current-1"></a><a class="docs-heading-anchor-permalink" href="#Current" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorCurrent-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorCurrent-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorCurrent</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorCurrent(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Provides a unified interface for current evolution using different current diffusion models.</p><p>This actor serves as a dispatcher for various current evolution methods including:</p><ul><li><code>:SteadyStateCurrent</code>: Steady-state ohmic current with infinite relaxation time</li><li><code>:QED</code>: Time-dependent current diffusion with sawteeth and realistic time constants</li><li><code>:replay</code>: Replays current profiles from existing data</li><li><code>:none</code>: No current evolution (no operation)</li></ul><p>The actor manages the complete current evolution workflow including freezing of bootstrap and non-inductive currents during ohmic evolution, and updating all derived current quantities.</p><p>Updates to the data structure:</p><ul><li><code>j_total</code>, <code>j_ohmic</code>, <code>j_tor</code> in <code>dd.core_profiles.profiles_1d[]</code></li><li><code>j_parallel</code> in <code>dd.equilibrium.time_slice[].profiles_1d</code></li><li>Bootstrap and ohmic parallel current/heating sources in <code>dd.core_sources</code></li></ul><div class="admonition is-info" id="Note-85c3c756f2d2be8c"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-85c3c756f2d2be8c" title="Permalink"></a></header><div class="admonition-body"><p>The fundamental quantitiy being solved is <code>j_total</code> in <code>dd.core_profiles.profiles_1d[]</code></p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/current/current_actor.jl#L18-L40">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorCurrent</span>
├─ <a href='act_details.html#act.ActorCurrent.model'>model</a>
├─ <a href='act_details.html#act.ActorCurrent.ip_from'>ip_from</a>
└─ <a href='act_details.html#act.ActorCurrent.vloop_from'>vloop_from</a>
</code></pre><h3 id="QED"><a class="docs-heading-anchor" href="#QED">QED</a><a id="QED-1"></a><a class="docs-heading-anchor-permalink" href="#QED" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorQED-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorQED-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorQED</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorQED(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Evolves plasma current using the QED (quasi-steady-state equilibrium diffusion) solver for realistic current diffusion.</p><p>This actor provides time-dependent current evolution with proper physics including:</p><ul><li>Finite current diffusion time constants based on plasma resistivity</li><li>Sawtooth reconnection events that flatten current profiles inside q=1</li><li>Non-inductive current drive from external sources</li><li>Ability to solve for either specified plasma current or loop voltage</li></ul><p>Key capabilities:</p><ul><li>Time-dependent evolution: finite time steps with realistic diffusion</li><li>Steady-state solution: infinite time limit with equilibrium current distribution  </li><li>Current or voltage control: can target either Ip or Vloop</li><li>Sawtooth modeling: automatic current profile flattening to maintain q≥1</li></ul><p>The QED solver uses finite element methods on flux coordinates and can handle complex current drive scenarios including bootstrap current, ECCD, NBCD, and other sources.</p><div class="admonition is-info" id="Note-137d4bd390a733ce"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-137d4bd390a733ce" title="Permalink"></a></header><div class="admonition-body"><p>This actor operates at <code>dd.global_time</code>. Time advancement must be done externally:</p><pre><code class="nohighlight hljs">IMAS.new_timeslice!(dd, dd.global_time + Δt)
dd.global_time += Δt
ActorQED(dd, act)</code></pre></div></div><div class="admonition is-info" id="Note-85c3c756f2d2be8c"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-85c3c756f2d2be8c" title="Permalink"></a></header><div class="admonition-body"><p>The fundamental quantitiy being solved is <code>j_total</code> in <code>dd.core_profiles.profiles_1d[]</code></p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/current/qed_actor.jl#L24-L55">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorQED</span>
├─ <a href='act_details.html#act.ActorQED.Δt'>Δt</a>  [s]
├─ <a href='act_details.html#act.ActorQED.Nt'>Nt</a>
├─ <a href='act_details.html#act.ActorQED.solve_for'>solve_for</a>
├─ <a href='act_details.html#act.ActorQED.qmin_desired'>qmin_desired</a>
├─ <a href='act_details.html#act.ActorQED.ip_from'>ip_from</a>
└─ <a href='act_details.html#act.ActorQED.vloop_from'>vloop_from</a>
</code></pre><h3 id="SteadyStateCurrent"><a class="docs-heading-anchor" href="#SteadyStateCurrent">SteadyStateCurrent</a><a id="SteadyStateCurrent-1"></a><a class="docs-heading-anchor-permalink" href="#SteadyStateCurrent" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorSteadyStateCurrent-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorSteadyStateCurrent-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorSteadyStateCurrent</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorSteadyStateCurrent(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Computes the steady-state ohmic current distribution using plasma conductivity and target plasma current.</p><p>This actor solves for the equilibrium current distribution assuming infinite current diffusion time, where the current profile is determined by the balance between ohmic heating and resistive dissipation. The solution uses the conductivity profile from <code>dd.core_profiles</code> and can either target a specific plasma current or allow floating current based on non-inductive drive.</p><p>Key features:</p><ul><li>Computes steady-state ohmic current profile using plasma conductivity</li><li>Supports current relaxation with adjustable radial extent</li><li>Can float plasma current when non-inductive fraction exceeds 100%</li><li>Updates <code>j_total</code> by combining ohmic and non-inductive current components</li></ul><div class="admonition is-info" id="Note-85c3c756f2d2be8c"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-85c3c756f2d2be8c" title="Permalink"></a></header><div class="admonition-body"><p>The fundamental quantitiy being solved is <code>j_total</code> in <code>dd.core_profiles.profiles_1d[]</code></p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/current/steadycurrent_actor.jl#L26-L45">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorSteadyStateCurrent</span>
├─ <a href='act_details.html#act.ActorSteadyStateCurrent.allow_floating_plasma_current'>allow_floating_plasma_current</a>
├─ <a href='act_details.html#act.ActorSteadyStateCurrent.current_relaxation_radius'>current_relaxation_radius</a>
└─ <a href='act_details.html#act.ActorSteadyStateCurrent.ip_from'>ip_from</a>
</code></pre><h2 id="Diagnostics-(1-actors)"><a class="docs-heading-anchor" href="#Diagnostics-(1-actors)">Diagnostics (1 actors)</a><a id="Diagnostics-(1-actors)-1"></a><a class="docs-heading-anchor-permalink" href="#Diagnostics-(1-actors)" title="Permalink"></a></h2><h3 id="FitProfiles"><a class="docs-heading-anchor" href="#FitProfiles">FitProfiles</a><a id="FitProfiles-1"></a><a class="docs-heading-anchor-permalink" href="#FitProfiles" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorFitProfiles-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorFitProfiles-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorFitProfiles</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorFitProfiles(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Fits experimental diagnostic data from Thomson scattering and charge exchange recombination spectroscopy to create smooth plasma profiles.</p><p>This actor performs several key operations:</p><ul><li>Identifies and removes outliers from raw diagnostic data using adaptive algorithms</li><li>Time-averages diagnostic measurements within specified windows</li><li>Fits electron temperature (Te), electron density (ne), ion temperature (Ti), and ion density profiles</li><li>Optionally scales Thomson scattering density based on interferometer measurements</li><li>Enforces quasi-neutrality and provides smooth, consistent profiles on a common radial grid</li></ul><p>The resulting fitted profiles are stored in <code>dd.core_profiles.profiles_1d[]</code> and provide the foundation for physics modeling.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/diagnostics/fits_actor.jl#L25-L39">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorFitProfiles</span>
├─ <a href='act_details.html#act.ActorFitProfiles.time_averaging'>time_averaging</a>  [s]
├─ <a href='act_details.html#act.ActorFitProfiles.rho_averaging'>rho_averaging</a>
├─ <a href='act_details.html#act.ActorFitProfiles.rho_grid'>rho_grid</a>
├─ <a href='act_details.html#act.ActorFitProfiles.time_basis_ids'>time_basis_ids</a>
└─ <a href='act_details.html#act.ActorFitProfiles.use_interferometer'>use_interferometer</a>
</code></pre><h2 id="Divertors-(1-actors)"><a class="docs-heading-anchor" href="#Divertors-(1-actors)">Divertors (1 actors)</a><a id="Divertors-(1-actors)-1"></a><a class="docs-heading-anchor-permalink" href="#Divertors-(1-actors)" title="Permalink"></a></h2><h3 id="Divertors"><a class="docs-heading-anchor" href="#Divertors">Divertors</a><a id="Divertors-1"></a><a class="docs-heading-anchor-permalink" href="#Divertors" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorDivertors-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorDivertors-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorDivertors</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorDivertors(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Calculates divertor heat fluxes and power loads using reduced SOL transport models.</p><p>The actor evaluates the heat and particle fluxes striking divertor targets by tracing  power flow from the main plasma through the scrape-off layer (SOL) to the material  surfaces. It uses simplified two-point models calibrated for divertor physics.</p><p>Key physics modeled:</p><ul><li>Power flow from separatrix through SOL to divertor targets</li><li>Heat flux spreading due to field line divergence and cross-field transport  </li><li>Strike point geometry and magnetic field angle effects</li><li>Material surface heat loads and wetted area calculations</li></ul><p>Heat flux models available:</p><ul><li><code>:lengyel</code>: Simple exponential decay model with flux expansion</li><li><code>:stangeby</code>: More sophisticated model including impurity effects</li></ul><p>Analysis workflow:</p><ol><li><strong>SOL Geometry</strong>: Identifies strike surfaces and field line connections</li><li><strong>Power Balance</strong>: Calculates SOL power from core sources minus radiation</li><li><strong>SOL Width</strong>: Estimates λq (heat flux width) at outer midplane using Eich scaling</li><li><strong>Field Line Mapping</strong>: Traces flux expansion from midplane to targets</li><li><strong>Heat Flux Calculation</strong>: Applies model-specific physics for target fluxes</li><li><strong>Surface Integration</strong>: Calculates total power loads and peak heat fluxes</li></ol><p>Key outputs:</p><ul><li>Peak heat flux on each divertor target surface (W/m²)</li><li>Total incident power on each target (W)  </li><li>Wetted area and flux expansion factors</li><li>Strike angles and field line geometry parameters</li><li>Thermal power extraction efficiency for cooling systems</li></ul><p>Model parameters:</p><ul><li><code>heat_spread_factor</code>: Additional flux spreading in private regions</li><li><code>impurities</code>: Impurity species concentrations affecting radiation</li><li><code>thermal_power_extraction_efficiency</code>: Cooling system effectiveness</li></ul><div class="admonition is-info" id="Note-a2cf795e82ed8b32"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-a2cf795e82ed8b32" title="Permalink"></a></header><div class="admonition-body"><p>Stores detailed heat flux analysis in <code>dd.divertors</code> including peak fluxes, total power loads, target geometry, and cooling system requirements</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/divertors/divertors_actor.jl#L21-L64">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorDivertors</span>
├─ <a href='act_details.html#act.ActorDivertors.heat_flux_model'>heat_flux_model</a>
├─ <a href='act_details.html#act.ActorDivertors.impurities'>impurities</a>
├─ <a href='act_details.html#act.ActorDivertors.impurities_fraction'>impurities_fraction</a>
├─ <a href='act_details.html#act.ActorDivertors.heat_spread_factor'>heat_spread_factor</a>
├─ <a href='act_details.html#act.ActorDivertors.thermal_power_extraction_efficiency'>thermal_power_extraction_efficiency</a>
└─ <a href='act_details.html#act.ActorDivertors.verbose'>verbose</a>
</code></pre><h2 id="Equilibrium-(5-actors)"><a class="docs-heading-anchor" href="#Equilibrium-(5-actors)">Equilibrium (5 actors)</a><a id="Equilibrium-(5-actors)-1"></a><a class="docs-heading-anchor-permalink" href="#Equilibrium-(5-actors)" title="Permalink"></a></h2><h3 id="CHEASE"><a class="docs-heading-anchor" href="#CHEASE">CHEASE</a><a id="CHEASE-1"></a><a class="docs-heading-anchor-permalink" href="#CHEASE" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorCHEASE-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorCHEASE-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorCHEASE</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorCHEASE(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Runs the CHEASE fixed-boundary equilibrium solver to compute a 2D equilibrium from the plasma boundary, pressure profile, and current density profile. The solver takes the R-Z boundary coordinates from the plasma time slice, extracts pressure and j<em>tor from profiles</em>1d, and generates a full 2D equilibrium solution including flux surfaces and safety factor profiles.</p><p>Optionally converts the fixed-boundary solution to a free-boundary equilibrium by using VacuumFields.jl to find PF coil currents that reproduce the same plasma shape and flux surfaces.</p><p><strong>Key inputs (from dd.equilibrium.time_slice[])</strong></p><ul><li>Boundary outline (r, z coordinates)</li><li>Pressure profile on normalized flux surfaces</li><li>Current density profile j_tor</li><li>Global quantities (plasma current, magnetic axis location)</li></ul><p><strong>Key outputs</strong></p><ul><li>Complete 2D equilibrium solution via gEQDSK format conversion to IMAS</li><li>Optional free-boundary PF coil currents (if <code>free_boundary=true</code>)</li><li>Updated flux surface geometry and safety factor profiles</li></ul><div class="admonition is-info" id="Note-1dc00366169d3c55"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-1dc00366169d3c55" title="Permalink"></a></header><div class="admonition-body"><p>Stores data in <code>dd.equilibrium</code></p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/equilibrium/chease_actor.jl#L20-L45">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorCHEASE</span>
├─ <a href='act_details.html#act.ActorCHEASE.free_boundary'>free_boundary</a>
├─ <a href='act_details.html#act.ActorCHEASE.clear_workdir'>clear_workdir</a>
└─ <a href='act_details.html#act.ActorCHEASE.rescale_eq_to_ip'>rescale_eq_to_ip</a>
</code></pre><h3 id="EGGO"><a class="docs-heading-anchor" href="#EGGO">EGGO</a><a id="EGGO-1"></a><a class="docs-heading-anchor-permalink" href="#EGGO" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorEGGO-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorEGGO-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorEGGO</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorEGGO(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Solves free-boundary tokamak MHD equilibria using the EGGO machine learning-based equilibrium reconstruction code.</p><p>EGGO (Equilibrium Grad-Shafranov Green&#39;s-function Optimizer) uses neural networks trained on experimental  equilibrium databases to rapidly predict tokamak equilibria from plasma shape and profile constraints.</p><p>Key features:</p><ul><li><strong>Neural network prediction</strong>: Fast equilibrium reconstruction using pre-trained models from experimental data</li><li><strong>Free-boundary capability</strong>: Includes external coil system effects and realistic machine constraints  </li><li><strong>Profile fitting</strong>: Automatically fits pressure and current profiles using basis function decomposition</li><li><strong>Boundary adaptation</strong>: Accepts arbitrary plasma boundary shapes with configurable resolution</li><li><strong>Temporal averaging</strong>: Optional smoothing over multiple time slices for enhanced stability</li></ul><p>Machine learning approach:</p><ul><li><strong>Training data</strong>: Models trained on extensive experimental equilibrium databases (D3D, JET, etc.)</li><li><strong>Input features</strong>: Plasma boundary points, basis-fitted pressure/current profiles, plasma current</li><li><strong>Output</strong>: Complete equilibrium reconstruction including ψ(R,Z), geometric parameters, and profiles</li><li><strong>Green&#39;s functions</strong>: Uses precomputed vacuum field response for computational efficiency</li></ul><p>Workflow:</p><ol><li><strong>Profile preparation</strong>: Fits p&#39;(ψ) and ff&#39;(ψ) profiles to basis functions  </li><li><strong>Boundary processing</strong>: Decimates and processes plasma boundary points</li><li><strong>Neural prediction</strong>: Generates equilibrium using trained ML model</li><li><strong>Post-processing</strong>: Extracts flux surfaces, magnetic axis, and geometric parameters</li><li><strong>Temporal smoothing</strong>: Optional averaging with previous time slices for robustness</li></ol><p>The ML approach provides orders-of-magnitude speedup compared to traditional equilibrium solvers while maintaining good accuracy for scenarios within the training data domain.</p><div class="admonition is-info" id="Note-ff2607b35bf3f99d"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-ff2607b35bf3f99d" title="Permalink"></a></header><div class="admonition-body"><p>Reads pressure/current profiles from <code>dd.equilibrium.profiles_1d</code>, plasma boundary from <code>dd.pulse_schedule.position_control</code>, and wall geometry from <code>dd.wall</code>.  Updates <code>dd.equilibrium</code> with ML-predicted equilibrium solution.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/equilibrium/eggo_actor.jl#L32-L68">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorEGGO</span>
├─ <a href='act_details.html#act.ActorEGGO.model'>model</a>
├─ <a href='act_details.html#act.ActorEGGO.use_vacuumfield_green'>use_vacuumfield_green</a>
├─ <a href='act_details.html#act.ActorEGGO.decimate_boundary'>decimate_boundary</a>
├─ <a href='act_details.html#act.ActorEGGO.timeslice_average'>timeslice_average</a>
├─ <a href='act_details.html#act.ActorEGGO.do_plot'>do_plot</a>
└─ <a href='act_details.html#act.ActorEGGO.debug'>debug</a>
</code></pre><h3 id="Equilibrium"><a class="docs-heading-anchor" href="#Equilibrium">Equilibrium</a><a id="Equilibrium-1"></a><a class="docs-heading-anchor-permalink" href="#Equilibrium" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorEquilibrium-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorEquilibrium-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorEquilibrium</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorEquilibrium(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Unified interface for tokamak MHD equilibrium solvers with automatic data preparation and postprocessing.</p><p>This compound actor coordinates different equilibrium solver codes through a single interface, handling data flow preparation and postprocessing while allowing flexible solver selection.</p><p>Supported equilibrium solvers:</p><ul><li><strong>TEQUILA</strong>: Fixed-boundary equilibrium solver</li><li><strong>FRESCO</strong>: Free-boundary rectangular grid Grad-Shafranov solver  </li><li><strong>EGGO</strong>: Machine learning-based free-boundary equilibrium reconstruction</li><li><strong>CHEASE</strong>: External fixed-boundary equilibrium solver</li><li><strong>Replay</strong>: Use equilibrium data from experimental or simulation archives</li></ul><p>Key features:</p><ul><li><strong>Automatic data preparation</strong>: Extracts pressure/current profiles, boundary shape, and control targets</li><li><strong>Flexible profile sources</strong>: Can use profiles from core_profiles (self-consistent) or equilibrium (re-solve)</li><li><strong>Control integration</strong>: Uses pulse<em>schedule position</em>control for boundary and X-point targets</li><li><strong>Geometric postprocessing</strong>: Adds flux surfaces, symmetrization, and consistency checks</li><li><strong>Error handling</strong>: Comprehensive error reporting with diagnostic plots</li></ul><p>Data flow control:</p><ul><li>Profile sources: core_profiles (default) or equilibrium  </li><li>Scalar sources: pulse<em>schedule, core</em>profiles, or equilibrium</li><li>Automatic zero-gradient boundary conditions on axis</li><li>Geometric factors preservation across iterations</li></ul><p>The actor handles the complete equilibrium workflow: data extraction → solver execution →  flux surface reconstruction → validation and visualization.</p><div class="admonition is-info" id="Note-e9f8daac07dfbec6"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-e9f8daac07dfbec6" title="Permalink"></a></header><div class="admonition-body"><p>Reads from <code>dd.core_profiles</code>, <code>dd.pulse_schedule.position_control</code>, and optionally <code>dd.wall</code>,  <code>dd.pf_active</code>. Updates <code>dd.equilibrium</code> with the solved MHD equilibrium.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/equilibrium/equilibrium_actor.jl#L23-L58">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorEquilibrium</span>
├─ <a href='act_details.html#act.ActorEquilibrium.model'>model</a>
├─ <a href='act_details.html#act.ActorEquilibrium.symmetrize'>symmetrize</a>
├─ <a href='act_details.html#act.ActorEquilibrium.j_p_from'>j_p_from</a>
├─ <a href='act_details.html#act.ActorEquilibrium.ip_from'>ip_from</a>
├─ <a href='act_details.html#act.ActorEquilibrium.vacuum_r0_b0_from'>vacuum_r0_b0_from</a>
└─ <a href='act_details.html#act.ActorEquilibrium.do_plot'>do_plot</a>
</code></pre><h3 id="FRESCO"><a class="docs-heading-anchor" href="#FRESCO">FRESCO</a><a id="FRESCO-1"></a><a class="docs-heading-anchor-permalink" href="#FRESCO" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorFRESCO-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorFRESCO-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorFRESCO</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorFRESCO(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Solves the tokamak MHD equilibrium using the FRESCO free-boundary equilibrium solver.</p><p>FRESCO (Free-boundary Reactor Equilibrium Solver for Comprehensive Optimization) solves the Grad-Shafranov equation for toroidal plasma equilibria with specified pressure and current profiles.</p><p>This actor performs:</p><ul><li>Free-boundary equilibrium reconstruction using pressure and current profiles from core_profiles</li><li>Iterative solution of the Grad-Shafranov equation on a rectangular R-Z grid</li><li>Vertical control options (vertical position, shape control, or magnetics-based)</li><li>Updates to poloidal field coil currents for force balance</li><li>Conversion of equilibrium solution back to IMAS equilibrium format</li></ul><p>The solver supports:</p><ul><li>Configurable grid resolution (nR × nZ)</li><li>Multiple control algorithms for vertical stability</li><li>Active X-point specification</li><li>Green&#39;s function table reuse for computational efficiency</li><li>Relaxation and tolerance control for convergence</li></ul><div class="admonition is-info" id="Note-2965dd499d0b981c"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-2965dd499d0b981c" title="Permalink"></a></header><div class="admonition-body"><p>Reads data from <code>dd.equilibrium</code>, <code>dd.core_profiles</code>, <code>dd.pf_active</code>, and <code>dd.wall</code>, and updates <code>dd.equilibrium</code> and <code>dd.pf_active</code> with the solved equilibrium</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/equilibrium/fresco_actor.jl#L28-L56">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorFRESCO</span>
├─ <a href='act_details.html#act.ActorFRESCO.control'>control</a>
├─ <a href='act_details.html#act.ActorFRESCO.number_of_iterations'>number_of_iterations</a>
├─ <a href='act_details.html#act.ActorFRESCO.relax'>relax</a>
├─ <a href='act_details.html#act.ActorFRESCO.tolerance'>tolerance</a>
├─ <a href='act_details.html#act.ActorFRESCO.fixed_grid'>fixed_grid</a>
├─ <a href='act_details.html#act.ActorFRESCO.nR'>nR</a>
├─ <a href='act_details.html#act.ActorFRESCO.nZ'>nZ</a>
├─ <a href='act_details.html#act.ActorFRESCO.do_plot'>do_plot</a>
└─ <a href='act_details.html#act.ActorFRESCO.debug'>debug</a>
</code></pre><h3 id="TEQUILA"><a class="docs-heading-anchor" href="#TEQUILA">TEQUILA</a><a id="TEQUILA-1"></a><a class="docs-heading-anchor-permalink" href="#TEQUILA" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorTEQUILA-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorTEQUILA-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorTEQUILA</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorTEQUILA(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Solves tokamak MHD equilibria using the TEQUILA fixed-boundary equilibrium solver with MXH flux surface representation.</p><p>TEQUILA is a fixed-boundary equilibrium solver that uses cubic-Hermite finite elements in the radial direction, Fourier modes in the poloidal angle, and a Miller extended harmonic (MXH) flux-surface parametrization [Arbon 2021]. MXH provides an efficient representation of flux surfaces.</p><p>Key features:</p><ul><li><strong>MXH flux surface parametrization</strong>: Spectral representation using R₀(ρ), Z₀(ρ), ε(ρ), κ(ρ) and Fourier harmonics</li><li><strong>Free-boundary conversion</strong>: Solves with external coil currents and control constraints via VacuumFields.jl</li><li><strong>Adaptive grid refinement</strong>: Efficient spectral convergence with configurable Fourier mode resolution</li><li><strong>Control integration</strong>: Supports X-point, strike-point, and magnetic axis control with poloidal field coils</li><li><strong>Profile flexibility</strong>: Accepts pressure and current profiles on either poloidal or toroidal flux coordinates</li></ul><p>Solver workflow:</p><ol><li><strong>Fixed-boundary solve</strong>: Initial equilibrium with specified plasma boundary using TEQUILA core</li><li><strong>Free-boundary conversion</strong>: Couples plasma equilibrium with external coil system via Green&#39;s functions</li><li><strong>Control optimization</strong>: Adjusts coil currents to satisfy geometric and flux control targets</li><li><strong>Grid mapping</strong>: Converts spectral solution to rectangular R-Z grids for analysis</li></ol><p>Grid options:</p><ul><li><strong>Profile grids</strong>: :poloidal (√ψ<em>norm) or :toroidal (ρ</em>tor_norm) flux coordinate systems</li><li><strong>Spatial resolution</strong>: Configurable radial points (31 default) and Fourier modes (8 default)  </li><li><strong>Rectangular grid</strong>: Automatic sizing based on plasma geometry plus divertor margins</li></ul><div class="admonition is-info" id="Note-8932d6fe1bc22d4c"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-8932d6fe1bc22d4c" title="Permalink"></a></header><div class="admonition-body"><p>Reads pressure/current profiles from <code>dd.equilibrium.profiles_1d</code>, boundary shape from  <code>dd.pulse_schedule.position_control</code>, and PF coil setup from <code>dd.pf_active</code>.  Updates <code>dd.equilibrium</code> with solved equilibrium and coil currents.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/equilibrium/tequila_actor.jl#L33-L65">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorTEQUILA</span>
├─ <a href='act_details.html#act.ActorTEQUILA.free_boundary'>free_boundary</a>
├─ <a href='act_details.html#act.ActorTEQUILA.number_of_radial_grid_points'>number_of_radial_grid_points</a>
├─ <a href='act_details.html#act.ActorTEQUILA.number_of_fourier_modes'>number_of_fourier_modes</a>
├─ <a href='act_details.html#act.ActorTEQUILA.number_of_MXH_harmonics'>number_of_MXH_harmonics</a>
├─ <a href='act_details.html#act.ActorTEQUILA.number_of_iterations'>number_of_iterations</a>
├─ <a href='act_details.html#act.ActorTEQUILA.relax'>relax</a>
├─ <a href='act_details.html#act.ActorTEQUILA.tolerance'>tolerance</a>
├─ <a href='act_details.html#act.ActorTEQUILA.fixed_grid'>fixed_grid</a>
├─ <a href='act_details.html#act.ActorTEQUILA.R'>R</a>  [m]
├─ <a href='act_details.html#act.ActorTEQUILA.Z'>Z</a>  [m]
├─ <a href='act_details.html#act.ActorTEQUILA.do_plot'>do_plot</a>
└─ <a href='act_details.html#act.ActorTEQUILA.debug'>debug</a>
</code></pre><h2 id="Hcd-(5-actors)"><a class="docs-heading-anchor" href="#Hcd-(5-actors)">Hcd (5 actors)</a><a id="Hcd-(5-actors)-1"></a><a class="docs-heading-anchor-permalink" href="#Hcd-(5-actors)" title="Permalink"></a></h2><h3 id="HCD"><a class="docs-heading-anchor" href="#HCD">HCD</a><a id="HCD-1"></a><a class="docs-heading-anchor-permalink" href="#HCD" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorHCD-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorHCD-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorHCD</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorHCD(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Unified heating, current drive, and fueling system coordinator for all auxiliary power systems.</p><p>This compound actor orchestrates multiple heating and current drive subsystem actors through a  single interface, providing centralized control over all auxiliary power and particle sources.</p><p>Managed subsystems:</p><ul><li><strong>Electron Cyclotron (EC)</strong>: ECsimple, TORBEAM, or replay modes</li><li><strong>Ion Cyclotron (IC)</strong>: ICsimple or replay modes  </li><li><strong>Lower Hybrid (LH)</strong>: LHsimple or replay modes</li><li><strong>Neutral Beam Injection (NB)</strong>: NBsimple, RABBIT, or replay modes</li><li><strong>Pellet fueling</strong>: PLsimple or replay modes</li><li><strong>Neutral gas fueling</strong>: NEUCG model or replay modes</li></ul><p>Key features:</p><ul><li>Model selection switches for each subsystem (simple physics, advanced codes, replay, or off)</li><li>Automatic hardware setup and validation (launcher/antenna count consistency)</li><li>Sequential execution with proper dependencies (neutral fueling runs last)</li><li>Centralized source integration via IMAS.sources!() </li><li>Unified replay capability for all subsystems</li></ul><p>Execution order:</p><ol><li>EC heating/current drive</li><li>IC heating  </li><li>LH current drive</li><li>NB heating/current drive/momentum</li><li>Pellet particle sources</li><li>Neutral gas fueling (depends on energy confinement time from HCD)</li><li>Source integration and consistency checks</li></ol><div class="admonition is-info" id="Note-de6162e433e25205"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-de6162e433e25205" title="Permalink"></a></header><div class="admonition-body"><p>Reads from hardware descriptions (<code>dd.ec_launchers</code>, <code>dd.ic_antennas</code>, etc.) and  pulse schedules (<code>dd.pulse_schedule</code>), and coordinates updates to <code>dd.core_sources</code>, <code>dd.waves</code>, etc.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/hcd/hcd_actor.jl#L25-L61">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorHCD</span>
├─ <a href='act_details.html#act.ActorHCD.ec_model'>ec_model</a>
├─ <a href='act_details.html#act.ActorHCD.ic_model'>ic_model</a>
├─ <a href='act_details.html#act.ActorHCD.lh_model'>lh_model</a>
├─ <a href='act_details.html#act.ActorHCD.nb_model'>nb_model</a>
├─ <a href='act_details.html#act.ActorHCD.pellet_model'>pellet_model</a>
└─ <a href='act_details.html#act.ActorHCD.neutral_model'>neutral_model</a>
</code></pre><h3 id="NeutralFueling"><a class="docs-heading-anchor" href="#NeutralFueling">NeutralFueling</a><a id="NeutralFueling-1"></a><a class="docs-heading-anchor-permalink" href="#NeutralFueling" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorNeutralFueling-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorNeutralFueling-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorNeutralFueling</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorNeutralFueling(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Calculates neutral gas fueling particle source using the neucg model for wall recycling.</p><p>This actor models neutral atom transport and ionization in the plasma edge/scrape-off-layer using  the neucg algorithm from Burrell (Journal of Computational Physics 27.1, 1978: 88-102).</p><p>The model computes:</p><ul><li>Neutral density profiles accounting for ionization and charge exchange</li><li>Particle source from wall recycling based on particle confinement time</li><li>Integral equation solution for neutral transport in toroidal geometry</li><li>Ionization source profiles for maintaining particle balance</li></ul><p>Key physics included:</p><ul><li>Electron impact ionization rates (Freeman &amp; Jones, 1974)</li><li>Charge exchange reactions between neutrals and ions</li><li>Wall temperature effects on neutral injection velocity  </li><li>Toroidal geometry effects on neutral penetration</li><li>Recycling coefficient based on particle confinement time scaling</li></ul><p>The solver uses:</p><ul><li>Particle confinement time as fraction of energy confinement time (τp/τe)</li><li>Wall temperature for neutral injection energy</li><li>Iterative solution of integral transport equations</li><li>Numerical integration over velocity space</li></ul><div class="admonition is-info" id="Note-21e26f8f533b495"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-21e26f8f533b495" title="Permalink"></a></header><div class="admonition-body"><p>Reads data from <code>dd.equilibrium</code>, <code>dd.core_profiles</code> and stores results in  <code>dd.core_profiles.profiles_1d.neutral</code> and <code>dd.core_sources</code></p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/hcd/neutral_fueling_actor.jl#L19-L50">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorNeutralFueling</span>
├─ <a href='act_details.html#act.ActorNeutralFueling.τp_over_τe'>τp_over_τe</a>
└─ <a href='act_details.html#act.ActorNeutralFueling.T_wall'>T_wall</a>  [eV]
</code></pre><h3 id="SimpleIC"><a class="docs-heading-anchor" href="#SimpleIC">SimpleIC</a><a id="SimpleIC-1"></a><a class="docs-heading-anchor-permalink" href="#SimpleIC" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorSimpleIC-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorSimpleIC-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorSimpleIC</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorSimpleIC(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Calculates ion cyclotron (IC) heating and current drive using simplified Gaussian  deposition profiles. The actor models IC wave absorption with configurable power split between electrons and ions, typically optimized for minority heating scenarios.</p><p>The model includes:</p><ul><li>Gaussian power deposition profiles at user-specified locations</li><li>Configurable electron/ion power fraction (default 80% to ions for minority heating)</li><li>Current drive efficiency based on GASC formulae corrected for beta effects</li><li>Multiple antenna support for different IC systems</li><li>Beta-dependent current drive efficiency reduction</li></ul><p>Current drive efficiency uses the G. Tonon formula modified for finite beta effects, suitable for reactor-relevant conditions with significant beta_toroidal.</p><div class="admonition is-info" id="Note-2bc71f429f1ffdd9"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-2bc71f429f1ffdd9" title="Permalink"></a></header><div class="admonition-body"><p>Reads data in <code>dd.ic_antennas</code>, <code>dd.pulse_schedule</code> and stores data in <code>dd.waves</code> and <code>dd.core_sources</code></p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/hcd/ic_simple_actor.jl#L24-L44">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorSimpleIC</span>
└─ <span class="sgr1">actuator</span>
</code></pre><h3 id="SimpleLH"><a class="docs-heading-anchor" href="#SimpleLH">SimpleLH</a><a id="SimpleLH-1"></a><a class="docs-heading-anchor-permalink" href="#SimpleLH" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorSimpleLH-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorSimpleLH-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorSimpleLH</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorSimpleLH(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Calculates lower hybrid (LH) wave heating and current drive using a simplified Gaussian deposition model.</p><p>This actor models LH wave energy and current deposition through:</p><ul><li>Gaussian radial deposition profile with configurable location and width</li><li>Current drive efficiency based on local plasma parameters (density, temperature, Zeff)</li><li>All power deposited to electrons (no ion heating)</li><li>Parallel current drive calculated using scaling from Tonon&#39;s reactor studies</li></ul><p>The current drive efficiency formula used is: η<em>CD = η</em>scale × T<em>e[keV] × 0.037 × B₀ / (5.0 + Z</em>eff) / n_e[10²⁰]^0.33</p><p>Where the parallel current is: j<em>∥ = η</em>CD / R₀ / n<em>e[10²⁰] × P</em>launched</p><div class="admonition is-info" id="Reference-4df8428e3bdfa72a"><header class="admonition-header">Reference<a class="admonition-anchor" href="#Reference-4df8428e3bdfa72a" title="Permalink"></a></header><div class="admonition-body"><p>Current drive efficiency from GASC, based on &quot;G. Tonon &#39;Current Drive Efficiency Requirements for an Attractive Steady-State Reactor&#39;&quot;</p></div></div><div class="admonition is-info" id="Note-be1f9d3a71dc60f0"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-be1f9d3a71dc60f0" title="Permalink"></a></header><div class="admonition-body"><p>Reads data in <code>dd.lh_antennas</code>, <code>dd.pulse_schedule</code> and stores results in <code>dd.waves</code> and <code>dd.core_sources</code></p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/hcd/lh_simple_actor.jl#L24-L47">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorSimpleLH</span>
└─ <span class="sgr1">actuator</span>
</code></pre><h3 id="SimplePL"><a class="docs-heading-anchor" href="#SimplePL">SimplePL</a><a id="SimplePL-1"></a><a class="docs-heading-anchor-permalink" href="#SimplePL" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorSimplePL-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorSimplePL-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorSimplePL</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorSimplePL(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Calculates pellet fueling particle deposition using a simplified deposition model.</p><p>This actor models pellet particle injection through:</p><ul><li>Calculation of pellet particle content based on geometry (spherical, cylindrical, or rectangular)</li><li>Material density lookup for different species (DT, D, T, C, Ne)</li><li>Frequency-based particle source calculation</li><li>Beta-function radial deposition profile with configurable location and width</li><li>Pure particle source (no heating or current drive)</li></ul><p>The pellet volume and particle content are calculated based on:</p><ul><li>Spherical: V = (4/3)πr³</li><li>Cylindrical: V = πr²h  </li><li>Rectangular: V = l×w×h</li></ul><p>Particle rate = pellet<em>volume × material</em>density × injection_frequency</p><p>The deposition profile uses a beta function with parameters tuned for pellet-like deposition.</p><div class="admonition is-info" id="Note-7495b4c2a0a4f50d"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-7495b4c2a0a4f50d" title="Permalink"></a></header><div class="admonition-body"><p>Reads data in <code>dd.pellets.launcher</code>, <code>dd.pulse_schedule</code> and stores results in <code>dd.core_sources</code></p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/hcd/pl_simple_actor.jl#L23-L47">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorSimplePL</span>
└─ <span class="sgr1">actuator</span>
</code></pre><h2 id="Nuclear-(2-actors)"><a class="docs-heading-anchor" href="#Nuclear-(2-actors)">Nuclear (2 actors)</a><a id="Nuclear-(2-actors)-1"></a><a class="docs-heading-anchor-permalink" href="#Nuclear-(2-actors)" title="Permalink"></a></h2><h3 id="Blanket"><a class="docs-heading-anchor" href="#Blanket">Blanket</a><a id="Blanket-1"></a><a class="docs-heading-anchor-permalink" href="#Blanket" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorBlanket-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorBlanket-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorBlanket</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorBlanket(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Calculates blanket performance including tritium breeding ratio (TBR), thermal power generation, and neutron leakage using 1D neutronics models. The actor optimizes blanket layer thicknesses to achieve target TBR while minimizing neutron leakage and respecting geometric constraints.</p><p>The calculations include:</p><ul><li>Tritium breeding from Li-6 reactions using neural network models</li><li>Thermal power generation with configurable multiplication factor</li><li>Neutron leakage assessment for radiation protection</li><li>Layer thickness optimization to meet TBR requirements</li><li>Li-6 enrichment optimization</li></ul><p>Handles multiple blanket modules (e.g., inboard and outboard) with different geometric and material configurations.</p><div class="admonition is-info" id="Note-cf7f7b46c96f8d4"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-cf7f7b46c96f8d4" title="Permalink"></a></header><div class="admonition-body"><p>Stores data in <code>dd.blanket</code></p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/nuclear/blanket_actor.jl#L27-L48">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorBlanket</span>
├─ <a href='act_details.html#act.ActorBlanket.minimum_first_wall_thickness'>minimum_first_wall_thickness</a>  [m]
├─ <a href='act_details.html#act.ActorBlanket.blanket_multiplier'>blanket_multiplier</a>
├─ <a href='act_details.html#act.ActorBlanket.thermal_power_extraction_efficiency'>thermal_power_extraction_efficiency</a>
├─ <a href='act_details.html#act.ActorBlanket.max_Li6_enrichment_fraction'>max_Li6_enrichment_fraction</a>
└─ <a href='act_details.html#act.ActorBlanket.verbose'>verbose</a>
</code></pre><h3 id="Neutronics"><a class="docs-heading-anchor" href="#Neutronics">Neutronics</a><a id="Neutronics-1"></a><a class="docs-heading-anchor-permalink" href="#Neutronics" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorNeutronics-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorNeutronics-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorNeutronics</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorNeutronics(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Calculates neutron wall loading on the first wall using Monte Carlo particle tracing. The actor defines neutron sources from fusion reactions, traces their paths to the  first wall, and calculates the resulting neutron flux and power deposition.</p><p>The calculation includes:</p><ul><li>Neutron source definition from D-T and D-D fusion reactions</li><li>Particle tracing from plasma to first wall</li><li>Flux and power calculation on wall elements</li><li>Normalization to match total fusion neutron power</li></ul><div class="admonition is-info" id="Note-1c3259afedeabe0c"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-1c3259afedeabe0c" title="Permalink"></a></header><div class="admonition-body"><p>Stores data in <code>dd.neutronics</code></p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/nuclear/neutronics_actor.jl#L19-L35">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorNeutronics</span>
├─ <a href='act_details.html#act.ActorNeutronics.N'>N</a>
└─ <a href='act_details.html#act.ActorNeutronics.do_plot'>do_plot</a>
</code></pre><h2 id="Pedestal-(4-actors)"><a class="docs-heading-anchor" href="#Pedestal-(4-actors)">Pedestal (4 actors)</a><a id="Pedestal-(4-actors)-1"></a><a class="docs-heading-anchor-permalink" href="#Pedestal-(4-actors)" title="Permalink"></a></h2><h3 id="Pedestal"><a class="docs-heading-anchor" href="#Pedestal">Pedestal</a><a id="Pedestal-1"></a><a class="docs-heading-anchor-permalink" href="#Pedestal" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorPedestal-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorPedestal-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorPedestal</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorPedestal(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Comprehensive pedestal modeling with support for multiple models and L-H mode transitions.</p><p>This compound actor manages pedestal physics by selecting from available pedestal models and handling mode transitions between L-mode and H-mode operation. It coordinates multiple specialized pedestal actors and provides dynamic transition capabilities.</p><p>Available pedestal models:</p><ul><li><code>:EPED</code>: EPED neural network model for pedestal predictions</li><li><code>:WPED</code>: Width-based energy balance pedestal model  </li><li><code>:analytic</code>: Analytic scaling laws for spherical tokamaks</li><li><code>:dynamic</code>: Time-dependent L-H transitions with smoothing</li><li><code>:replay</code>: Replays pedestal data from experimental reference</li><li><code>:none</code>: No pedestal modifications</li></ul><p>Key features:</p><ul><li>Automatic L-H mode detection based on power threshold criteria</li><li>Dynamic mode transitions with configurable time constants</li><li>Density matching options (pedestal or line-averaged)</li><li>Rotation profile modeling (linear, experimental replay)</li><li>Consistent Ti/Te ratio handling across all models</li></ul><p>Mode transition physics:</p><ul><li>Supports user-defined transition times or automatic power threshold detection</li><li>Smooth temporal evolution using tanh functions with configurable time scales</li><li>Separate evolution times for temperature and density transitions</li><li>Configurable density and Zeff ratios between L-mode and H-mode</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/pedestal/pedestal_actor.jl#L49-L78">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorPedestal</span>
├─ <a href='act_details.html#act.ActorPedestal.rho_nml'>rho_nml</a>
├─ <a href='act_details.html#act.ActorPedestal.rho_ped'>rho_ped</a>
├─ <a href='act_details.html#act.ActorPedestal.T_ratio_pedestal'>T_ratio_pedestal</a>
├─ <a href='act_details.html#act.ActorPedestal.Te_sep'>Te_sep</a>
├─ <a href='act_details.html#act.ActorPedestal.ip_from'>ip_from</a>
├─ <a href='act_details.html#act.ActorPedestal.βn_from'>βn_from</a>
├─ <a href='act_details.html#act.ActorPedestal.ne_from'>ne_from</a>
├─ <a href='act_details.html#act.ActorPedestal.zeff_from'>zeff_from</a>
├─ <a href='act_details.html#act.ActorPedestal.mode_transitions'>mode_transitions</a>  [s]
├─ <a href='act_details.html#act.ActorPedestal.density_match'>density_match</a>
├─ <a href='act_details.html#act.ActorPedestal.model'>model</a>
├─ <a href='act_details.html#act.ActorPedestal.rotation_model'>rotation_model</a>
├─ <a href='act_details.html#act.ActorPedestal.tau_t'>tau_t</a>  [s]
├─ <a href='act_details.html#act.ActorPedestal.tau_n'>tau_n</a>  [s]
├─ <a href='act_details.html#act.ActorPedestal.density_ratio_L_over_H'>density_ratio_L_over_H</a>
├─ <a href='act_details.html#act.ActorPedestal.zeff_ratio_L_over_H'>zeff_ratio_L_over_H</a>
└─ <a href='act_details.html#act.ActorPedestal.do_plot'>do_plot</a>
</code></pre><h3 id="AnalyticPedestal"><a class="docs-heading-anchor" href="#AnalyticPedestal">AnalyticPedestal</a><a id="AnalyticPedestal-1"></a><a class="docs-heading-anchor-permalink" href="#AnalyticPedestal" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorAnalyticPedestal-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorAnalyticPedestal-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorAnalyticPedestal</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorAnalyticPedestal(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Calculates pedestal pressure and width using analytic scaling laws for spherical tokamaks.</p><p>The actor computes pedestal boundary conditions using empirical scaling relationships based on  machine parameters and plasma conditions. It supports multiple scaling models calibrated  against experimental data from MAST and NSTX spherical tokamaks.</p><p>Available models:</p><ul><li><code>:TE_MAST</code>: MAST-like scaling with w<em>ped ~ βp</em>ped^0.5</li><li><code>:TE_NSTX</code>: NSTX-like scaling with w<em>ped ~ βp</em>ped^1.0  </li><li><code>:hiped_MASTU</code>: MAST-U scaling based on βn relationship</li></ul><p>Key outputs:</p><ul><li>Pedestal pressure (pped) in EPED units (MPa)</li><li>Pedestal width (wped) as half-width fraction of ψ_norm</li><li>Scaling coefficients can be customized via height<em>coefficient and width</em>coefficient parameters</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/pedestal/analytic_pedestal_actor.jl#L32-L50">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorAnalyticPedestal</span>
├─ <a href='act_details.html#act.ActorAnalyticPedestal.rho_nml'>rho_nml</a>
├─ <a href='act_details.html#act.ActorAnalyticPedestal.rho_ped'>rho_ped</a>
├─ <a href='act_details.html#act.ActorAnalyticPedestal.T_ratio_pedestal'>T_ratio_pedestal</a>
├─ <a href='act_details.html#act.ActorAnalyticPedestal.Te_sep'>Te_sep</a>
├─ <a href='act_details.html#act.ActorAnalyticPedestal.ip_from'>ip_from</a>
├─ <a href='act_details.html#act.ActorAnalyticPedestal.βn_from'>βn_from</a>
├─ <a href='act_details.html#act.ActorAnalyticPedestal.ne_from'>ne_from</a>
├─ <a href='act_details.html#act.ActorAnalyticPedestal.zeff_from'>zeff_from</a>
├─ <a href='act_details.html#act.ActorAnalyticPedestal.model'>model</a>
├─ <a href='act_details.html#act.ActorAnalyticPedestal.width_coefficient'>width_coefficient</a>
├─ <a href='act_details.html#act.ActorAnalyticPedestal.height_coefficient'>height_coefficient</a>
└─ <a href='act_details.html#act.ActorAnalyticPedestal.ped_factor'>ped_factor</a>
</code></pre><h3 id="EPED"><a class="docs-heading-anchor" href="#EPED">EPED</a><a id="EPED-1"></a><a class="docs-heading-anchor-permalink" href="#EPED" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorEPED-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorEPED-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorEPED</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorEPED(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Predicts pedestal pressure and width using the EPED neural network model.</p><p>The actor utilizes the EPED (Edge Pedestal Equilibrium and Dynamics) model to predict  pedestal height and width based on global plasma parameters. EPED combines physics-based  scaling laws with neural network corrections trained on experimental pedestal data.</p><p>Model capabilities:</p><ul><li>Physics-based power-law scaling for robust extrapolation</li><li>Optional neural network corrections for improved accuracy</li><li>Calibrated against experimental data from multiple tokamaks</li><li>Handles both conventional and spherical tokamak geometries</li></ul><p>Key inputs (extracted from plasma state):</p><ul><li>Machine geometry (R, a, κ, δ, triangularity)</li><li>Global parameters (βn, Ip, Bt, effective mass)  </li><li>Pedestal conditions (ne<em>ped, Zeff</em>ped)</li></ul><p>Outputs:</p><ul><li>Pedestal pressure height in MPa (pped)</li><li>Pedestal width as fraction of normalized poloidal flux (wped)</li><li>Automatic fallback to edge pressure + 10% if EPED prediction is too low</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/pedestal/EPED_actor.jl#L33-L57">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorEPED</span>
├─ <a href='act_details.html#act.ActorEPED.rho_nml'>rho_nml</a>
├─ <a href='act_details.html#act.ActorEPED.rho_ped'>rho_ped</a>
├─ <a href='act_details.html#act.ActorEPED.T_ratio_pedestal'>T_ratio_pedestal</a>
├─ <a href='act_details.html#act.ActorEPED.Te_sep'>Te_sep</a>
├─ <a href='act_details.html#act.ActorEPED.ip_from'>ip_from</a>
├─ <a href='act_details.html#act.ActorEPED.βn_from'>βn_from</a>
├─ <a href='act_details.html#act.ActorEPED.ne_from'>ne_from</a>
├─ <a href='act_details.html#act.ActorEPED.zeff_from'>zeff_from</a>
├─ <a href='act_details.html#act.ActorEPED.ped_factor'>ped_factor</a>
├─ <a href='act_details.html#act.ActorEPED.only_powerlaw'>only_powerlaw</a>
└─ <a href='act_details.html#act.ActorEPED.warn_nn_train_bounds'>warn_nn_train_bounds</a>
</code></pre><h3 id="WPED"><a class="docs-heading-anchor" href="#WPED">WPED</a><a id="WPED-1"></a><a class="docs-heading-anchor-permalink" href="#WPED" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorWPED-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorWPED-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorWPED</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorWPED(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Adjusts pedestal temperature profiles to match a target energy ratio between pedestal and core regions.</p><p>The actor optimizes temperature profiles at the plasma edge by finding the optimal boundary temperature  and slope parameters that produce a specified pedestal-to-core stored energy fraction. It uses optimization  to iteratively adjust the temperature gradient and boundary conditions until the energy balance criterion is satisfied.</p><p>Key operations:</p><ul><li>Calculates current core-to-edge energy ratio if target ratio is not specified</li><li>Optimizes boundary temperature value to match target energy ratio</li><li>Adjusts both electron and ion temperature profiles with consistent Ti/Te ratios</li><li>Preserves separatrix temperature boundary conditions</li><li>Updates temperature profiles through H-mode blending functions</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/pedestal/WPED_actor.jl#L33-L48">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorWPED</span>
├─ <a href='act_details.html#act.ActorWPED.rho_nml'>rho_nml</a>
├─ <a href='act_details.html#act.ActorWPED.rho_ped'>rho_ped</a>
├─ <a href='act_details.html#act.ActorWPED.T_ratio_pedestal'>T_ratio_pedestal</a>
├─ <a href='act_details.html#act.ActorWPED.Te_sep'>Te_sep</a>
├─ <a href='act_details.html#act.ActorWPED.ip_from'>ip_from</a>
├─ <a href='act_details.html#act.ActorWPED.βn_from'>βn_from</a>
├─ <a href='act_details.html#act.ActorWPED.ne_from'>ne_from</a>
├─ <a href='act_details.html#act.ActorWPED.zeff_from'>zeff_from</a>
├─ <a href='act_details.html#act.ActorWPED.ped_to_core_fraction'>ped_to_core_fraction</a>
└─ <a href='act_details.html#act.ActorWPED.do_plot'>do_plot</a>
</code></pre><h2 id="Pf-(3-actors)"><a class="docs-heading-anchor" href="#Pf-(3-actors)">Pf (3 actors)</a><a id="Pf-(3-actors)-1"></a><a class="docs-heading-anchor-permalink" href="#Pf-(3-actors)" title="Permalink"></a></h2><h3 id="PFdesign"><a class="docs-heading-anchor" href="#PFdesign">PFdesign</a><a id="PFdesign-1"></a><a class="docs-heading-anchor-permalink" href="#PFdesign" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorPFdesign-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorPFdesign-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorPFdesign</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorPFdesign(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Optimizes poloidal field (PF) coil placement and sizing to achieve target equilibrium configurations. Uses optimization algorithms to find coil positions that minimize current requirements while satisfying magnetic flux and force balance constraints for plasma control.</p><p><strong>Design approaches (controlled by <code>model</code>)</strong></p><ul><li><code>:none</code>: Uses existing coil configuration without modification</li><li><code>:uniform</code>: Places coils uniformly on predefined rails  </li><li><code>:optimal</code>: Optimizes both coil placement and currents using least-squares minimization</li></ul><p><strong>Optimization process (for <code>:optimal</code> mode)</strong></p><ol><li>Initializes PF coil rails based on radial build geometry</li><li>Uses nested optimization: outer loop optimizes coil positions, inner loop finds currents</li><li>Minimizes flux/saddle constraint violations while penalizing large currents</li><li>Includes coil spacing penalties to prevent overlapping</li><li>Sizes coils based on current requirements and engineering margins</li></ol><p><strong>Key constraints</strong></p><ul><li>Flux control points (boundary and internal flux surfaces)</li><li>Saddle control points (X-points and magnetic axis)</li><li>Current density limits and coil spacing requirements</li><li>Up-down symmetry (if <code>symmetric=true</code>)</li></ul><p><strong>Key outputs</strong></p><ul><li>Optimized PF coil positions and sizes (<code>dd.pf_active.coil[].element[].geometry</code>)</li><li>Coil currents that achieve target equilibrium</li><li>Updated equilibrium solution (if <code>update_equilibrium=true</code>)</li></ul><div class="admonition is-info" id="Note-e486aefe69b5cbfe"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-e486aefe69b5cbfe" title="Permalink"></a></header><div class="admonition-body"><p>Manupulates data in <code>dd.pf_active</code></p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/pf/pf_design_actor.jl#L20-L53">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorPFdesign</span>
├─ <a href='act_details.html#ActorPFdesign.symmetric'>symmetric</a>
├─ <a href='act_details.html#ActorPFdesign.update_equilibrium'>update_equilibrium</a>
├─ <a href='act_details.html#ActorPFdesign.model'>model</a>
├─ <a href='act_details.html#ActorPFdesign.reset_rails'>reset_rails</a>
├─ <a href='act_details.html#ActorPFdesign.do_plot'>do_plot</a>
└─ <a href='act_details.html#ActorPFdesign.verbose'>verbose</a>
</code></pre><h3 id="PFactive"><a class="docs-heading-anchor" href="#PFactive">PFactive</a><a id="PFactive-1"></a><a class="docs-heading-anchor-permalink" href="#PFactive" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorPFactive-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorPFactive-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorPFactive</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorPFactive(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Optimizes poloidal field coil currents to match target equilibrium constraints.</p><p>The actor solves for optimal PF coil currents that satisfy boundary shape, X-point positions, and strike point locations in a least-squares sense. It uses Green&#39;s functions to model electromagnetic coupling between coils and plasma, with optional regularization to prevent unrealistic current solutions.</p><p>Key features:</p><ul><li>Supports different Green&#39;s function calculation methods (quadrature, filament models)</li><li>Handles boundary shape control through iso-flux control points</li><li>Maintains X-point and strike point positions with configurable weights</li><li>Includes automatic regularization parameter selection for stable solutions</li><li>Can update target equilibrium with achievable coil configuration</li></ul><p>Control points:</p><ul><li>Boundary iso-flux surfaces for plasma shape control</li><li>X-point locations as saddle point constraints</li><li>Strike point locations as flux surface constraints</li><li>Magnetic axis position and flux value</li></ul><div class="admonition is-info" id="Note-3ab648ab300df85d"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-3ab648ab300df85d" title="Permalink"></a></header><div class="admonition-body"><p>Manipulates data in <code>dd.pf_active</code></p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/pf/pf_active_actor.jl#L34-L62">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorPFactive</span>
├─ <a href='act_details.html#act.ActorPFactive.green_model'>green_model</a>
├─ <a href='act_details.html#act.ActorPFactive.update_equilibrium'>update_equilibrium</a>
├─ <a href='act_details.html#act.ActorPFactive.x_points_weight'>x_points_weight</a>
├─ <a href='act_details.html#act.ActorPFactive.strike_points_weight'>strike_points_weight</a>
├─ <a href='act_details.html#act.ActorPFactive.magnetic_probe_weight'>magnetic_probe_weight</a>
├─ <a href='act_details.html#act.ActorPFactive.flux_loop_weight'>flux_loop_weight</a>
├─ <a href='act_details.html#act.ActorPFactive.boundary_weight'>boundary_weight</a>
└─ <a href='act_details.html#act.ActorPFactive.do_plot'>do_plot</a>
</code></pre><h3 id="PassiveStructures"><a class="docs-heading-anchor" href="#PassiveStructures">PassiveStructures</a><a id="PassiveStructures-1"></a><a class="docs-heading-anchor-permalink" href="#PassiveStructures" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorPassiveStructures-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorPassiveStructures-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorPassiveStructures</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorPassiveStructures(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Generates passive conducting structure models for electromagnetic analysis by discretizing vacuum vessel layers into quadrilateral current loops. These passive elements are essential for vertical stability analysis and disruption modeling as they represent the primary conducting structures that interact with changing magnetic fields.</p><p><strong>Discretization process</strong></p><ol><li>Identifies vacuum vessel layers from the radial build (<code>dd.build.layer</code> with type <code>:vessel</code>)</li><li>Creates inner and outer boundaries of conducting walls</li><li>Discretizes walls into quadrilateral elements based on precision requirements</li><li>Assigns electrical properties (resistivity) based on vessel materials</li></ol><p><strong>Physics modeling</strong></p><ul><li>Each quadrilateral represents a passive current loop with specific resistance</li><li>Material properties determine resistivity (defaults to steel if not specified)</li><li>Geometric discretization balances accuracy vs computational efficiency  </li><li>Accounts for wall thickness effects on electromagnetic coupling</li></ul><p><strong>Key inputs</strong></p><ul><li>Vacuum vessel layer geometry (<code>dd.build.layer[].outline</code>)</li><li>Material specifications and electrical conductivity</li><li>Discretization precision parameters</li></ul><p><strong>Key outputs</strong></p><ul><li>Passive loop elements in <code>dd.pf_passive.loop[].element[]</code></li><li>Loop resistivity values for electromagnetic calculations  </li><li>Geometric properties (outline coordinates) for each discretized element</li></ul><div class="admonition is-info" id="Note-f06ddc84dba39b7"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-f06ddc84dba39b7" title="Permalink"></a></header><div class="admonition-body"><p>Populates <code>dd.pf_passive</code> based on vacuum vessel layer(s)</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/pf/pf_passive_actor.jl#L22-L55">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorPassiveStructures</span>
├─ <a href='act_details.html#act.ActorPassiveStructures.wall_precision'>wall_precision</a>
├─ <a href='act_details.html#act.ActorPassiveStructures.min_n_segments'>min_n_segments</a>
└─ <a href='act_details.html#act.ActorPassiveStructures.do_plot'>do_plot</a>
</code></pre><h2 id="Sol-(2-actors)"><a class="docs-heading-anchor" href="#Sol-(2-actors)">Sol (2 actors)</a><a id="Sol-(2-actors)-1"></a><a class="docs-heading-anchor-permalink" href="#Sol-(2-actors)" title="Permalink"></a></h2><h3 id="SOL"><a class="docs-heading-anchor" href="#SOL">SOL</a><a id="SOL-1"></a><a class="docs-heading-anchor-permalink" href="#SOL" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorSOL-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorSOL-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorSOL</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorSOL(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Provides a unified interface for different scrape-off layer (SOL) physics models. This compound actor selects and runs one of several available SOL models based on configuration:</p><ul><li><code>:box</code> - Uses ActorSOLBox for 0D box model calculations</li><li><code>:replay</code> - Uses ActorReplay to replay previously calculated data  </li><li><code>:none</code> - Uses ActorNoOperation for no SOL modeling</li></ul><p>The selected SOL actor is instantiated and executed, providing consistent interface regardless of the underlying model complexity.</p><div class="admonition is-info" id="Note-caf71233f5594eec"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-caf71233f5594eec" title="Permalink"></a></header><div class="admonition-body"><p>Delegates to the selected SOL model actor based on configuration</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/sol/sol_actor.jl#L15-L32">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorSOL</span>
└─ <a href='act_details.html#act.ActorSOL.model'>model</a>
</code></pre><h3 id="SOLBox"><a class="docs-heading-anchor" href="#SOLBox">SOLBox</a><a id="SOLBox-1"></a><a class="docs-heading-anchor-permalink" href="#SOLBox" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorSOLBox-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorSOLBox-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorSOLBox</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorSOLBox(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Implements a 0D box model for scrape-off layer (SOL) physics to calculate upstream  plasma conditions at the separatrix from target boundary conditions. Based on the  model developed by X. Zhang et al. (https://doi.org/10.1016/j.nme.2022.101354).</p><p>The model calculates:</p><ul><li>Upstream electron and ion temperatures and densities</li><li>Power flux densities for electrons and ions </li><li>Connection length and flux expansion from field line tracing</li><li>Target conditions using recycling coefficients and power balance</li></ul><p>Handles both single-null and double-null configurations automatically based on magnetic balance assessment.</p><div class="admonition is-info" id="Note-ca498667c183588"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-ca498667c183588" title="Permalink"></a></header><div class="admonition-body"><p>Reads data from <code>dd.equilibrium</code>, <code>dd.core_sources</code>, <code>dd.wall</code> and stores  results in <code>dd.edge_profiles</code></p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/sol/sol_box_actor.jl#L97-L117">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorSOLBox</span>
├─ <a href='act_details.html#act.ActorSOLBox.Te_t'>Te_t</a>  [eV]
├─ <a href='act_details.html#act.ActorSOLBox.Ti_t'>Ti_t</a>  [eV]
├─ <a href='act_details.html#act.ActorSOLBox.frac_cond'>frac_cond</a>
├─ <a href='act_details.html#act.ActorSOLBox.frac_mom'>frac_mom</a>
├─ <a href='act_details.html#act.ActorSOLBox.κ0_e'>κ0_e</a>
├─ <a href='act_details.html#act.ActorSOLBox.κ0_i'>κ0_i</a>
├─ <a href='act_details.html#act.ActorSOLBox.recycling_coeff_i'>recycling_coeff_i</a>
├─ <a href='act_details.html#act.ActorSOLBox.recycling_coeff_e'>recycling_coeff_e</a>
├─ <a href='act_details.html#act.ActorSOLBox.λq'>λq</a>  [m]
├─ <a href='act_details.html#act.ActorSOLBox.verbose'>verbose</a>
└─ <a href='act_details.html#act.ActorSOLBox.do_plot'>do_plot</a>
</code></pre><h2 id="Stability-(2-actors)"><a class="docs-heading-anchor" href="#Stability-(2-actors)">Stability (2 actors)</a><a id="Stability-(2-actors)-1"></a><a class="docs-heading-anchor-permalink" href="#Stability-(2-actors)" title="Permalink"></a></h2><h3 id="PlasmaLimits"><a class="docs-heading-anchor" href="#PlasmaLimits">PlasmaLimits</a><a id="PlasmaLimits-1"></a><a class="docs-heading-anchor-permalink" href="#PlasmaLimits" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorPlasmaLimits-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorPlasmaLimits-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorPlasmaLimits</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorPlasmaLimits(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Evaluates plasma operational limits by running all selected limit models and checking  for violations. The actor executes various stability and operational limit assessments based on the configured models and reports which limits are satisfied or exceeded.</p><p>The actor can be configured to raise errors when limits are breached or simply warn. It provides detailed reporting of the limit check results, showing the percentage of each limit threshold reached.</p><div class="admonition is-info" id="Note-de8c2fbcd1cc7564"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-de8c2fbcd1cc7564" title="Permalink"></a></header><div class="admonition-body"><p>Reads data from various sources and stores results in <code>dd.limits</code></p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/stability/limits_actor.jl#L23-L37">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorPlasmaLimits</span>
├─ <a href='act_details.html#act.ActorPlasmaLimits.models'>models</a>
├─ <a href='act_details.html#act.ActorPlasmaLimits.raise_on_breach'>raise_on_breach</a>
└─ <a href='act_details.html#act.ActorPlasmaLimits.verbose'>verbose</a>
</code></pre><h3 id="VerticalStability"><a class="docs-heading-anchor" href="#VerticalStability">VerticalStability</a><a id="VerticalStability-1"></a><a class="docs-heading-anchor-permalink" href="#VerticalStability" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorVerticalStability-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorVerticalStability-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorVerticalStability</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorVerticalStability(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Computes vertical stability metrics for tokamak plasmas using the equilibrium and coil configuration.</p><p>This actor calculates two key stability metrics:</p><ul><li>Stability margin: measures the plasma&#39;s resilience to vertical displacement events (VDEs)</li><li>Normalized growth rate (γτ): quantifies how rapidly vertical instabilities develop</li></ul><p>The analysis considers both active PF coils and passive conducting structures. Results are stored in <code>dd.mhd_linear.time_slice[].toroidal_mode</code> where stability margin &gt; 0.15 and γτ &lt; 10 indicate stability.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/stability/vertical_actor.jl#L22-L33">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorVerticalStability</span>
├─ <a href='act_details.html#act.ActorVerticalStability.model'>model</a>
└─ <a href='act_details.html#act.ActorVerticalStability.do_plot'>do_plot</a>
</code></pre><h2 id="Transport-(8-actors)"><a class="docs-heading-anchor" href="#Transport-(8-actors)">Transport (8 actors)</a><a id="Transport-(8-actors)-1"></a><a class="docs-heading-anchor-permalink" href="#Transport-(8-actors)" title="Permalink"></a></h2><h3 id="CoreTransport"><a class="docs-heading-anchor" href="#CoreTransport">CoreTransport</a><a id="CoreTransport-1"></a><a class="docs-heading-anchor-permalink" href="#CoreTransport" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorCoreTransport-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorCoreTransport-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorCoreTransport</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorCoreTransport(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Provides a unified interface to run core transport evolution models.</p><p>This compound actor manages different approaches to core transport evolution:</p><p>Transport model options:</p><ul><li><code>:FluxMatcher</code>: Self-consistent flux-matching transport evolution using turbulent and  neoclassical models to evolve temperature and density profiles</li><li><code>:EPEDProfiles</code>: Use EPED model predictions for pedestal and core profiles</li><li><code>:replay</code>: Replay profiles from experimental data or previous simulations</li><li><code>:none</code>: No core transport evolution (fixed profiles)</li></ul><p>The selected model determines how the core plasma profiles (temperature, density, rotation) evolve in response to heating, particle sources, and transport processes.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/transport/core_transport_actor.jl#L15-L31">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorCoreTransport</span>
└─ <a href='act_details.html#act.ActorCoreTransport.model'>model</a>
</code></pre><h3 id="EPEDprofiles"><a class="docs-heading-anchor" href="#EPEDprofiles">EPEDprofiles</a><a id="EPEDprofiles-1"></a><a class="docs-heading-anchor-permalink" href="#EPEDprofiles" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorEPEDprofiles-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorEPEDprofiles-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorEPEDprofiles</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorEPEDprofiles(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Constructs complete plasma profiles by blending EPED pedestal predictions with shaped core profiles.</p><p>This actor combines EPED-predicted pedestal conditions with parametrically shaped core  profiles to create complete, consistent temperature and density profiles across the entire  plasma. It maintains fixed on-axis values while ensuring smooth transitions between core  and pedestal regions.</p><p>Key operations:</p><ul><li>Runs EPED model to predict pedestal pressure and width</li><li>Applies H-mode profile functions with configurable shaping parameters</li><li>Maintains ion-electron temperature ratio consistency (core vs. pedestal)</li><li>Preserves particle density ratios between species</li><li>Ensures proper pedestal positioning at ρ=0.9 reference location</li></ul><p>Profile construction workflow:</p><ol><li><strong>EPED Prediction</strong>: Calculates pedestal pressure and width from current plasma state</li><li><strong>Temperature Profiles</strong>: Constructs Te and Ti using H-mode functions with shaping</li><li><strong>Density Profiles</strong>: Updates ne and ni maintaining species fraction consistency  </li><li><strong>Source Updates</strong>: Recalculates all power and particle sources for updated profiles</li></ol><p>Shaping parameters:</p><ul><li><code>Te_shaping</code>: Controls electron temperature profile curvature</li><li><code>ne_shaping</code>: Controls electron density profile curvature  </li><li><code>T_ratio_pedestal</code>: Ti/Te ratio in pedestal region</li><li><code>T_ratio_core</code>: Ti/Te ratio in core region</li></ul><p>The actor preserves the on-axis plasma values while optimizing the profile shapes  to match both EPED pedestal predictions and prescribed core-pedestal transitions.</p><div class="admonition is-info" id="Note-ec7883c0a077a608"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-ec7883c0a077a608" title="Permalink"></a></header><div class="admonition-body"><p>Does not modify on-axis values of plasma profiles, only shapes and pedestal conditions</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/transport/eped_profiles_actor.jl#L22-L57">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorEPEDprofiles</span>
├─ <a href='act_details.html#act.ActorEPEDprofiles.Te_shaping'>Te_shaping</a>
├─ <a href='act_details.html#act.ActorEPEDprofiles.ne_shaping'>ne_shaping</a>
├─ <a href='act_details.html#act.ActorEPEDprofiles.T_ratio_pedestal'>T_ratio_pedestal</a>
└─ <a href='act_details.html#act.ActorEPEDprofiles.T_ratio_core'>T_ratio_core</a>
</code></pre><h3 id="FluxCalculator"><a class="docs-heading-anchor" href="#FluxCalculator">FluxCalculator</a><a id="FluxCalculator-1"></a><a class="docs-heading-anchor-permalink" href="#FluxCalculator" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorFluxCalculator-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorFluxCalculator-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorFluxCalculator</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorFluxCalculator(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Provides a unified interface to run turbulent and neoclassical transport model actors.</p><p>This compound actor manages the execution of both turbulent transport models  (TGLF, QLGYRO, analytic, or none) and neoclassical transport models (neoclassical or none). The actor coordinates the calculation of transport fluxes from both physics mechanisms and ensures they are properly stored in <code>dd.core_transport</code>.</p><p>Turbulence model options:</p><ul><li><code>:TGLF</code>: TGLF-based models (TGLF, TGLFNN, GKNN, TJLF)</li><li><code>:QLGYRO</code>: Quasi-linear gyrokinetic transport via CGYRO</li><li><code>:analytic</code>: Simple analytic transport models</li><li><code>:none</code>: No turbulent transport</li></ul><p>Neoclassical model options:</p><ul><li><code>:neoclassical</code>: Collisional transport (Chang-Hinton, NEO, Hirshman-Sigmar)</li><li><code>:none</code>: No neoclassical transport</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/transport/flux_calculator_actor.jl#L18-L37">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorFluxCalculator</span>
├─ <a href='act_details.html#act.ActorFluxCalculator.rho_transport'>rho_transport</a>
├─ <a href='act_details.html#act.ActorFluxCalculator.turbulence_model'>turbulence_model</a>
└─ <a href='act_details.html#act.ActorFluxCalculator.neoclassical_model'>neoclassical_model</a>
</code></pre><h3 id="FluxMatcher"><a class="docs-heading-anchor" href="#FluxMatcher">FluxMatcher</a><a id="FluxMatcher-1"></a><a class="docs-heading-anchor-permalink" href="#FluxMatcher" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorFluxMatcher-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorFluxMatcher-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorFluxMatcher</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorFluxMatcher(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Performs self-consistent transport evolution by matching turbulent/neoclassical transport fluxes to source fluxes.</p><p>This actor solves the core transport equation ∇·Γ = S by iteratively adjusting plasma profile  gradients until transport fluxes balance particle/energy sources. The process:</p><ol><li><strong>Profile Evolution</strong>: Adjusts temperature/density/rotation profile gradients based on user configuration</li><li><strong>Transport Calculation</strong>: Evaluates turbulent and neoclassical transport fluxes using ActorFluxCalculator  </li><li><strong>Source Calculation</strong>: Updates plasma heating, particle, and momentum sources</li><li><strong>Flux Matching</strong>: Minimizes residual (transport<em>flux - source</em>flux) using nonlinear solvers</li><li><strong>Pedestal Coupling</strong>: Optionally evolves pedestal conditions during the iteration process</li></ol><p>Evolution options per channel:</p><ul><li><code>:flux_match</code>: Evolve profile gradients to match transport and source fluxes  </li><li><code>:fixed</code>: Keep profiles fixed</li><li><code>:replay</code>: Use profiles from experimental data</li></ul><p>Advanced features include turbulence scaling to target confinement laws (H98, DS03), time-dependent evolution with ∂/∂t terms, and various nonlinear solver algorithms optimized for different transport model characteristics.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/transport/flux_matcher_actor.jl#L72-L94">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorFluxMatcher</span>
├─ <a href='act_details.html#act.ActorFluxMatcher.rho_transport'>rho_transport</a>
├─ <a href='act_details.html#act.ActorFluxMatcher.evolve_Ti'>evolve_Ti</a>
├─ <a href='act_details.html#act.ActorFluxMatcher.evolve_Te'>evolve_Te</a>
├─ <a href='act_details.html#act.ActorFluxMatcher.evolve_densities'>evolve_densities</a>
├─ <a href='act_details.html#act.ActorFluxMatcher.evolve_rotation'>evolve_rotation</a>
├─ <a href='act_details.html#act.ActorFluxMatcher.evolve_pedestal'>evolve_pedestal</a>
├─ <a href='act_details.html#act.ActorFluxMatcher.evolve_plasma_sources'>evolve_plasma_sources</a>
├─ <a href='act_details.html#act.ActorFluxMatcher.find_widths'>find_widths</a>
├─ <a href='act_details.html#act.ActorFluxMatcher.max_iterations'>max_iterations</a>
├─ <a href='act_details.html#act.ActorFluxMatcher.xtol'>xtol</a>
├─ <a href='act_details.html#act.ActorFluxMatcher.algorithm'>algorithm</a>
├─ <a href='act_details.html#act.ActorFluxMatcher.custom_algorithm'>custom_algorithm</a>
├─ <a href='act_details.html#act.ActorFluxMatcher.step_size'>step_size</a>
├─ <a href='act_details.html#act.ActorFluxMatcher.Δt'>Δt</a>  [s]
├─ <a href='act_details.html#act.ActorFluxMatcher.relax'>relax</a>
├─ <a href='act_details.html#act.ActorFluxMatcher.scale_turbulence_law'>scale_turbulence_law</a>
├─ <a href='act_details.html#act.ActorFluxMatcher.scale_turbulence_value'>scale_turbulence_value</a>
├─ <a href='act_details.html#act.ActorFluxMatcher.do_plot'>do_plot</a>
├─ <a href='act_details.html#act.ActorFluxMatcher.verbose'>verbose</a>
└─ <a href='act_details.html#act.ActorFluxMatcher.show_trace'>show_trace</a>
</code></pre><h3 id="AnalyticTurbulence"><a class="docs-heading-anchor" href="#AnalyticTurbulence">AnalyticTurbulence</a><a id="AnalyticTurbulence-1"></a><a class="docs-heading-anchor-permalink" href="#AnalyticTurbulence" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorAnalyticTurbulence-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorAnalyticTurbulence-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorAnalyticTurbulence</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorAnalyticTurbulence(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Evaluates analytic turbulent transport models including GyroBohm and Bohm+gyro-Bohm (BgB) models.</p><p>The actor supports two transport models:</p><ul><li><code>:GyroBohm</code>: Simple gyro-Bohm scaling returning unit fluxes</li><li><code>:BgB</code>: Detailed Bohm + gyro-Bohm model calculating electron and ion energy diffusivities (χe, χi) and particle flux (Γe) based on local plasma parameters, pressure gradients, and magnetic geometry Tholerus, Emmi, et al. Nuclear Fusion 64.10 (2024): 106030</li></ul><p>The BgB model computes transport coefficients using local temperature and density gradients, safety factor profiles, and magnetic field geometry. Results are normalized to gyro-Bohm and stored in <code>dd.core_transport</code> as anomalous transport fluxes.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/transport/analytic_turbulence_actor.jl#L24-L39">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorAnalyticTurbulence</span>
├─ <a href='act_details.html#act.ActorAnalyticTurbulence.model'>model</a>
├─ <a href='act_details.html#act.ActorAnalyticTurbulence.αBgB'>αBgB</a>
├─ <a href='act_details.html#act.ActorAnalyticTurbulence.χeB_coefficient'>χeB_coefficient</a>
├─ <a href='act_details.html#act.ActorAnalyticTurbulence.χeGB_coefficient'>χeGB_coefficient</a>
├─ <a href='act_details.html#act.ActorAnalyticTurbulence.χiB_coefficient'>χiB_coefficient</a>
├─ <a href='act_details.html#act.ActorAnalyticTurbulence.χiGB_coefficient'>χiGB_coefficient</a>
├─ <a href='act_details.html#act.ActorAnalyticTurbulence.rho_transport'>rho_transport</a>
└─ <a href='act_details.html#act.ActorAnalyticTurbulence.do_plot'>do_plot</a>
</code></pre><h3 id="Neoclassical"><a class="docs-heading-anchor" href="#Neoclassical">Neoclassical</a><a id="Neoclassical-1"></a><a class="docs-heading-anchor-permalink" href="#Neoclassical" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorNeoclassical-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorNeoclassical-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorNeoclassical</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorNeoclassical(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Evaluates neoclassical (collisional) transport fluxes using established theoretical models.</p><p>Supported neoclassical models:</p><ul><li><code>:changhinton</code>: Chang-Hinton model for ion heat transport in the banana/plateau regime</li><li><code>:neo</code>: Full drift-kinetic NEO code for comprehensive neoclassical transport including  bootstrap current, providing electron/ion energy, particle, and momentum fluxes</li><li><code>:hirshmansigmar</code>: Hirshman-Sigmar analytical model for comprehensive neoclassical transport in various collisionality regimes</li></ul><p>The models account for collisional effects, magnetic geometry, and trapped particle physics to calculate transport coefficients. Results are stored in <code>dd.core_transport.model[:neoclassical]</code> and include contributions to bootstrap current, thermal transport, and particle transport.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/transport/neoclassical_actor.jl#L20-L35">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorNeoclassical</span>
├─ <a href='act_details.html#act.ActorNeoclassical.model'>model</a>
└─ <a href='act_details.html#act.ActorNeoclassical.rho_transport'>rho_transport</a>
</code></pre><h3 id="QLGYRO"><a class="docs-heading-anchor" href="#QLGYRO">QLGYRO</a><a id="QLGYRO-1"></a><a class="docs-heading-anchor-permalink" href="#QLGYRO" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorQLGYRO-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorQLGYRO-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorQLGYRO</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorQLGYRO(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Evaluates turbulent transport using the QLGYRO quasi-linear gyrokinetic model.</p><p>QLGYRO combines TGLF quasi-linear theory with CGYRO nonlinear gyrokinetic simulations  to provide high-fidelity turbulent transport predictions. The model:</p><ul><li>Uses TGLF to identify the most unstable modes and calculate quasi-linear fluxes</li><li>Runs CGYRO nonlinear gyrokinetic simulations to compute saturation levels</li><li>Applies saturation rules to calibrate the quasi-linear transport predictions</li></ul><p>Key parameters include ky spectral resolution, number of field components (electrostatic vs electromagnetic), simulation time parameters, and saturation rules. The model provides comprehensive electron/ion energy, particle, and momentum fluxes with gyrokinetic fidelity while being more computationally efficient than full nonlinear simulations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/transport/qlgyro_actor.jl#L29-L45">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorQLGYRO</span>
├─ <a href='act_details.html#act.ActorQLGYRO.ky'>ky</a>
├─ <a href='act_details.html#act.ActorQLGYRO.nky'>nky</a>
├─ <a href='act_details.html#act.ActorQLGYRO.cpu_per_ky'>cpu_per_ky</a>
├─ <a href='act_details.html#act.ActorQLGYRO.kygrid_model'>kygrid_model</a>
├─ <a href='act_details.html#act.ActorQLGYRO.sat_rule'>sat_rule</a>
├─ <a href='act_details.html#act.ActorQLGYRO.n_field'>n_field</a>
├─ <a href='act_details.html#act.ActorQLGYRO.delta_t'>delta_t</a>
├─ <a href='act_details.html#act.ActorQLGYRO.max_time'>max_time</a>
├─ <a href='act_details.html#act.ActorQLGYRO.rho_transport'>rho_transport</a>
└─ <a href='act_details.html#act.ActorQLGYRO.lump_ions'>lump_ions</a>
</code></pre><h3 id="TGLF"><a class="docs-heading-anchor" href="#TGLF">TGLF</a><a id="TGLF-1"></a><a class="docs-heading-anchor-permalink" href="#TGLF" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorTGLF-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorTGLF-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorTGLF</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorTGLF(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Evaluates turbulent transport fluxes using TGLF-based models including TGLF, TGLFNN, GKNN, and TJLF.</p><p>Supported models:</p><ul><li><code>:TGLF</code>: Full TGLF gyrokinetic transport model</li><li><code>:TGLFNN</code>: Neural network surrogate of TGLF for fast evaluation</li><li><code>:GKNN</code>: Neural network surrogate with gyrokinetic fidelity</li><li><code>:TJLF</code>: Weiland model for ITG/TEM turbulence with adaptive spectral widths</li></ul><p>The actor creates input files for the selected model based on local plasma parameters, runs the transport calculation, and stores results as FluxSolution objects containing electron/ion energy fluxes, particle fluxes, and momentum flux. Results are normalized in gyro-Bohm units and written to <code>dd.core_transport</code> as anomalous transport.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/transport/tglf_actor.jl#L34-L49">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorTGLF</span>
├─ <a href='act_details.html#act.ActorTGLF.model'>model</a>
├─ <a href='act_details.html#act.ActorTGLF.onnx_model'>onnx_model</a>
├─ <a href='act_details.html#act.ActorTGLF.sat_rule'>sat_rule</a>
├─ <a href='act_details.html#act.ActorTGLF.electromagnetic'>electromagnetic</a>
├─ <a href='act_details.html#act.ActorTGLF.tglfnn_model'>tglfnn_model</a>
├─ <a href='act_details.html#act.ActorTGLF.rho_transport'>rho_transport</a>
├─ <a href='act_details.html#act.ActorTGLF.warn_nn_train_bounds'>warn_nn_train_bounds</a>
├─ <a href='act_details.html#act.ActorTGLF.custom_input_files'>custom_input_files</a>
├─ <a href='act_details.html#act.ActorTGLF.lump_ions'>lump_ions</a>
└─ <a href='act_details.html#act.ActorTGLF.save_input_tglfs_to_folder'>save_input_tglfs_to_folder</a>
</code></pre><h2 id="Wall-loading-(2-actors)"><a class="docs-heading-anchor" href="#Wall-loading-(2-actors)">Wall loading (2 actors)</a><a id="Wall-loading-(2-actors)-1"></a><a class="docs-heading-anchor-permalink" href="#Wall-loading-(2-actors)" title="Permalink"></a></h2><h3 id="CoreRadHeatFlux"><a class="docs-heading-anchor" href="#CoreRadHeatFlux">CoreRadHeatFlux</a><a id="CoreRadHeatFlux-1"></a><a class="docs-heading-anchor-permalink" href="#CoreRadHeatFlux" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorCoreRadHeatFlux-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorCoreRadHeatFlux-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorCoreRadHeatFlux</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorCoreRadHeatFlux(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Computes wall heat flux from core plasma radiation using Monte Carlo photon transport.</p><p>This actor calculates the heat flux deposited on plasma-facing components by electromagnetic radiation (bremsstrahlung, line radiation, synchrotron) emitted from the core plasma. Core radiation represents a significant fraction of total plasma power and directly impacts wall loading and cooling requirements.</p><p><strong>Physical Modeling:</strong></p><ul><li>Volume emission from all core radiation sources (impurity line radiation, bremsstrahlung)</li><li>Line-of-sight photon transport from emission location to wall intersection</li><li>Accounts for plasma opacity and absorption effects</li><li>Integration over entire plasma volume and all wall surfaces</li></ul><p><strong>Computational Method:</strong></p><ol><li><p><strong>Source Definition:</strong> Uses radiation source profiles from <code>dd.core_sources</code> including contributions from impurity radiation, bremsstrahlung, and other radiative losses</p></li><li><p><strong>Monte Carlo Transport:</strong> Launches statistical photons from emission locations with:</p><ul><li>Proper spatial weighting based on local radiation source strength</li><li>Random directional sampling to capture all emission angles</li><li>Line-of-sight transport to first wall intersection</li></ul></li><li><p><strong>Wall Deposition:</strong> Accumulates photon energy deposition on wall mesh elements, accounting for geometric factors and surface orientations</p></li></ol><p><strong>Key Outputs:</strong></p><ul><li><code>q_core_rad</code>: Heat flux on wall surface from core radiation transport</li><li>Statistical convergence based on number of photons traced (parameter N)</li><li>Wall mesh coordinates for spatial distribution analysis</li></ul><p>This calculation provides essential data for first wall and blanket thermal design, complementing particle heat flux calculations for comprehensive wall loading analysis.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/wall_loading/corerad_hf_actor.jl#L27-L62">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorCoreRadHeatFlux</span>
├─ <a href='act_details.html#act.ActorCoreRadHeatFlux.N'>N</a>
├─ <a href='act_details.html#act.ActorCoreRadHeatFlux.r'>r</a>  [m]
├─ <a href='act_details.html#act.ActorCoreRadHeatFlux.q'>q</a>  [W m⁻²]
├─ <a href='act_details.html#act.ActorCoreRadHeatFlux.levels'>levels</a>
├─ <a href='act_details.html#act.ActorCoreRadHeatFlux.merge_wall'>merge_wall</a>
├─ <a href='act_details.html#act.ActorCoreRadHeatFlux.step'>step</a>  [m]
└─ <a href='act_details.html#act.ActorCoreRadHeatFlux.do_plot'>do_plot</a>
</code></pre><h3 id="ParticleHeatFlux"><a class="docs-heading-anchor" href="#ParticleHeatFlux">ParticleHeatFlux</a><a id="ParticleHeatFlux-1"></a><a class="docs-heading-anchor-permalink" href="#ParticleHeatFlux" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FUSE.ActorParticleHeatFlux-Tuple{IMASdd.dd, FUSE.ParametersAllActors}" href="#FUSE.ActorParticleHeatFlux-Tuple{IMASdd.dd, FUSE.ParametersAllActors}"><code>FUSE.ActorParticleHeatFlux</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ActorParticleHeatFlux(dd::IMAS.dd, act::ParametersAllActors; kw...)</code></pre><p>Computes wall heat flux from charged particle transport across the scrape-off layer (SOL).</p><p>This actor calculates the heat flux deposited on plasma-facing components by charged particles (ions and electrons) flowing along magnetic field lines from the plasma edge to the wall. The calculation accounts for:</p><p><strong>Physical Modeling:</strong></p><ul><li>Parallel heat conduction along magnetic field lines in the SOL</li><li>Power density decay profiles from outer midplane to divertor/limiters</li><li>Geometric projection effects from field-line-following to wall-normal flux</li><li>Integration over the entire first wall and divertor surfaces</li></ul><p><strong>Computational Approach:</strong></p><ol><li>Creates a computational mesh of the first wall incorporating SOL flux surfaces</li><li>Traces open field lines from the separatrix to wall intersection points  </li><li>Applies prescribed power decay profiles along field lines</li><li>Computes both parallel (field-line-following) and perpendicular (wall-normal) heat fluxes</li></ol><p><strong>Key Outputs:</strong></p><ul><li><code>q_part</code>: Heat flux perpendicular to wall surface from particle transport</li><li><code>q_parallel</code>: Heat flux parallel to magnetic field lines  </li><li>Wall mesh coordinates and curvilinear distance along the wall</li></ul><p>The results provide essential input for material design, cooling system requirements, and component lifetime assessments in tokamak reactor studies.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/02c4a92ef7422f16ca80ceaabed11dff75512832/src/actors/wall_loading/particle_hf_actor.jl#L27-L55">source</a></section></article><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ActorParticleHeatFlux</span>
├─ <a href='act_details.html#act.ActorParticleHeatFlux.r'>r</a>  [m]
├─ <a href='act_details.html#act.ActorParticleHeatFlux.q'>q</a>  [W m⁻²]
├─ <a href='act_details.html#act.ActorParticleHeatFlux.levels'>levels</a>
├─ <a href='act_details.html#act.ActorParticleHeatFlux.merge_wall'>merge_wall</a>
├─ <a href='act_details.html#act.ActorParticleHeatFlux.step'>step</a>  [m]
└─ <a href='act_details.html#act.ActorParticleHeatFlux.do_plot'>do_plot</a>
</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="cases.html">« Use Cases</a><a class="docs-footer-nextpage" href="inits.html">Initialization »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.15.0 on <span class="colophon-date" title="Thursday 30 October 2025 03:36">Thursday 30 October 2025</span>. Using Julia version 1.12.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
