<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>on OMEGA · FUSE</title><meta name="title" content="on OMEGA · FUSE"/><meta property="og:title" content="on OMEGA · FUSE"/><meta property="twitter:title" content="on OMEGA · FUSE"/><meta name="description" content="Documentation for FUSE."/><meta property="og:description" content="Documentation for FUSE."/><meta property="twitter:description" content="Documentation for FUSE."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img class="docs-light-only" src="assets/logo.svg" alt="FUSE logo"/><img class="docs-dark-only" src="assets/logo-dark.svg" alt="FUSE logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="index.html">Concepts</a></li><li><a class="tocitem" href="dd.html">Data Structure</a></li><li><a class="tocitem" href="actors.html">Actors</a></li><li><span class="tocitem">Parameters</span><ul><li><a class="tocitem" href="ini.html">ini Parameters</a></li><li><a class="tocitem" href="act.html">act Parameters</a></li><li><a class="tocitem" href="cases.html">Use Cases</a></li><li><a class="tocitem" href="inits.html">Initialization</a></li></ul></li><li><a class="tocitem" href="examples.html">Examples</a></li><li><a class="tocitem" href="develop.html">Development</a></li><li><span class="tocitem">Install</span><ul><li><a class="tocitem" href="install.html">Install FUSE</a></li><li><a class="tocitem" href="install_saga.html">on SAGA</a></li><li class="is-active"><a class="tocitem" href="install_omega.html">on OMEGA</a><ul class="internal"><li><a class="tocitem" href="#Getting-started-on-the-OMEGA-cluster"><span>Getting started on the OMEGA cluster</span></a></li><li><a class="tocitem" href="#Jupyter-on-OMEGA-cluster"><span>Jupyter on OMEGA cluster</span></a></li><li><a class="tocitem" href="#Using-Revise-on-OMEGA"><span>Using Revise on OMEGA</span></a></li><li><a class="tocitem" href="#Using-GACODE-on-OMEGA-with-Julia"><span>Using GACODE on OMEGA with Julia</span></a></li></ul></li></ul></li><li><span class="tocitem">License</span><ul><li><a class="tocitem" href="license.html">License</a></li><li><a class="tocitem" href="notice.html">Notice</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Install</a></li><li class="is-active"><a href="install_omega.html">on OMEGA</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="install_omega.html">on OMEGA</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ProjectTorreyPines/FUSE.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/master/docs/src/install_omega.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h2 id="Getting-started-on-the-OMEGA-cluster"><a class="docs-heading-anchor" href="#Getting-started-on-the-OMEGA-cluster">Getting started on the OMEGA cluster</a><a id="Getting-started-on-the-OMEGA-cluster-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-started-on-the-OMEGA-cluster" title="Permalink"></a></h2><ol><li><p>Get a OMEGA account and ask to be added to the <code>ptp</code> UNIX group</p></li><li><p>Create a directory with your username under <code>/fusion/ga/projects/ird/ptp</code></p><pre><code class="nohighlight hljs">mkdir /fusion/ga/projects/ird/ptp/$USER</code></pre></li><li><p>Install miniconda</p><pre><code class="nohighlight hljs">cd /fusion/ga/projects/ird/ptp/$USER
wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
sh Miniconda3-latest-Linux-x86_64.sh</code></pre><p>read and accept the license, and install under <code>/fusion/ga/projects/ird/ptp/$USER/miniconda3</code>, answer questions, and restart your shell</p></li><li><p>install <code>mamba</code> for faster package management</p><pre><code class="nohighlight hljs">/fusion/ga/projects/ird/ptp/$USER/miniconda3/bin/conda install -c conda-forge mamba</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>We use the full <code>conda</code> path to avoid picking up the system <code>conda</code> install. There is no system-wide <code>mamba</code> executable, so that&#39;s not necessary when running <code>mamba</code>.</p></div></div></li><li><p>install <code>jupyterlab</code></p><pre><code class="nohighlight hljs">mamba install -c conda-forge jupyterlab</code></pre></li><li><p>Setup your environment to run CHEASE (optional)</p><pre><code class="nohighlight hljs">export PATH=$PATH:/fusion/ga/projects/ird/ptp/chease/src-f90</code></pre></li><li><p>Create a symbolic link from <code>/fusion/ga/projects/ird/ptp/$USER/julia/</code> to <code>~/.julia</code></p><pre><code class="nohighlight hljs">mkdir -p /fusion/ga/projects/ird/ptp/$USER/julia/dev
ln -s /fusion/ga/projects/ird/ptp/$USER/julia ~/.julia</code></pre><p><code>~/.julia</code> is where the Julia will install itself by default, and this will trick it to install itself in the IR&amp;D folder instead.</p><p>For convenience create also a symbolic link in your <code>$HOME</code> that points to the Julia <code>dev</code> folder:</p><pre><code class="nohighlight hljs">ln -s /fusion/ga/projects/ird/ptp/$USER/julia/dev ~/julia_dev</code></pre></li><li><p>Remove <code>module load defaults</code> from your <code>~/.bashrc</code> This module is used to run experimental tools like review+, efit_veiwer, etc... but it does not play well with the Julia executable. (alternatively you&#39;ll have to <code>module purge</code> or <code>module unload defaults</code>)</p></li><li><p>Now follow the standard Julia and FUSE installation instructions</p></li><li><p>Setup a multi-threaded Jupyter Julia kernel that does not take the whole login node</p><pre><code class="nohighlight hljs">cd ~/julia_dev/FUSE

export JULIA_NUM_THREADS=10
fusebot install_IJulia

export JULIA_NUM_THREADS=40
fusebot install_IJulia</code></pre><p>OMEGA login nodes are a shared resource. Each login node has 40 cores. This will setup a Jupyter Julia kernel with both 10 and 40 threads. Use 10 threads on login nodes and 40 threads on worker nodes.</p></li></ol><h2 id="Jupyter-on-OMEGA-cluster"><a class="docs-heading-anchor" href="#Jupyter-on-OMEGA-cluster">Jupyter on OMEGA cluster</a><a id="Jupyter-on-OMEGA-cluster-1"></a><a class="docs-heading-anchor-permalink" href="#Jupyter-on-OMEGA-cluster" title="Permalink"></a></h2><ol><li><p>Connect to <code>omega</code> and launch <code>screen</code></p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>You can re-connect to an existing <code>screen</code> session with <code>screen -r</code></p></div></div></li><li><p>For larger jobs especially, consider doing what follows on a login node. To do this (eg. a whole worker node of 40 cores for 4 days)</p><p><code>srun --partition=ga-ird --nodes=1 --time=4-00:00:00 --pty bash -l</code></p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Use the queue, time, cpu, and memory limits that make the most sense for your application see these <a href="https://fusionga.sharepoint.com/sites/Computing/SitePages/Omega.aspx#using-slurm-to-run-interactive-tasks%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B">instructions</a> for help</p></div></div></li><li><p>Then start the Jupyter lab server from the <code>screen</code> session (<code>screen</code> will keep <code>jupyter</code> running even when you log out)</p><pre><code class="nohighlight hljs">jupyter lab --no-browser --port 55667</code></pre><p>Copy the token that you see on this session it should look something like <code>token=1f1e0259cbc1..................</code></p></li><li><p>On your computer setup your <code>~/.ssh/config</code> this way (need to do this only once):</p><pre><code class="nohighlight hljs">Host cybele cybele.gat.com
Hostname cybele.gat.com
User meneghini
Port 2039

Host omegae omega.gat.com
Hostname omega.gat.com
User meneghini
ProxyCommand ssh -q cybele nc %h %p

# change XX to the worker node number you&#39;ve been assigned to
Host omegaXX omegaXX.gat.com
Hostname omegaXX.gat.com
User meneghini
ProxyCommand ssh -q cybele nc %h %p</code></pre></li><li><p>On your computer start a tunnel going through <code>cybele</code> to <code>omega</code></p><pre><code class="nohighlight hljs">ssh -N -L localhost:33445:localhost:55667 omegae</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Keep this terminal always open. You may need to re-issue this command whenever you put your laptop to sleep.</p></div></div></li><li><p>On your computer open a web browser tab to <code>localhost:33445</code> to connect to the Jupyter-lab session on <code>omega</code>. Use the token when prompted.</p></li></ol><h2 id="Using-Revise-on-OMEGA"><a class="docs-heading-anchor" href="#Using-Revise-on-OMEGA">Using Revise on OMEGA</a><a id="Using-Revise-on-OMEGA-1"></a><a class="docs-heading-anchor-permalink" href="#Using-Revise-on-OMEGA" title="Permalink"></a></h2><p>When working on omega it seems ones need to manually trigger revise to pick up code changes:</p><pre><code class="nohighlight hljs">import Revise
Revise.revise()  # manual trigger</code></pre><p>This is even if setting <a href="https://timholy.github.io/Revise.jl/stable/config/#Polling-and-NFS-mounted-code-directories:-JULIA_REVISE_POLL"><code>JULIA_REVISE_POLL=1</code></a></p><h2 id="Using-GACODE-on-OMEGA-with-Julia"><a class="docs-heading-anchor" href="#Using-GACODE-on-OMEGA-with-Julia">Using GACODE on OMEGA with Julia</a><a id="Using-GACODE-on-OMEGA-with-Julia-1"></a><a class="docs-heading-anchor-permalink" href="#Using-GACODE-on-OMEGA-with-Julia" title="Permalink"></a></h2><p>Julia may be incompatible with some environments and will crash when launched. This is the case for the GACODE environment on OMEGA. To be able to run both GACODE and Julia on OMEGA (eg. to run NEO and TGLF) do the following:</p><pre><code class="nohighlight hljs">module load atom
module unload gcc
module unload env</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="install_saga.html">« on SAGA</a><a class="docs-footer-nextpage" href="license.html">License »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Sunday 8 September 2024 02:36">Sunday 8 September 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
