<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>on OMEGA · FUSE</title><meta name="title" content="on OMEGA · FUSE"/><meta property="og:title" content="on OMEGA · FUSE"/><meta property="twitter:title" content="on OMEGA · FUSE"/><meta name="description" content="Documentation for FUSE."/><meta property="og:description" content="Documentation for FUSE."/><meta property="twitter:description" content="Documentation for FUSE."/><script async src="https://www.googletagmanager.com/gtag/js?id=G-65D8V8C8VQ"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-65D8V8C8VQ', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img class="docs-light-only" src="assets/logo.svg" alt="FUSE logo"/><img class="docs-dark-only" src="assets/logo-dark.svg" alt="FUSE logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="index.html">Main</a></li><li><span class="tocitem">Learn</span><ul><li><a class="tocitem" href="tutorial.html">Tutorial</a></li><li><a class="tocitem" href="examples.html">Examples</a></li><li><a class="tocitem" href="pubs.html">Publications</a></li></ul></li><li><a class="tocitem" href="cases.html">Use Cases</a></li><li><span class="tocitem">Actors</span><ul><li><a class="tocitem" href="actors.html">List of actors</a></li><li><a class="tocitem" href="act.html">act parameters</a></li></ul></li><li><span class="tocitem">Initialization</span><ul><li><a class="tocitem" href="inits.html">Init routines</a></li><li><a class="tocitem" href="ini.html">ini parameters</a></li></ul></li><li><a class="tocitem" href="dd.html">Data Structure</a></li><li><span class="tocitem">Development</span><ul><li><a class="tocitem" href="deps.html">Ecosystem</a></li><li><a class="tocitem" href="develop.html">Contributing</a></li></ul></li><li><span class="tocitem">Install</span><ul><li><a class="tocitem" href="install.html">Install FUSE</a></li><li><a class="tocitem" href="install_saga.html">on SAGA</a></li><li class="is-active"><a class="tocitem" href="install_omega.html">on OMEGA</a><ul class="internal"><li><a class="tocitem" href="#FUSE-module"><span>FUSE module</span></a></li><li><a class="tocitem" href="#Running-Julia/FUSE-via-VScode"><span>Running Julia/FUSE via VScode</span></a></li><li><a class="tocitem" href="#Connecting-to-a-Jupyter-lab-server-running-on-OMEGA"><span>Connecting to a Jupyter-lab server running on OMEGA</span></a></li><li><a class="tocitem" href="#Three-ways-to-run-parallel-jobs"><span>Three ways to run parallel jobs</span></a></li><li><a class="tocitem" href="#Using-Revise-on-Omega"><span>Using Revise on Omega</span></a></li><li><a class="tocitem" href="#Using-GACODE-on-Omega-with-Julia"><span>Using GACODE on Omega with Julia</span></a></li></ul></li></ul></li><li><span class="tocitem">License</span><ul><li><a class="tocitem" href="license.html">License</a></li><li><a class="tocitem" href="notice.html">Notice</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Install</a></li><li class="is-active"><a href="install_omega.html">on OMEGA</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="install_omega.html">on OMEGA</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ProjectTorreyPines/FUSE.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/master/docs/src/install_omega.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Public-FUSE-installation-on-GA&#39;s-Omega"><a class="docs-heading-anchor" href="#Public-FUSE-installation-on-GA&#39;s-Omega">Public FUSE installation on GA&#39;s Omega</a><a id="Public-FUSE-installation-on-GA&#39;s-Omega-1"></a><a class="docs-heading-anchor-permalink" href="#Public-FUSE-installation-on-GA&#39;s-Omega" title="Permalink"></a></h1><h2 id="FUSE-module"><a class="docs-heading-anchor" href="#FUSE-module">FUSE module</a><a id="FUSE-module-1"></a><a class="docs-heading-anchor-permalink" href="#FUSE-module" title="Permalink"></a></h2><p>If you only intend to use FUSE and don&#39;t plan to develop the source code, release versions of FUSE have been installed on the Omega cluster. All available versions can be found with <code>module avail fuse</code>. To load the latest version, do:</p><pre><code class="nohighlight hljs">module load fuse</code></pre><p>Once the module is loaded, you can start Julia at the terminal and import the FUSE module.</p><h2 id="Running-Julia/FUSE-via-VScode"><a class="docs-heading-anchor" href="#Running-Julia/FUSE-via-VScode">Running Julia/FUSE via VScode</a><a id="Running-Julia/FUSE-via-VScode-1"></a><a class="docs-heading-anchor-permalink" href="#Running-Julia/FUSE-via-VScode" title="Permalink"></a></h2><p>The simplest way to start using FUSE is with <a href="https://code.visualstudio.com/docs/remote/ssh-tutorial">VScode and remote SHH connection</a> to Omega.</p><p>To do this:</p><ul><li><p>Open a remote connection to Omega</p></li><li><p>Install the <code>Julia</code> and the <code>Jupyter</code> VScode extensions in on Omega</p></li><li><p>Open the <code>Code &gt; Settings... &gt; Settings</code> menu</p><ul><li><p>Select the <code>Remote [SSH: omega]</code> tab</p></li><li><p>Search for <code>julia executable</code> in the search bar</p></li><li><p>Edit the <code>julia: Executable Path</code> to <code>/fusion/projects/codes/julia/fuse/julia_with_fuse</code></p></li></ul></li></ul><p>Now Julia scripts and notebooks can be run directly from this remote VScode session.</p><h2 id="Connecting-to-a-Jupyter-lab-server-running-on-OMEGA"><a class="docs-heading-anchor" href="#Connecting-to-a-Jupyter-lab-server-running-on-OMEGA">Connecting to a Jupyter-lab server running on OMEGA</a><a id="Connecting-to-a-Jupyter-lab-server-running-on-OMEGA-1"></a><a class="docs-heading-anchor-permalink" href="#Connecting-to-a-Jupyter-lab-server-running-on-OMEGA" title="Permalink"></a></h2><ol><li><p>Connect to <code>omega</code> and launch <code>screen</code></p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>You can re-connect to an existing <code>screen</code> session with <code>screen -r</code></p></div></div></li><li><p><strong>If (and only if) you want to run jupyter-lab on a worker node</strong> do as follows:</p><p><code>srun --partition=ga-ird --nodes=1 --time=4-00:00:00 --pty bash -l</code></p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Use the queue, time, CPU, and memory limits that make the most sense for your application see these <a href="https://fusionga.sharepoint.com/sites/Computing/SitePages/Omega.aspx#using-slurm-to-run-interactive-tasks%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B%E2%80%8B">instructions</a> for help</p></div></div></li><li><p>Then start the Jupyter lab server from the <code>screen</code> session (<code>screen</code> will keep <code>jupyter</code> running even when you log out)</p><pre><code class="nohighlight hljs">jupyter lab --no-browser --port 55667</code></pre><p>Copy the token that you see on this session it should look something like <code>token=1f1e0259cbc1..................</code></p></li><li><p>On your computer setup your <code>~/.ssh/config</code> this way (need to do this only once):</p><pre><code class="nohighlight hljs">Host cybele cybele.gat.com
Hostname cybele.gat.com
User meneghini
Port 2039

Host omegae omega.gat.com
Hostname omega.gat.com
User meneghini
ProxyCommand ssh -q cybele nc %h %p

# change XX to the worker node number you&#39;ve been assigned to
Host omegaXX omegaXX.gat.com
Hostname omegaXX.gat.com
User meneghini
ProxyCommand ssh -q cybele nc %h %p</code></pre></li><li><p>On your computer start a tunnel going through <code>cybele</code> to <code>omega</code></p><pre><code class="nohighlight hljs">ssh -N -L localhost:33445:localhost:55667 omegae</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Keep this terminal always open. You may need to re-issue this command whenever you put your laptop to sleep.</p></div></div></li><li><p>On your computer open a web browser tab to <code>localhost:33445</code> to connect to the Jupyter-lab session on <code>omega</code>. Use the token when prompted.</p></li></ol><h2 id="Three-ways-to-run-parallel-jobs"><a class="docs-heading-anchor" href="#Three-ways-to-run-parallel-jobs">Three ways to run parallel jobs</a><a id="Three-ways-to-run-parallel-jobs-1"></a><a class="docs-heading-anchor-permalink" href="#Three-ways-to-run-parallel-jobs" title="Permalink"></a></h2><p>Keep in mind that each worker node on Omega has 128 CPUs</p><ol><li><p>Screen + Jupyter on the login node, workers on the worker nodes</p><p>OK when the master process will not be doing a lot of work, and we need multiple nodes</p><p>Here we will use the <code>FUSE.parallel_environment(&quot;omega&quot;, ...)</code> call.</p></li><li><p>Screen on the login node, Jupyter and workers on one worker node</p><p>OK when the master process will be doing a lot of work, and we don&#39;t need more than one node</p><p>Here we will use the <code>FUSE.parallel_environment(&quot;localhost&quot;, ...)</code> call.</p></li><li><p>Screen on the login node, Jupyter on a worker node, workers on different worker nodes</p><p>OK when the master process will be doing a lot of work, and we need multiple nodes</p><p>This is more complex, and finicky. Avoid if possible.</p><p>Here we will use the <code>FUSE.parallel_environment(&quot;omega&quot;, ...)</code> call.</p></li></ol><h2 id="Using-Revise-on-Omega"><a class="docs-heading-anchor" href="#Using-Revise-on-Omega">Using Revise on Omega</a><a id="Using-Revise-on-Omega-1"></a><a class="docs-heading-anchor-permalink" href="#Using-Revise-on-Omega" title="Permalink"></a></h2><p>When working on omega it seems ones need to manually trigger revise to pick up code changes:</p><pre><code class="nohighlight hljs">import Revise
Revise.revise()  # manual trigger</code></pre><p>This is even if setting <a href="https://timholy.github.io/Revise.jl/stable/config/#Polling-and-NFS-mounted-code-directories:-JULIA_REVISE_POLL"><code>JULIA_REVISE_POLL=1</code></a></p><h2 id="Using-GACODE-on-Omega-with-Julia"><a class="docs-heading-anchor" href="#Using-GACODE-on-Omega-with-Julia">Using GACODE on Omega with Julia</a><a id="Using-GACODE-on-Omega-with-Julia-1"></a><a class="docs-heading-anchor-permalink" href="#Using-GACODE-on-Omega-with-Julia" title="Permalink"></a></h2><p>Julia may be incompatible with some environments and will crash when launched. This is the case for the GACODE environment on Omega. To be able to run both GACODE and Julia on Omega (eg. to run NEO and TGLF) do the following:</p><pre><code class="nohighlight hljs">module load atom
module unload gcc
module unload env</code></pre><h3 id="How-the-public-installation-of-FUSE-works"><a class="docs-heading-anchor" href="#How-the-public-installation-of-FUSE-works">How the public installation of FUSE works</a><a id="How-the-public-installation-of-FUSE-works-1"></a><a class="docs-heading-anchor-permalink" href="#How-the-public-installation-of-FUSE-works" title="Permalink"></a></h3><p>The FUSE unix module <code>module load fuse</code> does several things:</p><ol><li><p>The <code>julia</code> unix module is loaded, which gives you access to a public Julia installation with your own private &quot;depot&quot; in which each user can add or develop their own packages. The location of this private depot is given by the environment variable <code>JULIA_USER_DEPOT</code>.</p></li><li><p>The FUSE codebase has been precompiled and made available to Julia via a <a href="https://julialang.github.io/PackageCompiler.jl/dev/sysimages.html">sysimage</a>. This greatly reduces the time-to-first-execution (TTFX) for many functions in the FUSE code suite, at the expense of &quot;locking&quot; those packages and functions to the versions with which they were compiled.</p></li><li><p>FUSE is already available when you launch Julia, so there&#39;s no need to do <code>Pkg.add(&quot;FUSE&quot;)</code>. You can simply do <code>using FUSE</code> and being working.</p></li><li><p>A custom conda installation is made available to you that has Jupyter notebooks with precompiled Julia kernels that include the FUSE sysimage. You can just do <code>jupyter lab</code> to start a Jupyter session and select the desired kernels. There is a kernel with 10 threads meant for the login nodes and one with 40 threads meant for the worker nodes.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p><strong>Problem</strong>: There&#39;s a bug that occurs when a new user first launches one of these Julia + FUSE Jupyter kernels. In your terminal, you will see output about precompiling IJulia, which is expected. Once the precompilation is done, it will report <code>Starting kernel event loops</code> but then the kernel may hang and your notebook may not work. It is unclear why this happens, but it is only the first time for each user.</p><p><strong>Solution</strong>: Restart the kernel. Occasionally this needs to be done twice, perhaps if you restart too quickly and the precompilation was not finished. In any case, if the problem does not resolve after restarting the kernel twice, reach out to the FUSE developers.</p></div></div></li></ol></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="install_saga.html">« on SAGA</a><a class="docs-footer-nextpage" href="license.html">License »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.10.1 on <span class="colophon-date" title="Tuesday 1 April 2025 03:45">Tuesday 1 April 2025</span>. Using Julia version 1.11.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
