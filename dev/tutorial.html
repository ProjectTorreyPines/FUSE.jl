<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Tutorial Â· FUSE</title><meta name="title" content="Tutorial Â· FUSE"/><meta property="og:title" content="Tutorial Â· FUSE"/><meta property="twitter:title" content="Tutorial Â· FUSE"/><meta name="description" content="Documentation for FUSE."/><meta property="og:description" content="Documentation for FUSE."/><meta property="twitter:description" content="Documentation for FUSE."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img class="docs-light-only" src="assets/logo.svg" alt="FUSE logo"/><img class="docs-dark-only" src="assets/logo-dark.svg" alt="FUSE logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="index.html">Concepts</a></li><li><a class="tocitem" href="dd.html">Data Structure</a></li><li><a class="tocitem" href="actors.html">Actors</a></li><li><span class="tocitem">Parameters</span><ul><li><a class="tocitem" href="ini.html">ini Parameters</a></li><li><a class="tocitem" href="act.html">act Parameters</a></li><li><a class="tocitem" href="cases.html">Use Cases</a></li><li><a class="tocitem" href="inits.html">Initialization</a></li></ul></li><li><a class="tocitem" href="examples.html">Examples</a></li><li class="is-active"><a class="tocitem" href="tutorial.html">Tutorial</a><ul class="internal"><li><a class="tocitem" href="#Starting-from-a-use-case"><span>Starting from a use-case</span></a></li><li><a class="tocitem" href="#Exploring-the-data-dictionary"><span>Exploring the data dictionary</span></a></li><li><a class="tocitem" href="#Plotting-data-from-dd"><span>Plotting data from <code>dd</code></span></a></li><li><a class="tocitem" href="#Working-with-time-series"><span>Working with time series</span></a></li><li><a class="tocitem" href="#Expressions-and-consistency-in-IMAS-data"><span>Expressions and consistency in IMAS data</span></a></li><li><a class="tocitem" href="#Whole-facility-design"><span>Whole facility design</span></a></li><li><a class="tocitem" href="#Running-a-custom-workflow"><span>Running a custom workflow</span></a></li><li><a class="tocitem" href="#Saving-and-loading-data"><span>Saving and loading data</span></a></li><li><a class="tocitem" href="#Comparing-two-IDSs"><span>Comparing two IDSs</span></a></li><li><a class="tocitem" href="#Summary"><span>Summary</span></a></li></ul></li><li><a class="tocitem" href="develop.html">Development</a></li><li><span class="tocitem">Install</span><ul><li><a class="tocitem" href="install.html">Install FUSE</a></li><li><a class="tocitem" href="install_saga.html">on SAGA</a></li><li><a class="tocitem" href="install_omega.html">on OMEGA</a></li></ul></li><li><span class="tocitem">License</span><ul><li><a class="tocitem" href="license.html">License</a></li><li><a class="tocitem" href="notice.html">Notice</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="tutorial.html">Tutorial</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="tutorial.html">Tutorial</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ProjectTorreyPines/FUSE.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands">ï‚›</span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/master/docs/src/tutorial.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid">ï„</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="FUSE-Introductory-Tutorial"><a class="docs-heading-anchor" href="#FUSE-Introductory-Tutorial">FUSE Introductory Tutorial</a><a id="FUSE-Introductory-Tutorial-1"></a><a class="docs-heading-anchor-permalink" href="#FUSE-Introductory-Tutorial" title="Permalink"></a></h1><p>Import the necessary packages</p><pre><code class="language-julia hljs">using Plots
using FUSE</code></pre><h2 id="Starting-from-a-use-case"><a class="docs-heading-anchor" href="#Starting-from-a-use-case">Starting from a use-case</a><a id="Starting-from-a-use-case-1"></a><a class="docs-heading-anchor-permalink" href="#Starting-from-a-use-case" title="Permalink"></a></h2><p>Here, we start by picking from one of the existing test cases. Note: Some test cases are for non-nuclear experiments. In those cases, certain Actors like Blankets or BalanceOfPlant will not perform any actions.</p><pre><code class="language-julia hljs">FUSE.test_cases</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">ARC         </span>   ini, act = FUSE.case_parameters(:ARC)
<span class="sgr1">CAT         </span>   ini, act = FUSE.case_parameters(:CAT)
<span class="sgr1">D3D         </span>   ini, act = FUSE.case_parameters(:D3D; scenario=:default)
<span class="sgr1">D3D_Hmode   </span>   ini, act = FUSE.case_parameters(:D3D; use_ods_sources=true, scenario=:H_mode)
<span class="sgr1">D3D_Lmode   </span>   ini, act = FUSE.case_parameters(:D3D; use_ods_sources=false, scenario=:L_mode)
<span class="sgr1">DTT         </span>   ini, act = FUSE.case_parameters(:DTT)
<span class="sgr1">EXCITE      </span>   ini, act = FUSE.case_parameters(:EXCITE)
<span class="sgr1">FPP         </span>   ini, act = FUSE.case_parameters(:FPP)
<span class="sgr1">ITER_ods    </span>   ini, act = FUSE.case_parameters(:ITER; init_from=:ods)
<span class="sgr1">ITER_scalars</span>   ini, act = FUSE.case_parameters(:ITER; init_from=:scalars)
<span class="sgr1">JET_HDB5    </span>   ini, act = FUSE.case_parameters(:HDB5; case=500, tokamak=:JET)
<span class="sgr1">KDEMO       </span>   ini, act = FUSE.case_parameters(:KDEMO)
<span class="sgr1">MANTA       </span>   ini, act = FUSE.case_parameters(:MANTA)
<span class="sgr1">SPARC       </span>   ini, act = FUSE.case_parameters(:SPARC)
</code></pre><p>Get initial parameters (<code>ini</code>) and actions (<code>act</code>) for a given use-case</p><pre><code class="language-julia hljs">ini, act = FUSE.case_parameters(:KDEMO);</code></pre><p>Modifying <code>ini</code> parameters</p><pre><code class="language-julia hljs">ini.equilibrium.B0 = 7.8
ini.equilibrium.R0 = 6.5
ini.equilibrium</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">equilibrium</span>
â”œâ”€ Â©ini.equilibrium.B0Â©Â©B0Â©  [T]
â”œâ”€ Â©ini.equilibrium.R0Â©Â©R0Â©  [m]
â”œâ”€ Â©ini.equilibrium.Z0Â©Â©Z0Â©  [m]
â”œâ”€ Â©ini.equilibrium.ÏµÂ©Â©ÏµÂ©
â”œâ”€ Â©ini.equilibrium.ÎºÂ©Â©ÎºÂ©
â”œâ”€ Â©ini.equilibrium.tiltÂ©Â©tiltÂ©
â”œâ”€ Â©ini.equilibrium.Î´Â©Â©Î´Â©
â”œâ”€ Â©ini.equilibrium.Î¶Â©Â©Î¶Â©
â”œâ”€ Â©ini.equilibrium.ğš¶Â©Â©ğš¶Â©
â”œâ”€ Â©ini.equilibrium.twistÂ©Â©twistÂ©
â”œâ”€ Â©ini.equilibrium.pressure_coreÂ©Â©pressure_coreÂ©  [Pa]
â”œâ”€ Â©ini.equilibrium.ipÂ©Â©ipÂ©  [A]
â”œâ”€ Â©ini.equilibrium.xpointsÂ©Â©xpointsÂ©
â”œâ”€ Â©ini.equilibrium.ngridÂ©Â©ngridÂ©
â”œâ”€ Â©ini.equilibrium.field_null_surfaceÂ©Â©field_null_surfaceÂ©
â”œâ”€ Â©ini.equilibrium.boundary_fromÂ©Â©boundary_fromÂ©
â”œâ”€ Â©ini.equilibrium.MXH_paramsÂ©Â©MXH_paramsÂ©
â””â”€ Â©ini.equilibrium.rz_pointsÂ©Â©rz_pointsÂ©  [m]
</code></pre><p>Modifying <code>act</code> parameters</p><pre><code class="language-julia hljs">act.ActorCoreTransport.model = :FluxMatcher</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">:FluxMatcher</code></pre><p>Initialize the data dictionary (<code>dd</code>) using the 0D parameters</p><pre><code class="language-julia hljs">dd = FUSE.init(ini, act);

# Using checkpoints to save and restore states (we&#39;ll use this later)
chk = FUSE.Checkpoint()
chk[:init] = dd, ini, act;</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">actors: Equilibrium
actors:  TEQUILA
actors: HCD
actors:  SimpleEC
actors:  SimpleIC
actors:  SimpleLH
actors:  SimpleNB
actors:  SimplePellet
actors: Current
actors:  SteadyStateCurrent
actors: CXbuild</code></pre><h2 id="Exploring-the-data-dictionary"><a class="docs-heading-anchor" href="#Exploring-the-data-dictionary">Exploring the data dictionary</a><a id="Exploring-the-data-dictionary-1"></a><a class="docs-heading-anchor-permalink" href="#Exploring-the-data-dictionary" title="Permalink"></a></h2><ul><li>FUSE stores data following the IMAS data schema.</li><li>The root of the data structure is <code>dd</code>, which stands for &quot;Data Dictionary&quot;.</li><li>More details are available in the <a href="https://fuse.help/stable/dd.html">documentation</a>.</li></ul><p>Display part of the equilibrium data in <code>dd</code></p><pre><code class="language-julia hljs">dd.equilibrium.time_slice[2].boundary</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">boundary</span>
â”œâ”€ elongation<span class="sgr31"> â¡ 1.85224</span>
â”œâ”€ elongation_lower<span class="sgr31"> â¡ </span><span class="sgr34">Function</span>
â”œâ”€ elongation_upper<span class="sgr31"> â¡ </span><span class="sgr34">Function</span>
â”œâ”€ <span class="sgr1">geometric_axis</span>
â”‚  â”œâ”€ r<span class="sgr31"> â¡ 6.49979<span class="sgr1"> [m]</span></span>
â”‚  â””â”€ z<span class="sgr31"> â¡ -0.0310891<span class="sgr1"> [m]</span></span>
â”œâ”€ minor_radius<span class="sgr31"> â¡ 2.00733<span class="sgr1"> [m]</span></span>
â”œâ”€ <span class="sgr1">outline</span>
â”‚  â”œâ”€ r<span class="sgr31"> â¡ </span><span class="sgr32">249-element Vector{Float64}<span class="sgr1"> [m]</span></span>
â”‚  â””â”€ z<span class="sgr31"> â¡ </span><span class="sgr32">249-element Vector{Float64}<span class="sgr1"> [m]</span></span>
â”œâ”€ ovality<span class="sgr31"> â¡ 0.00757888</span>
â”œâ”€ squareness<span class="sgr31"> â¡ -0.018488</span>
â”œâ”€ squareness_lower_inner<span class="sgr31"> â¡ </span><span class="sgr34">Function</span>
â”œâ”€ squareness_lower_outer<span class="sgr31"> â¡ </span><span class="sgr34">Function</span>
â”œâ”€ squareness_upper_inner<span class="sgr31"> â¡ </span><span class="sgr34">Function</span>
â”œâ”€ squareness_upper_outer<span class="sgr31"> â¡ </span><span class="sgr34">Function</span>
â”œâ”€ <span class="sgr1">strike_point</span>
â”‚  â””â”€ <span class="sgr1">1</span>
â”‚     â”œâ”€ r<span class="sgr31"> â¡ 5.62747<span class="sgr1"> [m]</span></span>
â”‚     â””â”€ z<span class="sgr31"> â¡ -4.69103<span class="sgr1"> [m]</span></span>
â”œâ”€ tilt<span class="sgr31"> â¡ -0.00805605</span>
â”œâ”€ triangularity<span class="sgr31"> â¡ 0.481243</span>
â”œâ”€ triangularity_lower<span class="sgr31"> â¡ </span><span class="sgr34">Function</span>
â”œâ”€ triangularity_upper<span class="sgr31"> â¡ </span><span class="sgr34">Function</span>
â”œâ”€ twist<span class="sgr31"> â¡ -0.0101106</span>
â””â”€ <span class="sgr1">x_point</span>
   â”œâ”€ <span class="sgr1">1</span>
   â”‚  â”œâ”€ r<span class="sgr31"> â¡ 5.25721<span class="sgr1"> [m]</span></span>
   â”‚  â””â”€ z<span class="sgr31"> â¡ -3.77932<span class="sgr1"> [m]</span></span>
   â””â”€ <span class="sgr1">2</span>
      â”œâ”€ r<span class="sgr31"> â¡ 4.97495<span class="sgr1"> [m]</span></span>
      â””â”€ z<span class="sgr31"> â¡ 4.07086<span class="sgr1"> [m]</span></span>
</code></pre><p>Understanding the IMAS structure <code>dd</code> and its fields, such as <code>dd.equilibrium</code>, are instances of Julia structs defined in the <code>IMAS.jl</code> package.</p><pre><code class="language-julia hljs">IMAS.equilibrium__time_slice___boundary</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">boundary</span>
â”œâ”€ <span class="sgr1">active_limiter_point</span>
â”‚  â”œâ”€ Â©equilibrium.time_slice[:].boundary.active_limiter_point.rÂ©Â©rÂ© [m]
â”‚  â””â”€ Â©equilibrium.time_slice[:].boundary.active_limiter_point.zÂ©Â©zÂ© [m]
â”œâ”€ Â©equilibrium.time_slice[:].boundary.elongationÂ©Â©elongationÂ©
â”œâ”€ Â©equilibrium.time_slice[:].boundary.elongation_lowerÂ©Â©elongation_lowerÂ©
â”œâ”€ Â©equilibrium.time_slice[:].boundary.elongation_upperÂ©Â©elongation_upperÂ©
â”œâ”€ <span class="sgr1">geometric_axis</span>
â”‚  â”œâ”€ Â©equilibrium.time_slice[:].boundary.geometric_axis.rÂ©Â©rÂ© [m]
â”‚  â””â”€ Â©equilibrium.time_slice[:].boundary.geometric_axis.zÂ©Â©zÂ© [m]
â”œâ”€ Â©equilibrium.time_slice[:].boundary.minor_radiusÂ©Â©minor_radiusÂ© [m]
â”œâ”€ <span class="sgr1">outline</span>
â”‚  â”œâ”€ Â©equilibrium.time_slice[:].boundary.outline.rÂ©Â©rÂ© [m]
â”‚  â””â”€ Â©equilibrium.time_slice[:].boundary.outline.zÂ©Â©zÂ© [m]
â”œâ”€ Â©equilibrium.time_slice[:].boundary.ovalityÂ©Â©ovalityÂ©
â”œâ”€ Â©equilibrium.time_slice[:].boundary.psiÂ©Â©psiÂ© [Wb]
â”œâ”€ Â©equilibrium.time_slice[:].boundary.psi_normÂ©Â©psi_normÂ©
â”œâ”€ Â©equilibrium.time_slice[:].boundary.squarenessÂ©Â©squarenessÂ©
â”œâ”€ Â©equilibrium.time_slice[:].boundary.squareness_lower_innerÂ©Â©squareness_lower_innerÂ©
â”œâ”€ Â©equilibrium.time_slice[:].boundary.squareness_lower_outerÂ©Â©squareness_lower_outerÂ©
â”œâ”€ Â©equilibrium.time_slice[:].boundary.squareness_upper_innerÂ©Â©squareness_upper_innerÂ©
â”œâ”€ Â©equilibrium.time_slice[:].boundary.squareness_upper_outerÂ©Â©squareness_upper_outerÂ©
â”œâ”€ <span class="sgr1">strike_point[:]</span>
â”‚  â”œâ”€ Â©equilibrium.time_slice[:].boundary.strike_point[:].rÂ©Â©rÂ© [m]
â”‚  â””â”€ Â©equilibrium.time_slice[:].boundary.strike_point[:].zÂ©Â©zÂ© [m]
â”œâ”€ Â©equilibrium.time_slice[:].boundary.tiltÂ©Â©tiltÂ©
â”œâ”€ Â©equilibrium.time_slice[:].boundary.triangularityÂ©Â©triangularityÂ©
â”œâ”€ Â©equilibrium.time_slice[:].boundary.triangularity_lowerÂ©Â©triangularity_lowerÂ©
â”œâ”€ Â©equilibrium.time_slice[:].boundary.triangularity_upperÂ©Â©triangularity_upperÂ©
â”œâ”€ Â©equilibrium.time_slice[:].boundary.twistÂ©Â©twistÂ©
â”œâ”€ Â©equilibrium.time_slice[:].boundary.typeÂ©Â©typeÂ©
â””â”€ <span class="sgr1">x_point[:]</span>
   â”œâ”€ Â©equilibrium.time_slice[:].boundary.x_point[:].rÂ©Â©rÂ© [m]
   â””â”€ Â©equilibrium.time_slice[:].boundary.x_point[:].zÂ©Â©zÂ© [m]
</code></pre><h2 id="Plotting-data-from-dd"><a class="docs-heading-anchor" href="#Plotting-data-from-dd">Plotting data from <code>dd</code></a><a id="Plotting-data-from-dd-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting-data-from-dd" title="Permalink"></a></h2><p>FUSE provides Plots.jl recipes for visualizing data from <code>dd</code>, this means different plots are shown by calling the same <code>plot()</code> function on different items in the data structure. Learn more about Plots.jl <a href="https://docs.juliaplots.org">here</a></p><p>For example plotting the equilibrium...</p><pre><code class="language-julia hljs">plot(dd.equilibrium)</code></pre><img src="tutorial-6078e2e2.svg" alt="Example block output"/><p>...or the core profiles</p><pre><code class="language-julia hljs">plot(dd.core_profiles)</code></pre><img src="tutorial-c6a7e88c.svg" alt="Example block output"/><p>These plots can be composed by calling <code>plot!()</code> instead of <code>plot()</code></p><pre><code class="language-julia hljs">plot(dd.equilibrium; color=:gray, cx=true)
plot!(dd.build; equilibrium=false, pf_active=false)
plot!(dd.pf_active)</code></pre><img src="tutorial-60e2bffa.svg" alt="Example block output"/><p>Plotting an array...</p><pre><code class="language-julia hljs">plot(dd.core_profiles.profiles_1d[1].pressure_thermal)</code></pre><img src="tutorial-f53c9734.svg" alt="Example block output"/><p>...is different from plotting a field from the IDS</p><pre><code class="language-julia hljs">plot(dd.core_profiles.profiles_1d[1], :pressure_thermal)</code></pre><img src="tutorial-13567b9d.svg" alt="Example block output"/><p>Customizing plot attributes:</p><pre><code class="language-julia hljs">plot(dd.core_profiles.profiles_1d[1], :pressure_thermal; label=&quot;&quot;, linewidth=2, color=:red, labelfontsize=25)</code></pre><img src="tutorial-8b7951c6.svg" alt="Example block output"/><h2 id="Working-with-time-series"><a class="docs-heading-anchor" href="#Working-with-time-series">Working with time series</a><a id="Working-with-time-series-1"></a><a class="docs-heading-anchor-permalink" href="#Working-with-time-series" title="Permalink"></a></h2><p>The IMAS data structure supports time-dependent data, and IMAS.jl provides ways to handle time data efficiently.</p><p>Each <code>dd</code> has a global time defined. Most actors operate at the time defined by the <code>dd.global_time</code></p><pre><code class="language-julia hljs">dd.global_time</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">0.0</code></pre><p>Here we see that equilibrium has mulitiple time_slices</p><pre><code class="language-julia hljs">dd.equilibrium.time</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">2-element Vector{Float64}:
 -Inf
   0.0</code></pre><p>Accessing time-dependent arrays of structures, via integer index</p><pre><code class="language-julia hljs">eqt = dd.equilibrium.time_slice[2]
eqt.time</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">0.0</code></pre><p>At a given time, by passing the time as a floating point number (in seconds)</p><pre><code class="language-julia hljs">eqt = dd.equilibrium.time_slice[0.0]
eqt.time</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">0.0</code></pre><p>At the global time, leaving the square brackets empty</p><pre><code class="language-julia hljs">eqt = dd.equilibrium.time_slice[]
eqt.time</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">0.0</code></pre><p>Using the <code>@ddtime</code> macro to access and modify time-dependent arrays at <code>dd.global_time</code>:</p><pre><code class="language-julia hljs">dd.equilibrium.vacuum_toroidal_field.b0</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">2-element Vector{Float64}:
 7.800247146670339
 7.800247146670339</code></pre><p>Accessing data at <code>dd.global_time</code></p><pre><code class="language-julia hljs">my_b0 = @ddtime(dd.equilibrium.vacuum_toroidal_field.b0)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">7.800247146670339</code></pre><p>Writin data at <code>dd.global_time</code></p><pre><code class="language-julia hljs">@ddtime(dd.equilibrium.vacuum_toroidal_field.b0 = my_b0 + 1)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">8.800247146670339</code></pre><pre><code class="language-julia hljs">dd.equilibrium.vacuum_toroidal_field.b0</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">2-element Vector{Float64}:
 7.800247146670339
 8.800247146670339</code></pre><h2 id="Expressions-and-consistency-in-IMAS-data"><a class="docs-heading-anchor" href="#Expressions-and-consistency-in-IMAS-data">Expressions and consistency in IMAS data</a><a id="Expressions-and-consistency-in-IMAS-data-1"></a><a class="docs-heading-anchor-permalink" href="#Expressions-and-consistency-in-IMAS-data" title="Permalink"></a></h2><p>Some fields in the data dictionary are expressions (ie. Functions), that are dynamically evaluated upon access</p><pre><code class="language-julia hljs">print_tree(dd.core_profiles.profiles_1d[1]; maxdepth=1)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">1
â”œâ”€ conductivity_parallel â¡ Function [ohm^-1.m^-1]
â”œâ”€ electrons
â”‚  â‹®
â”‚
â”œâ”€ grid
â”‚  â‹®
â”‚
â”œâ”€ ion
â”‚  â‹®
â”‚
â”œâ”€ j_bootstrap â¡ 101-element Vector{Float64} [A/m^2]
â”œâ”€ j_non_inductive â¡ 101-element Vector{Float64} [A/m^2]
â”œâ”€ j_ohmic â¡ 101-element Vector{Float64} [A/m^2]
â”œâ”€ j_tor â¡ 101-element Vector{Float64} [A/m^2]
â”œâ”€ j_total â¡ 101-element Vector{Float64} [A/m^2]
â”œâ”€ pressure â¡ Function [Pa]
â”œâ”€ pressure_ion_total â¡ Function [Pa]
â”œâ”€ pressure_parallel â¡ Function [Pa]
â”œâ”€ pressure_perpendicular â¡ Function [Pa]
â”œâ”€ pressure_thermal â¡ Function [Pa]
â”œâ”€ rotation_frequency_tor_sonic â¡ 101-element Vector{Float64} [s^-1] (all 0.0)
â”œâ”€ t_i_average â¡ Function [eV]
â”œâ”€ time â¡ 0 [s]
â””â”€ zeff â¡ 101-element Vector{Float64} (all 2.0)</code></pre><p>for example, pressure is dynamically calculated as the product of thermal densities and temperature with addition of fast ions contributions</p><pre><code class="language-julia hljs">dd.core_profiles.profiles_1d[1].electrons.pressure</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">101-element Vector{Float64}:
 284375.2125886907
 283397.30223886797
 282356.99772388494
 281205.49640043103
 279941.9161095625
 278568.8607805563
 277089.6046854088
 275507.4949598844
 273825.794590293
 272047.64504321286
      â‹®
  34362.16359202213
  32737.31280383293
  30277.538369869362
  26223.34434357597
  19992.176814792256
  12140.417971800338
   5396.998192214248
   1643.6281280261637
    203.1251518490587</code></pre><p>Expressions in the tree can be evaluated using <code>IMAS.freeze()</code></p><pre><code class="language-julia hljs">print_tree(IMAS.freeze(dd.core_profiles.profiles_1d[1]); maxdepth=1)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">profiles_1d
â”œâ”€ conductivity_parallel â¡ 101-element Vector{Float64} [ohm^-1.m^-1]
â”œâ”€ electrons
â”‚  â‹®
â”‚
â”œâ”€ grid
â”‚  â‹®
â”‚
â”œâ”€ ion
â”‚  â‹®
â”‚
â”œâ”€ j_bootstrap â¡ 101-element Vector{Float64} [A/m^2]
â”œâ”€ j_non_inductive â¡ 101-element Vector{Float64} [A/m^2]
â”œâ”€ j_ohmic â¡ 101-element Vector{Float64} [A/m^2]
â”œâ”€ j_tor â¡ 101-element Vector{Float64} [A/m^2]
â”œâ”€ j_total â¡ 101-element Vector{Float64} [A/m^2]
â”œâ”€ pressure â¡ 101-element Vector{Float64} [Pa]
â”œâ”€ pressure_ion_total â¡ 101-element Vector{Float64} [Pa]
â”œâ”€ pressure_parallel â¡ 101-element Vector{Float64} [Pa]
â”œâ”€ pressure_perpendicular â¡ 101-element Vector{Float64} [Pa]
â”œâ”€ pressure_thermal â¡ 101-element Vector{Float64} [Pa]
â”œâ”€ rotation_frequency_tor_sonic â¡ 101-element Vector{Float64} [s^-1] (all 0.0)
â”œâ”€ t_i_average â¡ 101-element Vector{Float64} [eV]
â”œâ”€ time â¡ 0 [s]
â””â”€ zeff â¡ 101-element Vector{Float64} (all 2.0)</code></pre><h2 id="Whole-facility-design"><a class="docs-heading-anchor" href="#Whole-facility-design">Whole facility design</a><a id="Whole-facility-design-1"></a><a class="docs-heading-anchor-permalink" href="#Whole-facility-design" title="Permalink"></a></h2><p>Restore init checkpoint</p><pre><code class="language-julia hljs">dd, ini, act = chk[:init];</code></pre><p>Run ActorWholeFacility to get a self-consistent stationary whole facility design</p><pre><code class="language-julia hljs">FUSE.ActorWholeFacility(dd, act);</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">actors: WholeFacility
actors:  PFdesign
actors:  StationaryPlasma
actors:   --------------- 1/5
actors:   HCD
actors:    SimpleEC
actors:    SimpleIC
actors:    SimpleLH
actors:    SimpleNB
actors:    SimplePellet
actors:   Current
actors:    QED
actors:   Pedestal
actors:    EPED
actors:   CoreTransport
actors:    FluxMatcher
actors:     FluxCalculator
actors:      TGLF
actors:      Neoclassical
actors:   Current
actors:    QED
actors:   Equilibrium
actors:    TEQUILA
actors:   --------------- 1/5 @ 433.60%
actors:   HCD
actors:    SimpleEC
actors:    SimpleIC
actors:    SimpleLH
actors:    SimpleNB
actors:    SimplePellet
actors:   Current
actors:    QED
actors:   Pedestal
actors:    EPED
actors:   CoreTransport
actors:    FluxMatcher
actors:   Current
actors:    QED
actors:   Equilibrium
actors:    TEQUILA
actors:   --------------- 2/5 @ 195.62%
actors:   HCD
actors:    SimpleEC
actors:    SimpleIC
actors:    SimpleLH
actors:    SimpleNB
actors:    SimplePellet
actors:   Current
actors:    QED
actors:   Pedestal
actors:    EPED
actors:   CoreTransport
actors:    FluxMatcher
actors:   Current
actors:    QED
actors:   Equilibrium
actors:    TEQUILA
actors:   --------------- 3/5 @ 185.55%
actors:   HCD
actors:    SimpleEC
actors:    SimpleIC
actors:    SimpleLH
actors:    SimpleNB
actors:    SimplePellet
actors:   Current
actors:    QED
actors:   Pedestal
actors:    EPED
actors:   CoreTransport
actors:    FluxMatcher
actors:   Current
actors:    QED
actors:   Equilibrium
actors:    TEQUILA
actors:   --------------- 4/5 @ 64.39%
actors:  StabilityLimits
actors:  HFSsizing
actors:   FluxSwing
actors:   Stresses
actors:  LFSsizing
actors:  CXbuild
actors:  PassiveStructures
actors:  PFdesign
actors:  VerticalStability
actors:  Neutronics
actors:  Blanket
actors:   CXbuild
actors:  Divertors
actors:  BalanceOfPlant
actors:   ThermalPlant
actors:   PowerNeeds
actors:  Costing
actors:   CostingARIES</code></pre><p>Checkpoint results</p><pre><code class="language-julia hljs">chk[:awf] = dd, ini, act;</code></pre><h2 id="Running-a-custom-workflow"><a class="docs-heading-anchor" href="#Running-a-custom-workflow">Running a custom workflow</a><a id="Running-a-custom-workflow-1"></a><a class="docs-heading-anchor-permalink" href="#Running-a-custom-workflow" title="Permalink"></a></h2><p>Let&#39;s runs a series of actors similar to what ActorWholeFacility does</p><pre><code class="language-julia hljs">dd, ini, act = chk[:init];
plot(dd.equilibrium; label=&quot;before&quot;)
FUSE.ActorEquilibrium(dd, act; ip_from=:equilibrium);
plot!(dd.equilibrium; label=&quot;after&quot;)</code></pre><img src="tutorial-5c2c9bd1.svg" alt="Example block output"/><p>The stationary plasma actor iterates between plasma transport, pedestal, equilibrium and sources to return a self-consistent plasma solution</p><pre><code class="language-julia hljs">plot(dd.core_profiles; color=:gray)
FUSE.ActorStationaryPlasma(dd, act);
plot!(dd.core_profiles)</code></pre><img src="tutorial-ed7e0e99.svg" alt="Example block output"/><pre><code class="language-julia hljs">plot(dd.core_sources)</code></pre><img src="tutorial-3a28d92d.svg" alt="Example block output"/><pre><code class="language-julia hljs">plot(dd.core_transport)</code></pre><img src="tutorial-c847bbdf.svg" alt="Example block output"/><p>HFS sizing actor changes the thickness of the OH and TF layers on the high field side to satisfy current and stresses constraints</p><pre><code class="language-julia hljs">plot(dd.build)
FUSE.ActorHFSsizing(dd, act);
plot!(dd.build; cx=false)</code></pre><img src="tutorial-2fd019e0.svg" alt="Example block output"/><pre><code class="language-julia hljs">plot(dd.solid_mechanics.center_stack.stress)</code></pre><img src="tutorial-caaa8866.svg" alt="Example block output"/><p>LFS sizing actors change location of the outer TF leg to meet ripple requirements</p><pre><code class="language-julia hljs">plot(dd.build)
FUSE.ActorLFSsizing(dd, act);
plot!(dd.build; cx=false)</code></pre><img src="tutorial-e43b93e8.svg" alt="Example block output"/><p>ActorHFSsizing and ActorLFSsizing change the layer&#39;s thicknesses</p><pre><code class="language-julia hljs">dd.build.layer</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">23Ã—10 DataFrame
 Row â”‚ group   details                            type      Î”R        R_start   R_end     material      area        volume     shape
     â”‚<span class="sgr90"> String  String                             String    Float64   Float64   Float64   String        Float64     Float64    String
â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   1 â”‚ in                                                   2.2663     0.0       2.2663   steel          24.4497     138.274
   2 â”‚ in                                         oh        0.251811   2.2663    2.51811  nb3sn           7.36618     95.869
   3 â”‚ hfs                                        tf        0.293462   2.51811   2.81157  nb3sn_kdemo    17.542      309.89    convex hull
   4 â”‚ hfs     gap tf vacuum vessel                         0.210263   2.81157   3.02183  vacuum          7.41571    309.918   double ellipse
   5 â”‚ hfs     vacuum vessel  outer               wall      0.030508   3.02183   3.05234  tungsten        1.0529      44.023   negative offset
   6 â”‚ hfs     vacuum                             vessel    0.201812   3.05234   3.25416  water           6.81765    285.186   negative offset
   7 â”‚ hfs     vacuum vessel  inner               wall      0.030508   3.25416   3.28466  tungsten        1.00835     42.2002  negative offset
   8 â”‚ hfs     gap high temp shield vacuum vessâ€¦            0.105131   3.28466   3.38979  vacuum         10.0816     511.416   negative offset
   9 â”‚ hfs     high temp                          shield    0.315394   3.38979   3.70519  steel           9.45647    384.164   negative offset
  10 â”‚ hfs                                        blanket   0.505853   3.70519   4.21104  lithium_lead   24.5243    1070.36    negative offset
  11 â”‚ hfs     first                              wall      0.030508   4.21104   4.24155  tungsten        0.711842    27.4901  offset
  12 â”‚ lhfs                                       plasma    4.53863    4.24155   8.78018  plasma         32.8071    1292.99
  13 â”‚ lfs     first                              wall      0.030508   8.78018   8.81068  tungsten        0.711557    27.4763  offset
  14 â”‚ lfs                                        blanket   1.16754    8.81068   9.97823  lithium_lead   24.5246    1070.38    negative offset
  15 â”‚ lfs     high temp                          shield    0.315394   9.97823  10.2936   steel           9.45647    384.164   negative offset
  16 â”‚ lfs     gap high temp shield vacuum vessâ€¦            0.579589  10.2936   10.8732   vacuum         10.0816     511.416   negative offset
  17 â”‚ lfs     vacuum vessel  inner               wall      0.030508  10.8732   10.9037   tungsten        1.00835     42.2002  negative offset
  18 â”‚ lfs     vacuum                             vessel    0.201812  10.9037   11.1055   water           6.81765    285.186   negative offset
  19 â”‚ lfs     vacuum vessel  outer               wall      0.030508  11.1055   11.136    tungsten        1.0529      44.023   negative offset
  20 â”‚ lfs     gap tf vacuum vessel                         0.210263  11.136    11.3463   vacuum          7.41571    309.918   double ellipse
  21 â”‚ lfs                                        tf        0.293462  11.3463   11.6398   nb3sn_kdemo    17.5398     309.852   convex hull
  22 â”‚ out                                                  2.16943   11.6398   13.8092   vacuum        124.075     6312.91
  23 â”‚ out                                        cryostat  0.32353   13.8092   14.1327   steel          10.6442     717.759   silo</span></span></code></pre><p>We then need to trigger a build of the 2D cross-sections</p><pre><code class="language-julia hljs">FUSE.ActorCXbuild(dd, act);
plot(dd.build)</code></pre><img src="tutorial-1569a086.svg" alt="Example block output"/><p>We can then position the PF coils to best match the desired plasma shape</p><pre><code class="language-julia hljs">actor = FUSE.ActorPFdesign(dd, act; update_equilibrium=true);
plot(actor)</code></pre><img src="tutorial-69792730.svg" alt="Example block output"/><p>We need to update the wall shape, since the equilibrium may have changed based on the new PF coils locations</p><pre><code class="language-julia hljs">FUSE.ActorCXbuild(dd, act; rebuild_wall=true);
plot!(dd.build)</code></pre><img src="tutorial-01638674.svg" alt="Example block output"/><p>The Neutronics actor calculates the heat flux on the first wall</p><pre><code class="language-julia hljs">FUSE.ActorNeutronics(dd, act);
p = plot(; layout=2, size=(900, 350))
plot!(p, dd.neutronics.time_slice[].wall_loading, subplot=1)
plot!(p, FUSE.define_neutrons(dd, 100000)[1], dd.equilibrium.time_slice[]; subplot=1, colorbar_entry=false)
plot!(p, dd.neutronics.time_slice[].wall_loading; cx=false, subplot=2, ylabel=&quot;&quot;)</code></pre><img src="tutorial-b43d6afa.svg" alt="Example block output"/><p>The BlanketActor will change the thickess of the first wall, breeder, shield, and Li6 enrichment to achieve target TBR</p><pre><code class="language-julia hljs">FUSE.ActorBlanket(dd, act);
print_tree(IMAS.freeze(dd.blanket); maxdepth=5)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">actors: Blanket
actors:  CXbuild
blanket
â”œâ”€ module
â”‚  â””â”€ 1
â”‚     â”œâ”€ layer
â”‚     â”‚  â”œâ”€ 1
â”‚     â”‚  â”‚  â”œâ”€ material â¡ &quot;tungsten&quot;
â”‚     â”‚  â”‚  â”œâ”€ midplane_thickness â¡ 0.02882 [m]
â”‚     â”‚  â”‚  â””â”€ name â¡ &quot;lfs first wall&quot;
â”‚     â”‚  â”œâ”€ 2
â”‚     â”‚  â”‚  â”œâ”€ material â¡ &quot;lithium-lead: Li6/7=100.000&quot;
â”‚     â”‚  â”‚  â”œâ”€ midplane_thickness â¡ 1.16754 [m]
â”‚     â”‚  â”‚  â””â”€ name â¡ &quot;lfs blanket&quot;
â”‚     â”‚  â””â”€ 3
â”‚     â”‚     â”œâ”€ material â¡ &quot;steel&quot;
â”‚     â”‚     â”œâ”€ midplane_thickness â¡ 0.605767 [m]
â”‚     â”‚     â””â”€ name â¡ &quot;lfs high temp shield&quot;
â”‚     â”œâ”€ name â¡ &quot;blanket&quot;
â”‚     â””â”€ time_slice
â”‚        â””â”€ 1
â”‚           â”œâ”€ peak_escape_flux â¡ 9784.21 [W/m^2]
â”‚           â”œâ”€ peak_wall_flux â¡ 28090.9 [W/m^2]
â”‚           â”œâ”€ power_incident_neutrons â¡ 4.02196e+06 [W]
â”‚           â”œâ”€ power_incident_radiated â¡ 0 [W]
â”‚           â”œâ”€ power_thermal_extracted â¡ 4.82635e+06 [W]
â”‚           â”œâ”€ power_thermal_neutrons â¡ 4.82635e+06 [W]
â”‚           â”œâ”€ power_thermal_radiated â¡ 0 [W]
â”‚           â”œâ”€ time â¡ 0 [s]
â”‚           â””â”€ tritium_breeding_ratio â¡ 1.52855
â”œâ”€ time â¡ [0] [s]
â””â”€ tritium_breeding_ratio â¡ [1.37232]</code></pre><p>The Divertors actor calculates the divertors heat flux</p><pre><code class="language-julia hljs">FUSE.ActorDivertors(dd, act);
print_tree(IMAS.freeze(dd.divertors); maxdepth=4)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">actors: Divertors
divertors
â”œâ”€ divertor
â”‚  â””â”€ 1
â”‚     â”œâ”€ power_conducted
â”‚     â”‚  â”œâ”€ data â¡ [8.79828e+07] [W]
â”‚     â”‚  â””â”€ time â¡ [0] [s]
â”‚     â”œâ”€ power_convected
â”‚     â”‚  â”œâ”€ data â¡ [0] [W]
â”‚     â”‚  â””â”€ time â¡ [0] [s]
â”‚     â”œâ”€ power_incident
â”‚     â”‚  â”œâ”€ data â¡ [2.87165e+07] [W]
â”‚     â”‚  â””â”€ time â¡ [0] [s]
â”‚     â”œâ”€ power_thermal_extracted
â”‚     â”‚  â”œâ”€ data â¡ [2.87165e+07] [W]
â”‚     â”‚  â””â”€ time â¡ [0] [s]
â”‚     â””â”€ target
â”‚        â”œâ”€ 1
â”‚        â”‚  â‹®
â”‚        â”‚
â”‚        â””â”€ 2
â”‚           â‹®
â”‚
â””â”€ time â¡ [0] [s]</code></pre><p>Here we calculate the optimal cooling flowrates for the specific sources of heat and electricity conversion cycle</p><pre><code class="language- hljs">actor = FUSE.ActorBalanceOfPlant(dd, act);
plot(actor)</code></pre><p>Capital and operational cost breakdown</p><pre><code class="language-julia hljs">FUSE.ActorCosting(dd, act)
plot(dd.costing)</code></pre><img src="tutorial-ca77360e.svg" alt="Example block output"/><p>Checkpoint results</p><pre><code class="language-julia hljs">chk[:manual] = dd, ini, act;</code></pre><h2 id="Saving-and-loading-data"><a class="docs-heading-anchor" href="#Saving-and-loading-data">Saving and loading data</a><a id="Saving-and-loading-data-1"></a><a class="docs-heading-anchor-permalink" href="#Saving-and-loading-data" title="Permalink"></a></h2><pre><code class="language-julia hljs">tutorial_temp_dir = tempdir()
filename = joinpath(tutorial_temp_dir, &quot;$(ini.general.casename).json&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">&quot;/tmp/K-DEMO.json&quot;</code></pre><p>When saving data to be shared outside of FUSE, one can set <code>freeze=true</code> so that all expressions in the dd are evaluated and saved to file.</p><pre><code class="language-julia hljs">IMAS.imas2json(dd, filename; freeze=false, strict=false);</code></pre><p>Load from JSON</p><pre><code class="language-julia hljs">dd1 = IMAS.json2imas(filename);</code></pre><h2 id="Comparing-two-IDSs"><a class="docs-heading-anchor" href="#Comparing-two-IDSs">Comparing two IDSs</a><a id="Comparing-two-IDSs-1"></a><a class="docs-heading-anchor-permalink" href="#Comparing-two-IDSs" title="Permalink"></a></h2><p>We can introduce a change in the <code>dd1</code> and spot it with the <code>diff</code> function</p><pre><code class="language-julia hljs">dd1.equilibrium.time_slice[1].time = -100.0
IMAS.diff(dd.equilibrium, dd1.equilibrium)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Dict{String, String} with 1 entry:
  &quot;time_slice[1].time&quot; =&gt; &quot;value:  -Inf --  -100.0&quot;</code></pre><h2 id="Summary"><a class="docs-heading-anchor" href="#Summary">Summary</a><a id="Summary-1"></a><a class="docs-heading-anchor-permalink" href="#Summary" title="Permalink"></a></h2><p>Snapshot of <code>dd</code> in 0D quantities (evaluated at <code>dd.global_time</code>)</p><pre><code class="language-julia hljs">FUSE.extract(dd)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi"><span class="sgr1">GEOMETRY                                  EQUILIBRIUM                               TEMPERATURES                              </span>
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    
<span class="sgr34"><span class="sgr1">R0</span></span> â†’ 6.5 [m]                              <span class="sgr34"><span class="sgr1">B0</span></span> â†’ 7.8 [T]                              <span class="sgr34"><span class="sgr1">Te0</span></span> â†’ 0.289 [keV]                         
<span class="sgr34"><span class="sgr1">a</span></span> â†’ 2.01 [m]                              <span class="sgr34"><span class="sgr1">ip</span></span> â†’ 12 [MA]                              <span class="sgr34"><span class="sgr1">Ti0</span></span> â†’ 0.289 [keV]                         
<span class="sgr34"><span class="sgr1">1/Ïµ</span></span> â†’ 3.24                                <span class="sgr34"><span class="sgr1">q95</span></span> â†’ 5.34                                <span class="sgr34"><span class="sgr1">&lt;Te&gt;</span></span> â†’ 2.09 [keV]                         
<span class="sgr34"><span class="sgr1">Îº</span></span> â†’ 1.85                                  <span class="sgr34"><span class="sgr1">&lt;Bpol&gt;</span></span> â†’ 0.805 [T]                        <span class="sgr34"><span class="sgr1">&lt;Ti&gt;</span></span> â†’ 2.09 [keV]                         
<span class="sgr34"><span class="sgr1">Î´</span></span> â†’ 0.481                                 <span class="sgr34"><span class="sgr1">Î²pol_MHD</span></span> â†’ 0.13                           <span class="sgr34"><span class="sgr1">Te0/&lt;Te&gt;</span></span> â†’ 0.138                          
<span class="sgr34"><span class="sgr1">Î¶</span></span> â†’ -0.0185                               <span class="sgr34"><span class="sgr1">Î²tor_MHD</span></span> â†’ 0.00133                        <span class="sgr34"><span class="sgr1">Ti0/&lt;Ti&gt;</span></span> â†’ 0.138                          
<span class="sgr34"><span class="sgr1">Volume</span></span> â†’ 928 [mÂ³]                         <span class="sgr34"><span class="sgr1">Î²n_MHD</span></span> â†’ 0.176                                                                      
<span class="sgr34"><span class="sgr1">Surface</span></span> â†’ 751 [mÂ²]                                                                                                            
                                                                                                                              
<span class="sgr1">DENSITIES                                 PRESSURES                                 TRANSPORT                                 </span>
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    
<span class="sgr34"><span class="sgr1">ne0</span></span> â†’ 2.51e+19 [mâ»Â³]                      <span class="sgr34"><span class="sgr1">P0</span></span> â†’ 0.0022 [MPa]                         <span class="sgr34"><span class="sgr1">Ï„e</span></span> â†’ 0.681 [s]                            
<span class="sgr34"><span class="sgr1">ne_ped</span></span> â†’ 6.4e+19 [mâ»Â³]                    <span class="sgr34"><span class="sgr1">&lt;P&gt;</span></span> â†’ 0.0291 [MPa]                        <span class="sgr34"><span class="sgr1">H98y2</span></span> â†’ 0.328                             
<span class="sgr34"><span class="sgr1">&lt;ne&gt;</span></span> â†’ 3.47e+19 [mâ»Â³]                     <span class="sgr34"><span class="sgr1">P0/&lt;P&gt;</span></span> â†’ 0.0756                           <span class="sgr34"><span class="sgr1">Hds03</span></span> â†’ 0.279                             
<span class="sgr34"><span class="sgr1">ne0/&lt;ne&gt;</span></span> â†’ 0.724                          <span class="sgr34"><span class="sgr1">Î²n</span></span> â†’ 0.159                                <span class="sgr34"><span class="sgr1">Ï„Î±_thermalization</span></span> â†’ 0.0249 [s]            
<span class="sgr34"><span class="sgr1">fGW</span></span> â†’ 0.309                               <span class="sgr34"><span class="sgr1">Î²n_th</span></span> â†’ 0.158                             <span class="sgr34"><span class="sgr1">Ï„Î±_slowing_down</span></span> â†’ 0.00863 [s]             
<span class="sgr34"><span class="sgr1">zeff_ped</span></span> â†’ 2                                                                                                                  
<span class="sgr34"><span class="sgr1">&lt;zeff&gt;</span></span> â†’ 2                                                                                                                    
<span class="sgr34"><span class="sgr1">impurities</span></span> â†’ DT Ne20 He4                                                                                                      
                                                                                                                              
<span class="sgr1">SOURCES                                   EXHAUST                                   CURRENTS                                  </span>
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    
<span class="sgr34"><span class="sgr1">Pec</span></span> â†’ 50 [MW]                             <span class="sgr34"><span class="sgr1">Psol</span></span> â†’ 88 [MW]                            <span class="sgr34"><span class="sgr1">ip_bs_aux_ohm</span></span> â†’ 13.5 [MA]                 
<span class="sgr34"><span class="sgr1">rho0_ec</span></span> â†’ 0.5 [MW]                        <span class="sgr34"><span class="sgr1">PLH</span></span> â†’ 37.9 [MW]                           <span class="sgr34"><span class="sgr1">ip_ni</span></span> â†’ 13.5 [MA]                         
<span class="sgr34"><span class="sgr1">Pnbi</span></span> â†’ <span class="sgr31">NaN</span> [MW]                           <span class="sgr34"><span class="sgr1">Bpol_omp</span></span> â†’ 0.89 [T]                       <span class="sgr34"><span class="sgr1">ip_bs</span></span> â†’ 8.98 [MA]                         
<span class="sgr34"><span class="sgr1">Enbi1</span></span> â†’ <span class="sgr31">NaN</span> [MeV]                         <span class="sgr34"><span class="sgr1">Î»q</span></span> â†’ 1.22 [mm]                            <span class="sgr34"><span class="sgr1">ip_aux</span></span> â†’ 4.55 [MA]                        
<span class="sgr34"><span class="sgr1">Pic</span></span> â†’ 50 [MW]                             <span class="sgr34"><span class="sgr1">qpol</span></span> â†’ 1.34e+03 [MW/mÂ²]                   <span class="sgr34"><span class="sgr1">ip_ohm</span></span> â†’ 0.00754 [MA]                     
<span class="sgr34"><span class="sgr1">Plh</span></span> â†’ <span class="sgr31">NaN</span> [MW]                            <span class="sgr34"><span class="sgr1">qpar</span></span> â†’ 9.02e+03 [MW/mÂ²]                   <span class="sgr34"><span class="sgr1">ejima</span></span> â†’ 0.4                               
<span class="sgr34"><span class="sgr1">Paux_tot</span></span> â†’ 100 [MW]                       <span class="sgr34"><span class="sgr1">P/R0</span></span> â†’ 13.5 [MW/m]                        <span class="sgr34"><span class="sgr1">flattop</span></span> â†’ 0.5 [Hours]                     
<span class="sgr34"><span class="sgr1">PÎ±</span></span> â†’ 1.12 [MW]                            <span class="sgr34"><span class="sgr1">PB/R0</span></span> â†’ 106 [MW T/m]                                                                
<span class="sgr34"><span class="sgr1">Pohm</span></span> â†’ 5.81e-06 [MW]                      <span class="sgr34"><span class="sgr1">PBp/R0</span></span> â†’ 10.9 [MW T/m]                                                              
<span class="sgr34"><span class="sgr1">Pheat</span></span> â†’ 101 [MW]                          <span class="sgr34"><span class="sgr1">PBÏµ/R0q95</span></span> â†’ 6.1 [MW T/m]                                                            
<span class="sgr34"><span class="sgr1">Prad_tot</span></span> â†’ -13.1 [MW]                     <span class="sgr34"><span class="sgr1">neutrons_peak</span></span> â†’ 0.00639 [MW/mÂ²]                                                     
                                                                                                                              
<span class="sgr1">BOP                                       BUILD                                     COSTING                                   </span>
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    
<span class="sgr34"><span class="sgr1">Pfusion</span></span> â†’ 5.6 [MW]                        <span class="sgr34"><span class="sgr1">PF_material</span></span> â†’ nb3sn                       <span class="sgr34"><span class="sgr1">levelized_CoE</span></span> â†’ Inf [$/kWh]               
<span class="sgr34"><span class="sgr1">Qfusion</span></span> â†’ 0.056                           <span class="sgr34"><span class="sgr1">TF_material</span></span> â†’ nb3sn_kdemo                 <span class="sgr34"><span class="sgr1">TF_of_total</span></span> â†’ 5.57 [%]                    
<span class="sgr34"><span class="sgr1">thermal_cycle_type</span></span> â†’ rankine              <span class="sgr34"><span class="sgr1">OH_material</span></span> â†’ nb3sn                       <span class="sgr34"><span class="sgr1">BOP_of_total</span></span> â†’ 1.53 [%]                   
<span class="sgr34"><span class="sgr1">thermal_efficiency_plant</span></span> â†’ 0.128 [MW]     <span class="sgr34"><span class="sgr1">TF_max_b</span></span> â†’ 18.1 [T]                       <span class="sgr34"><span class="sgr1">blanket_of_total</span></span> â†’ 28.2 [%]               
<span class="sgr34"><span class="sgr1">thermal_efficiency_cycle</span></span> â†’ 0.411 [MW]     <span class="sgr34"><span class="sgr1">OH_max_b</span></span> â†’ 4.22 [T]                       <span class="sgr34"><span class="sgr1">cryostat_of_total</span></span> â†’ 8.88 [%]              
<span class="sgr34"><span class="sgr1">power_electric_generated</span></span> â†’ 5.99 [MW]      <span class="sgr34"><span class="sgr1">TF_j_margin</span></span> â†’ 1.4                         <span class="sgr34"><span class="sgr1">capital_cost</span></span> â†’ 3.7 [$B]                   
<span class="sgr34"><span class="sgr1">Pelectric_net</span></span> â†’ -139 [MW]                 <span class="sgr34"><span class="sgr1">OH_j_margin</span></span> â†’ 9.34                                                                  
<span class="sgr34"><span class="sgr1">Qplant</span></span> â†’ 0.0413                           <span class="sgr34"><span class="sgr1">TF_stress_margin</span></span> â†’ 2.12                                                             
<span class="sgr34"><span class="sgr1">TBR</span></span> â†’ 1.37                                <span class="sgr34"><span class="sgr1">OH_stress_margin</span></span> â†’ 3.03                                                             
                                                                                                                              
<span class="sgr1">CONSTRAINT                                </span>
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    
<span class="sgr34"><span class="sgr1">min_required_power_electric_net</span></span> â†’ 1.35    
<span class="sgr34"><span class="sgr1">required_power_electric_net</span></span> â†’ 1.15        
<span class="sgr34"><span class="sgr1">min_q95</span></span> â†’ <span class="sgr31">NaN</span>                             
<span class="sgr34"><span class="sgr1">max_tf_j</span></span> â†’ 0.114                          
<span class="sgr34"><span class="sgr1">max_oh_j</span></span> â†’ 0                              
<span class="sgr34"><span class="sgr1">max_pl_stress</span></span> â†’ 0                         
<span class="sgr34"><span class="sgr1">max_tf_stress</span></span> â†’ 0                         
<span class="sgr34"><span class="sgr1">max_oh_stress</span></span> â†’ 0                         
<span class="sgr34"><span class="sgr1">max_Î²n</span></span> â†’ <span class="sgr31">NaN</span>                              
<span class="sgr34"><span class="sgr1">max_Psol_R</span></span> â†’ <span class="sgr31">NaN</span>                          
<span class="sgr34"><span class="sgr1">min_lh_power_threshold</span></span> â†’ <span class="sgr31">NaN</span>              
                                          
</code></pre><p>Extract + plots saved to PDF (or printed to screen it <code>filename</code> is omitted)</p><pre><code class="language-julia hljs">filename = joinpath(tutorial_temp_dir, &quot;$(ini.general.casename).pdf&quot;)
FUSE.digest(dd, filename)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">GKS: could not find font middle.ttf
â”Œ Warning: ERROR: ProcessFailedException occurred, including output in Weaved document
â”” @ Weave /home/runner/.julia/packages/Weave/f7Ly3/src/run.jl:224
â”Œ Warning: Error converting document to pdf. Try running latex manually
â”” @ Weave /home/runner/.julia/packages/Weave/f7Ly3/src/writer/latex.jl:12
Generation of K-DEMO.pdf failed. See directory: /tmp/jl_15FbaN
Base.IOError(&quot;could not spawn `xelatex digest.tex`: no such file or directory (ENOENT)&quot;, -2)</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="examples.html">Â« Examples</a><a class="docs-footer-nextpage" href="develop.html">Development Â»</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Monday 9 September 2024 20:23">Monday 9 September 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
