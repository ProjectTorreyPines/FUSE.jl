<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Contributing · FUSE</title><meta name="title" content="Contributing · FUSE"/><meta property="og:title" content="Contributing · FUSE"/><meta property="twitter:title" content="Contributing · FUSE"/><meta name="description" content="Documentation for FUSE."/><meta property="og:description" content="Documentation for FUSE."/><meta property="twitter:description" content="Documentation for FUSE."/><script async src="https://www.googletagmanager.com/gtag/js?id=G-65D8V8C8VQ"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-65D8V8C8VQ', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img class="docs-light-only" src="assets/logo.svg" alt="FUSE logo"/><img class="docs-dark-only" src="assets/logo-dark.svg" alt="FUSE logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="index.html">Main</a></li><li><span class="tocitem">Learn</span><ul><li><a class="tocitem" href="tutorial.html">Tutorial</a></li><li><a class="tocitem" href="examples.html">Examples</a></li><li><a class="tocitem" href="pubs.html">Publications</a></li></ul></li><li><a class="tocitem" href="cases.html">Use Cases</a></li><li><span class="tocitem">Actors</span><ul><li><a class="tocitem" href="actors.html">List of actors</a></li><li><a class="tocitem" href="act.html">act parameters</a></li></ul></li><li><span class="tocitem">Initialization</span><ul><li><a class="tocitem" href="inits.html">Init routines</a></li><li><a class="tocitem" href="ini.html">ini parameters</a></li></ul></li><li><a class="tocitem" href="dd.html">Data Structure</a></li><li><span class="tocitem">Development</span><ul><li><a class="tocitem" href="deps.html">Ecosystem</a></li><li class="is-active"><a class="tocitem" href="develop.html">Contributing</a><ul class="internal"><li><a class="tocitem" href="#Setting-up-a-developer-environment"><span>Setting up a developer environment</span></a></li><li><a class="tocitem" href="#Git-branches"><span>Git branches</span></a></li><li><a class="tocitem" href="#Add/modify-entries-in-dd"><span>Add/modify entries in <code>dd</code></span></a></li><li><a class="tocitem" href="#Write-a-new-actor"><span>Write a new actor</span></a></li><li><a class="tocitem" href="#Add/modify-examples"><span>Add/modify examples</span></a></li><li><a class="tocitem" href="#Add/modify-a-new-cluster"><span>Add/modify a new cluster</span></a></li><li><a class="tocitem" href="#Write-IMAS-physics-functions"><span>Write IMAS physics functions</span></a></li><li><a class="tocitem" href="#Add/modify-entries-in-ini-and-act"><span>Add/modify entries in <code>ini</code> and <code>act</code></span></a></li><li><a class="tocitem" href="#Profiling-and-writing-fast-Julia-code"><span>Profiling and writing fast Julia code</span></a></li><li><a class="tocitem" href="#Build-the-documentation"><span>Build the documentation</span></a></li><li><a class="tocitem" href="#Develop-in-VScode"><span>Develop in VScode</span></a></li><li><a class="tocitem" href="#Track-Julia-precompilation"><span>Track Julia precompilation</span></a></li><li><a class="tocitem" href="#Run-Julia-within-a-Python-environment"><span>Run Julia within a Python environment</span></a></li></ul></li></ul></li><li><span class="tocitem">Install</span><ul><li><a class="tocitem" href="install.html">Install FUSE</a></li><li><a class="tocitem" href="install_saga.html">on SAGA</a></li><li><a class="tocitem" href="install_omega.html">on OMEGA</a></li></ul></li><li><span class="tocitem">License</span><ul><li><a class="tocitem" href="license.html">License</a></li><li><a class="tocitem" href="notice.html">Notice</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Development</a></li><li class="is-active"><a href="develop.html">Contributing</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="develop.html">Contributing</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ProjectTorreyPines/FUSE.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/ProjectTorreyPines/FUSE.jl/blob/master/docs/src/develop.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Contributing"><a class="docs-heading-anchor" href="#Contributing">Contributing</a><a id="Contributing-1"></a><a class="docs-heading-anchor-permalink" href="#Contributing" title="Permalink"></a></h1><p>FUSE is a collaborative project, and we welcome contributions from the community!</p><h2 id="Setting-up-a-developer-environment"><a class="docs-heading-anchor" href="#Setting-up-a-developer-environment">Setting up a developer environment</a><a id="Setting-up-a-developer-environment-1"></a><a class="docs-heading-anchor-permalink" href="#Setting-up-a-developer-environment" title="Permalink"></a></h2><p>Follow these steps to set up your development environment for contributing to the FUSE codebase (or any other Julia package).</p><ol><li><p>Install and configure Revise.jl</p><p>Install <a href="https://github.com/timholy/Revise.jl">Revise.jl</a> to modify code and see changes without restarting Julia. We recommend adding <code>import Revise</code> to your <code>~/.julia/config/startup.jl</code> to automatically load Revise in all Julia sessions. Run the following command:</p><pre><code class="language-bash hljs">fusebot install_revise</code></pre><p>Restart your Julia sessions and Jupyter kernels to apply this change.</p></li><li><p>By default, development packages are located in <code>~/.julia/dev</code>. Since accessing hidden folders like <code>~/.julia</code> can be cumbersome, you may find it helpful to create a symbolic link to this dev folder (you can name the link <code>~/julia_dev</code> or something more convenient):</p><pre><code class="language-bash hljs">ln -s ~/.julia/dev ~/julia_dev</code></pre></li><li><p>Instead of manually cloning repositories, we recommend using Julia&#39;s <code>Pkg</code> system. Here’s a quick guide:</p><pre><code class="language-julia hljs">] dev FUSE # clones the `master` branch of FUSE
] dev FUSE\#feature_branch # clones a specific feature branch
] dev FUSE@v1.2.3 # checks out a specific release version
] free FUSE # stops development mode, reverting to standard usage
] status # shows the status of all packages in use and development
] up # upgrades all packages (note: manage `dev` packages manually)</code></pre><p>These commands work not only for FUSE but for any Julia package, including <a href="https://fuse.help/dev/deps.html">packages that FUSE depends on</a>.</p><p>Familiarize yourself with <a href="https://pkgdocs.julialang.org/v1/managing-packages/">managing Julia packages</a>, as this will be helpful when contributing to FUSE or other Julia projects.</p></li><li><p>Once set up, you can open <code>~/julia_dev</code> in VS Code, make changes to the code, and immediately see the effects of your changes live in your Julia sessions and Jupyter notebooks (thanks to <code>Revise.jl</code>).</p></li></ol><h2 id="Git-branches"><a class="docs-heading-anchor" href="#Git-branches">Git branches</a><a id="Git-branches-1"></a><a class="docs-heading-anchor-permalink" href="#Git-branches" title="Permalink"></a></h2><p>The <code>master</code> and <code>dev</code> branches of ProjectTorreyPines repositories are write-protected. This means that even with write permissions to the repository, you&#39;ll not be able to push to them directly. Instead, we handle updates – be it new features or bug fixes – through branches and Pull Requests (PRs).</p><p>A crucial part of our PR process is <strong>code review</strong>. It is where your peers get to weigh in and ensure everything is up to standard before merging. When you create a PR, think about who on the team has the right expertise for the code you&#39;re working on, and assign them as reviewers. Their insights will not only help in maintaining code quality but also in catching any potential issues early. It is all about teamwork and making sure our code is the best it can be!</p><div class="admonition is-info" id="Note-50ed5bb830d442f"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-50ed5bb830d442f" title="Permalink"></a></header><div class="admonition-body"><p>When working on a new feature that involves changes to FUSE and other ProjectTorreyPines repositories, you&#39;ll want to use the same branch name across these repositories. For example, if you&#39;re working on a branch named <code>my_new_feature</code> in both FUSE and IMAS, regression testing will be performed using the <code>my_new_feature</code> branches for FUSE and IMAS, along with the <code>master</code> branch of the other <code>ProjectTorreyPines</code> repositories.</p></div></div><h2 id="Add/modify-entries-in-dd"><a class="docs-heading-anchor" href="#Add/modify-entries-in-dd">Add/modify entries in <code>dd</code></a><a id="Add/modify-entries-in-dd-1"></a><a class="docs-heading-anchor-permalink" href="#Add/modify-entries-in-dd" title="Permalink"></a></h2><p>The <code>dd</code> data structure is defined under the <a href="https://github.com/ProjectTorreyPines/IMASdd.jl">IMASdd.jl</a> package. See the documentation there to how add/modify entries in <code>dd</code>.</p><h2 id="Write-a-new-actor"><a class="docs-heading-anchor" href="#Write-a-new-actor">Write a new actor</a><a id="Write-a-new-actor-1"></a><a class="docs-heading-anchor-permalink" href="#Write-a-new-actor" title="Permalink"></a></h2><p>See the Jupyter <a href="https://github.com/ProjectTorreyPines/FuseExamples/blob/master/new_actor.ipynb">new actor tutorial</a></p><h2 id="Add/modify-examples"><a class="docs-heading-anchor" href="#Add/modify-examples">Add/modify examples</a><a id="Add/modify-examples-1"></a><a class="docs-heading-anchor-permalink" href="#Add/modify-examples" title="Permalink"></a></h2><p>The <a href="https://github.com/ProjectTorreyPines/FuseExamples">FuseExamples repository</a> contains jupyter notebook that showcase some possible uses of FUSE.</p><div class="admonition is-info" id="Note-f7c70420083a45c"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-f7c70420083a45c" title="Permalink"></a></header><div class="admonition-body"><p>When committing changes to in a jupyter notebook, make sure that all the output cells are cleared! This is important to keep the size of the repository in check.</p></div></div><h2 id="Add/modify-a-new-cluster"><a class="docs-heading-anchor" href="#Add/modify-a-new-cluster">Add/modify a new cluster</a><a id="Add/modify-a-new-cluster-1"></a><a class="docs-heading-anchor-permalink" href="#Add/modify-a-new-cluster" title="Permalink"></a></h2><p>The <code>parallel_environment()</code> function is used to easily setup the working environment for distributed jobs. Edit it <a href="https://github.com/search?q=repo%3AProjectTorreyPines%2FFUSE.jl+%22function+parallel_environment%22&amp;type=code">here</a> with your own cluster, folllowing the others as a template.</p><h2 id="Write-IMAS-physics-functions"><a class="docs-heading-anchor" href="#Write-IMAS-physics-functions">Write IMAS physics functions</a><a id="Write-IMAS-physics-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Write-IMAS-physics-functions" title="Permalink"></a></h2><p>IMAS physics and engineering functions are structured in <a href="https://github.com/ProjectTorreyPines/IMAS.jl">IMAS.jl</a> under <code>IMAS/src/physics</code>. These functions use or modify the datastructure (dd) in some way and are used to calculate certain quantities or fill the data structure.</p><p>Let&#39;s say we want to create a function that calculates the DT fusion and then fill <code>core_sources</code> with the alpha heating from that source. Here is an example of writing it in a good way:</p><pre><code class="language-julia hljs">function DT_fusion_source!(dd::IMAS.dd)
    return DT_fusion_source!(dd.core_sources, dd.core_profiles)
end

&quot;&quot;&quot;
    DT_fusion_source!(cs::IMAS.core_sources, cp::IMAS.core_profiles)

Calculates DT fusion heating with an estimation of the alpha slowing down to the ions and electrons, modifies dd.core_sources
&quot;&quot;&quot;
function DT_fusion_source!(cs::IMAS.core_sources, cp::IMAS.core_profiles)
    # // actual implementation here //
end</code></pre><div class="admonition is-category-convention" id="Convention-dfdea385a7459fde"><header class="admonition-header">Convention<a class="admonition-anchor" href="#Convention-dfdea385a7459fde" title="Permalink"></a></header><div class="admonition-body"><p>The documentation string is added to the specialized function <code>DT_fusion_source!(cs::IMAS.core_sources, cp::IMAS.core_profiles)</code> and the dispatch function <code>DT_fusion_source!(dd::IMAS.dd)</code> is added on above</p></div></div><h2 id="Add/modify-entries-in-ini-and-act"><a class="docs-heading-anchor" href="#Add/modify-entries-in-ini-and-act">Add/modify entries in <code>ini</code> and <code>act</code></a><a id="Add/modify-entries-in-ini-and-act-1"></a><a class="docs-heading-anchor-permalink" href="#Add/modify-entries-in-ini-and-act" title="Permalink"></a></h2><p>The functinoality of the <code>ini</code> and <code>act</code> parameters is implemented in the <a href="https://github.com/ProjectTorreyPines/SimulationParameters.jl">SimulationParameters.jl</a> package.</p><ul><li>The <code>ini</code> parameters are all defined in the <code>FUSE/src/parameters_init.jl</code> file. Add/edit entries there.</li><li>The <code>act</code> parameters of each actor are defined where that actor is defined. Add/edit entries there.</li></ul><h2 id="Profiling-and-writing-fast-Julia-code"><a class="docs-heading-anchor" href="#Profiling-and-writing-fast-Julia-code">Profiling and writing fast Julia code</a><a id="Profiling-and-writing-fast-Julia-code-1"></a><a class="docs-heading-anchor-permalink" href="#Profiling-and-writing-fast-Julia-code" title="Permalink"></a></h2><p>First let&#39;s do some profiling to identify problemetic functions:</p><ol><li><p>Run FUSE from the VScode Julia REPL (<code>&lt;Command-Shift-p&gt;</code> and then <code>Julia: Start REPL</code>)</p><pre><code class="language-julia hljs">using FUSE
FUSE.logging(Logging.Info; actors=Logging.Info);
ini, act = FUSE.case_parameters(:FPP; version=:v1_demount, init_from=:scalars, STEP=true);
dd = IMAS.dd()
FUSE.init(dd, ini, act)
FUSE.ActorWholeFacility(dd, act); # call this once to precompile</code></pre><div class="admonition is-info" id="Note-d580e91f1d7518fc"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-d580e91f1d7518fc" title="Permalink"></a></header><div class="admonition-body"></div></div><p>Alternatively one can create a <code>profile.jl</code> file in the <code>FUSE/playground</code> folder, write Julia code in that file, select the code to execute and run it with <code>&lt;Control-Return&gt;</code>.</p></li><li><p>Use <code>@time</code> to monitor execution time and allocations</p></li><li><p>For functions that return very quickly one can use <code>BenchmarkTooks.@benchmark</code></p></li><li><p>Graphical profiling of the execution time is a powerful way to understand where time is spent</p><pre><code class="language-julia hljs">@profview FUSE.ActorWholeFacility(dd, act);</code></pre><p>where <code>FUSE.ActorWholeFacility(dd, act);</code> can really be any function that we care about</p></li><li><p>Look at allocations</p><pre><code class="language-julia hljs">@profview_allocs FUSE.ActorWholeFacility(dd, act);</code></pre></li><li><p>We can decide how finely to comb for bottlenecks by setting <code>sample_rate</code> in <code>@profview</code> and <code>@profview_allocs</code>:</p><pre><code class="nohighlight hljs">@profview_allocs f(args...) [sample_rate=0.0001] [C=false]</code></pre></li></ol><div class="admonition is-info" id="Note-bb6ea8be3093d89e"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-bb6ea8be3093d89e" title="Permalink"></a></header><div class="admonition-body"><p>To move forward we have to <a href="https://docs.julialang.org/en/v1/manual/performance-tips">understand how to write performant Julia code</a>.</p></div></div><p>Let&#39;s now investigate where the issue is with the function that we have identified. For this we have several tools at our disposal:</p><ul><li><p><a href="https://docs.julialang.org/en/v1/manual/performance-tips/#man-code-warntype"><code>@code_warntype</code></a>: static analyzer built-in with Julia</p><ul><li>only looks at types that are inferred at runtime</li><li>reports types only for the target function</li><li><code>@code_warntype function()</code></li></ul></li><li><p><a href="https://github.com/aviatesk/JET.jl">JET</a>: static analyzer integrated with VScode</p><ul><li>can detect different possible issues, including types inferred at runtime</li><li>JET goes deep into functions</li><li><code>JET.@report_opt function()</code> reports dynamic dispatch</li><li><code>JET.@report_call function()</code> reports type errors</li><li><code>JET.@report_call target_modules=(FUSE,IMAS,IMAS.IMASdd, ) FUSE.ActorNeutronics(dd,act);</code></li></ul></li><li><p><a href="https://github.com/JuliaDebug/Cthulhu.jl">Cthulhu</a>: interactive static analyzer</p><ul><li><code>Cthulhu.@descend function()</code></li></ul></li></ul><h2 id="Build-the-documentation"><a class="docs-heading-anchor" href="#Build-the-documentation">Build the documentation</a><a id="Build-the-documentation-1"></a><a class="docs-heading-anchor-permalink" href="#Build-the-documentation" title="Permalink"></a></h2><ol><li><p>To build the documentation, in the <code>FUSE/docs</code> folder, start Julia then:</p><pre><code class="language-julia hljs">] activate .
include(&quot;make.jl&quot;)</code></pre><p>!!! tip Interactive documentation build     One can call <code>include(&quot;make.jl&quot;)</code> over and over within the same Julia session to avoid dealing with startup time.</p></li><li><p>Check page by opening <code>FUSE/docs/build/index.html</code> page in web-browser.</p></li><li><p>The online documentation is built after each commit to <code>master</code> via GitHub actions.</p></li></ol><div class="admonition is-info" id="Note-9f9853854b550399"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-9f9853854b550399" title="Permalink"></a></header><div class="admonition-body"><p>Documentation files (PDF, DOC, XLS, PPT, ...) can be committed and pushed to the <a href="https://github.com/ProjectTorreyPines/FUSE_extra_files">FUSE_extra_files</a> repository, and then linked directly from within the FUSE documentation, like this:</p><pre><code class="language-markdown hljs">[video recording of the first FUSE tutorial](https://github.com/ProjectTorreyPines/FUSE_extra_files/raw/master/FUSE_tutorial_1_6Jul22.mp4)</code></pre></div></div><h2 id="Develop-in-VScode"><a class="docs-heading-anchor" href="#Develop-in-VScode">Develop in VScode</a><a id="Develop-in-VScode-1"></a><a class="docs-heading-anchor-permalink" href="#Develop-in-VScode" title="Permalink"></a></h2><p><a href="https://code.visualstudio.com">VScode</a> is an excellent development environment for Julia.</p><p>FUSE uses the following VScode settings for formatting the Julia code:</p><pre><code class="language-json hljs">{
    &quot;files.autoSave&quot;: &quot;onFocusChange&quot;,
    &quot;workbench.tree.indent&quot;: 24,
    &quot;editor.insertSpaces&quot;: true,
    &quot;editor.tabSize&quot;: 4,
    &quot;editor.detectIndentation&quot;: false,
    &quot;[julia]&quot;: {
        &quot;editor.defaultFormatter&quot;: &quot;julialang.language-julia&quot;
    },
    &quot;juliaFormatter.margin&quot;: 160,
    &quot;juliaFormatter.alwaysForIn&quot;: true,
    &quot;juliaFormatter.annotateUntypedFieldsWithAny&quot;: false,
    &quot;juliaFormatter.whitespaceInKwargs&quot;: false,
    &quot;juliaFormatter.overwriteFlags&quot;: true,
    &quot;juliaFormatter.alwaysUseReturn&quot;: true,
}</code></pre><div class="admonition is-info" id="Note-8cab3fb9fa7c41ff"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-8cab3fb9fa7c41ff" title="Permalink"></a></header><div class="admonition-body"><p>To add these settings to VScode add these lines to: <code>&lt;Command&gt; + &lt;shift&gt; + p</code> -&gt; <code>Preferences: Open User Settings (JSON)</code></p></div></div><div class="admonition is-info" id="Note-6c39662461ef55f"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-6c39662461ef55f" title="Permalink"></a></header><div class="admonition-body"><p>To format Julia you will need to install <code>Julia Language Support</code> under the extensions tab (<code>&lt;Command&gt; + &lt;shift&gt; + x</code>)</p></div></div><h2 id="Track-Julia-precompilation"><a class="docs-heading-anchor" href="#Track-Julia-precompilation">Track Julia precompilation</a><a id="Track-Julia-precompilation-1"></a><a class="docs-heading-anchor-permalink" href="#Track-Julia-precompilation" title="Permalink"></a></h2><p>To see what is precompiled at runtime, you can add a Julia kernel with the <code>trace-compile</code> option to Jupyter</p><pre><code class="language-julia hljs">import IJulia
IJulia.installkernel(&quot;Julia tracecompile&quot;, &quot;--trace-compile=stderr&quot;)</code></pre><p>Then select the <code>Julia tracecompile</code> in jupyter-lab</p><div class="admonition is-info" id="Note-1158b98d092498f1"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-1158b98d092498f1" title="Permalink"></a></header><div class="admonition-body"><p>If you want to remove jupyter kernels you don&#39;t use anymore you can list them first with <code>jupyter kernelspec list</code> and remove via <code>jupyter kernelspec remove &lt;your kernel&gt;</code></p></div></div><h2 id="Run-Julia-within-a-Python-environment"><a class="docs-heading-anchor" href="#Run-Julia-within-a-Python-environment">Run Julia within a Python environment</a><a id="Run-Julia-within-a-Python-environment-1"></a><a class="docs-heading-anchor-permalink" href="#Run-Julia-within-a-Python-environment" title="Permalink"></a></h2><p>This can be particularly useful for benchmarking FUSE physics against existing Python routines (eg. in OMFIT)</p><ol><li><p>Install <code>PyCall</code> in your Julia environment:</p><pre><code class="nohighlight hljs">export PYTHON=&quot;&quot; # Sometimes one needs to empty the PYTHON environmental variable to install PyCall
julia -e &#39;using Pkg; Pkg.add(&quot;PyCall&quot;); Pkg.build(&quot;PyCall&quot;)&#39;</code></pre><div class="admonition is-info" id="Note-eb57f527bcc44c91"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-eb57f527bcc44c91" title="Permalink"></a></header><div class="admonition-body"><p>Python and Julia must be compiled for the same architecture. For example, to install Julia x64 in a Apple Silicon MACs:</p><pre><code class="language-bash hljs">juliaup add release~x64
export PYTHON=&quot;&quot;
julia +release~x64 -e &#39;using Pkg; Pkg.add(&quot;PyCall&quot;); Pkg.build(&quot;PyCall&quot;)&#39;</code></pre><p>You can make this verison your default one with</p><pre><code class="language-bash hljs">juliaup default release~x64</code></pre></div></div></li><li><p>Use pip to install the package PyJulia — remember to use the same Python passed to ENV[&quot;PYTHON&quot;]:</p><pre><code class="language-bash hljs">python3 –m pip install julia</code></pre></li><li><p>Configure the communication between Julia and Python by running the following in the Python interpreter:</p><pre><code class="language-python hljs">import julia
julia.install()</code></pre><div class="admonition is-info" id="Note-26b7c1874e8ee14e"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-26b7c1874e8ee14e" title="Permalink"></a></header><div class="admonition-body"><p>If you have more than one Julia version on our system, we could specify it with an argument:</p><pre><code class="nohighlight hljs">julia.install(julia=&quot;/Users/meneghini/.julia/juliaup/julia-1.8.5+0.x64.apple.darwin14/bin/julia&quot;)</code></pre></div></div></li><li><p>Test the installation running the following in the Python interpreter run:</p><pre><code class="language-python hljs">from julia import Main
Main.eval(&#39;[x^2 for x in 0:4]&#39;)</code></pre></li><li><p>Now, try something more useful:</p><pre><code class="language-python hljs">from julia.api import Julia
Julia(compiled_modules=False)
def S(string): # from Python str to Julia Symbol
    return Main.eval(f&quot;PyCall.pyjlwrap_new({string})&quot;)

from julia import Main, IMAS, FUSE, Logging
FUSE.logging(Logging.Info, actors=Logging.Debug);

ini, act = FUSE.case_parameters(S(&quot;:FPP&quot;), version=S(&quot;:v1_demount&quot;), init_from=S(&quot;:scalars&quot;), STEP=True);
dd = FUSE.init(ini, act);

eqt=dd.equilibrium.time_slice[-1]
cp1d=dd.core_profiles.profiles_1d[-1]
jFUSE = IMAS.Sauter_neo2021_bootstrap(eqt, cp1d, neo_2021=True)</code></pre></li></ol></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="deps.html">« Ecosystem</a><a class="docs-footer-nextpage" href="install.html">Install FUSE »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Monday 28 July 2025 03:16">Monday 28 July 2025</span>. Using Julia version 1.11.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
